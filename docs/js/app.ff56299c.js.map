{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/User/ActivityChart.vue?afce","webpack:///./src/components/User/Chart.vue?d2b0","webpack:///./src/components/Switch.vue?323a","webpack:///./src/components/User/ActivityChart.vue?092e","webpack:///./src/components/CheapLoading.vue?3dd3","webpack:///./src/components/History/History.vue?9c19","webpack:///./src/components/User/Details/SeriesItem.vue?bd17","webpack:///./src/components/User/Tooltip.vue?bd72","webpack:///./src/components/User/Calendar.vue?20ee","webpack:///./src/components/Home/Settings.vue?32a3","webpack:///./src/components/User/DataRange.vue?33f4","webpack:///./src/components/List/Pagination.vue?c342","webpack:///./src/components/Home/SettingsSwitcher.vue?3ef6","webpack:///./src/components/Home/Panel.vue?65e3","webpack:///./src/views/User.vue?0e31","webpack:///./src/assets/merge.png","webpack:///./src/views/Home.vue?5eaf","webpack:///./src/components/Home/Logo.vue?7d95","webpack:///./src/components/Button.vue?49e9","webpack:///./src/App.vue?2fff","webpack:///./src/components/User/Details/SeriesDetails.vue?6e59","webpack:///./src/components/User/Main.vue?15ec","webpack:///./src/components/User/Details/DetailsContainer.vue?b611","webpack:///./src/components/Special/Help.vue?17c8","webpack:///./src/views/Special.vue?528c","webpack:///./src/App.vue","webpack:///./src/queries/activity.ts","webpack:///./src/queries/list.ts","webpack:///./src/queries/media.ts","webpack:///./src/queries/user.ts","webpack:///./src/store/api.ts","webpack:///./src/store/store.ts","webpack:///./src/store/helpers.ts","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?dfb6","webpack:///./src/views/Home.vue","webpack:///./src/components/Home/Logo.vue","webpack:///./src/components/Home/Logo.vue?21b9","webpack:///./src/components/Home/Logo.vue?5f56","webpack:///./src/components/Button.vue","webpack:///./src/components/Button.vue?0589","webpack:///./src/components/Button.vue?e107","webpack:///./src/components/Home/Settings.vue","webpack:///./src/components/Home/SettingsSwitcher.vue","webpack:///./src/components/Home/SettingsSwitcher.vue?5407","webpack:///./src/components/Home/SettingsSwitcher.vue?b1a3","webpack:///./src/components/Switch.vue","webpack:///./src/components/Switch.vue?587b","webpack:///./src/components/Switch.vue?e14d","webpack:///./src/components/Home/Settings.vue?1caf","webpack:///./src/components/Home/Settings.vue?5163","webpack:///./src/components/Home/Panel.vue","webpack:///./src/components/Home/Panel.vue?dec0","webpack:///./src/components/Home/Panel.vue?080d","webpack:///./src/views/Special.vue","webpack:///./src/components/Special/About.vue","webpack:///./src/components/Special/About.vue?5693","webpack:///./src/components/Special/About.vue?6542","webpack:///./src/components/Special/Help.vue","webpack:///./src/components/Special/Help.vue?8fbd","webpack:///./src/components/Special/Help.vue?c132","webpack:///./src/views/Special.vue?4f00","webpack:///./src/views/Special.vue?68b7","webpack:///./src/views/Home.vue?d5e7","webpack:///./src/views/Home.vue?ab8c","webpack:///./src/views/User.vue","webpack:///./src/components/User/Loading.vue","webpack:///./src/components/User/Loading.vue?aba7","webpack:///./src/components/User/Loading.vue?03a1","webpack:///./src/components/User/Sidebar.vue","webpack:///./src/components/User/Sidebar/MenuItem.vue","webpack:///./src/components/User/Sidebar/MenuItem.vue?585b","webpack:///./src/components/User/Sidebar/MenuItem.vue?5230","webpack:///./src/components/User/Sidebar.vue?168c","webpack:///./src/components/User/Sidebar.vue?33a4","webpack:///./src/views/User.vue?2474","webpack:///./src/views/User.vue?a29a","webpack:///./src/components/User/Main.vue","webpack:///./src/components/User/Details/DetailsContainer.vue","webpack:///./src/components/User/Details/SeriesItem.vue","webpack:///./src/components/User/Details/SeriesDetails.vue","webpack:///./src/components/CheapLoading.vue","webpack:///./src/components/CheapLoading.vue?6d1d","webpack:///./src/components/CheapLoading.vue?9b37","webpack:///./src/components/User/ActivityChart.vue","webpack:///./src/components/User/ActivityChart.vue?0790","webpack:///./src/components/User/ActivityChart.vue?3145","webpack:///./src/components/User/Details/SeriesDetails.vue?e970","webpack:///./src/components/User/Details/SeriesDetails.vue?f750","webpack:///./src/components/User/Details/SeriesItem.vue?d23d","webpack:///./src/components/User/Details/SeriesItem.vue?332b","webpack:///./src/components/User/Details/DetailsContainer.vue?9c99","webpack:///./src/components/User/Details/DetailsContainer.vue?8914","webpack:///./src/components/User/Calendar.vue","webpack:///./src/components/User/Calendar.vue?d309","webpack:///./src/components/User/Calendar.vue?b2e9","webpack:///./src/components/User/DataRange.vue","webpack:///./src/components/User/DataRange.vue?b68b","webpack:///./src/components/User/DataRange.vue?932e","webpack:///./src/components/User/Tooltip.vue","webpack:///./src/components/User/Tooltip.vue?1584","webpack:///./src/components/User/Tooltip.vue?439d","webpack:///./src/components/User/Chart.vue","webpack:///./src/components/User/Chart.vue?b487","webpack:///./src/components/User/Chart.vue?4ccc","webpack:///./src/components/User/Main.vue?6c3e","webpack:///./src/components/User/Main.vue?f9ec","webpack:///./src/components/List/List.vue","webpack:///./src/store/lists.ts","webpack:///./src/components/List/Popup.vue","webpack:///./src/components/List/Popup.vue?80c0","webpack:///./src/components/List/Popup.vue?938f","webpack:///./src/components/List/Pagination.vue","webpack:///./src/components/List/Pagination.vue?b350","webpack:///./src/components/List/Pagination.vue?1154","webpack:///./src/components/List/List.vue?71c9","webpack:///./src/components/List/List.vue?e016","webpack:///./src/components/History/History.vue","webpack:///./src/components/History/History.vue?1288","webpack:///./src/components/History/History.vue?4804","webpack:///./src/router/index.ts","webpack:///./src/main.ts","webpack:///./src/components/User/Sidebar.vue?17ad","webpack:///./src/components/User/Loading.vue?ebca","webpack:///./src/components/User/Sidebar/MenuItem.vue?9c6a","webpack:///./src/components/List/Popup.vue?71d1","webpack:///./src/components/List/List.vue?8800"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","activityQuery","listQuery","mediaQuery","userQuery","swrvConfig","revalidateOnFocus","dedupingInterval","anilistRequest","query","variables","fetch","method","headers","body","JSON","stringify","response","json","fetchUserData","username","fetchMedia","id","media","page","perPage","mediaId","userId","mutate","fetchList","type","fetchActivity","mediaType","from","to","undefined","compareDates","a","b","y","weekdays","monthNames","debug","state","userData","avatar","activities","preloadedActivities","currentPage","updateHour","saveSettings","animeList","mangaList","setUserdata","obj","this","User","medium","incrementCurrentPage","appendActivities","concat","destroy","e","setSettings","setPreloadedActivities","setAnimeList","list","setMangaList","parseActivities","days","forEach","timestamp","Date","createdAt","getHours","setDate","getDate","range","activityDateObject","getMonth","getFullYear","weekday","getDay","time","getTime","episodes","chapters","status","progress","split","parseInt","title","romaji","cover","coverImage","sameDay","find","x","day","mediaObject","formatObj","Intl","DateTimeFormat","formatToParts","dateFormat","map","join","prettyDate","date","replace","String","newActivityDate","dateObject","findAddedDate","raws","plan","act","startsWith","document","classList","contains","remove","localStorage","setItem","add","store","created","getItem","Number","theme","mounted","$nextTick","then","render","class","style","href","size","error","icon","toggleSettings","loading","placeholder","send","settings","toggleSpecial","$event","showSpecial","view","specialView","props","__scopeId","fixed-width","color","setting","desc","options","default","handleSelect","model-value","save","toggleSave","option","chosen","select","capitalize","Array","cho","methods","toUpperCase","$emit","checked","modelValue","target","for","Boolean","emits","components","SettingsSwitcher","Switch","val","toLowerCase","buildTimestamp","lightMode","computed","documentElement","dataset","popupHide","popupClick","src","About","Help","stopPropagation","Logo","Button","Settings","Panel","Special","show","$route","showError","url","URL","pathname","process","removeItem","$router","resp","catch","setTimeout","showSidebar","toggleSidebar","loadEarlierActivities","emitToggle","toggleTheme","params","user","MenuItem","Loading","Sidebar","lock","lastPage","loadActivites","path","Page","pageInfo","preloadActivites","preloaded","nextPage","duplicates","filter","dup","indexToRemove","indexOf","old","showTooltip","load","showPopup","fetchPopup","tooltipActivities","popupLoading","height","row","stamp","toggleDisplay","alt","details","hide","added","ref","mouseDown","mouseUp","mouseMove","mouseLeave","required","margin","top","bottom","dragging","startX","scrollLeft","watch","clean","node","$refs","area","lastChild","removeChild","columnWidth","width","svg","append","attr","domain","countArray","line","curve","datum","selectAll","text","pageX","chart","offsetLeft","walk","CheapLoading","ActivityChart","rawActivities","reverse","SeriesDetails","SeriesItem","displayMonth","toggleYearPicker","update","showYearPicker","pickerYears","year","loadMonth","firstWeekday","handleClick","notLoaded","notYetHappened","getOpacity","max","now","preparePickers","firstDay","count","daysInMonth","Math","latestActivity","latestDay","lastActivity","lastDay","month","format","event","change","ratio","lastLoadedDay","close","selected","DetailsContainer","Calendar","Tooltip","DataRange","Chart","begin","end","console","log","cellspacing","appear","popupMedia","filteredFilters","values","toggleFilter","animeName","mangaName","listLength","navigate","current","paginatedList","popupShow","data-src","prettyFormat","completed","prettyStatus","resolveColor","resolveIcon","fetchMediaList","MediaListCollection","lists","formatted","isCustomList","entries","flat","final","banner","bannerImage","started","mapDates","startedAt","completedAt","sort","localeCompare","rel","Popup","Pagination","displayCover","pageSize","filters","fetchData","ceil","raw","filtered","item","directives","lazyload","el","index","indexof","set","years","months","unknownCount","selectedMonth","selectedYear","entry","clear","parseData","currentYear","zeros","checkYear","lesser","pop","zeroCount","targetYear","matches","routes","component","Home","children","Main","List","History","router","history","App","use","mount"],"mappings":"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","file":"js/app.ff56299c.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/anistats2/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ActivityChart.vue?vue&type=style&index=1&id=f62daefc&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Chart.vue?vue&type=style&index=0&id=c136de9e&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Switch.vue?vue&type=style&index=0&id=358459af&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ActivityChart.vue?vue&type=style&index=0&id=f62daefc&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CheapLoading.vue?vue&type=style&index=0&id=b816d2c6&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./History.vue?vue&type=style&index=0&id=3294c33b&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SeriesItem.vue?vue&type=style&index=0&id=1740b062&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Tooltip.vue?vue&type=style&index=0&id=d36cfb8a&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Calendar.vue?vue&type=style&index=0&id=4e6c0de4&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Settings.vue?vue&type=style&index=0&id=a25cacc0&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DataRange.vue?vue&type=style&index=0&id=46337ac5&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Pagination.vue?vue&type=style&index=0&id=5120db18&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SettingsSwitcher.vue?vue&type=style&index=0&id=49c0d509&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Panel.vue?vue&type=style&index=0&id=3bc7c728&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./User.vue?vue&type=style&index=0&id=393292b8&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/merge.ca5fa3bb.png\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=6685224c&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Logo.vue?vue&type=style&index=0&id=1ee4ba7e&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Button.vue?vue&type=style&index=0&id=edb20c84&lang=scss&scoped=true\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=2b4b3d31&lang=scss\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SeriesDetails.vue?vue&type=style&index=0&id=d5b22e72&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Main.vue?vue&type=style&index=0&id=aabbaf26&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DetailsContainer.vue?vue&type=style&index=0&id=451e4c02&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Help.vue?vue&type=style&index=0&id=6692f36c&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Special.vue?vue&type=style&index=0&id=2da0d219&lang=scss&scoped=true\"","<template>\r\n  <router-view/>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\nimport { toggleTheme } from './store/helpers';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n        }\r\n    },\r\n\r\n    created(): void {\r\n      // Load saved settings to state\r\n      const updateHour = localStorage.getItem(\"updateHour\");\r\n      const mediaType = localStorage.getItem(\"mediaType\");\r\n\r\n      if (updateHour && mediaType) {\r\n        store.saveSettings(true);\r\n        store.setSettings({\r\n          updateHour: Number(updateHour),\r\n          mediaType\r\n        })\r\n      }\r\n\r\n      const theme = localStorage.getItem(\"theme\")\r\n      if(theme == \"light\") {\r\n        toggleTheme();\r\n      }\r\n    },\r\n\r\n    mounted(): void {\r\n      this.$nextTick().then(() => {\r\n        //document.body.classList.add('site-theme-light');\r\n      })\r\n    }\r\n})\r\n\r\n</script>\r\n<style lang=\"scss\">\r\n@import url('https://fonts.googleapis.com/css2?family=Jost:wght@400;500&display=swap');\r\n\r\n:root {// DARK MODE (default) COLORS\r\n  --color-background: #272c38;\r\n  --color-background-secondary: #1f232d;\r\n  --color-background-border: #343946;\r\n  --color-background-darker: #2d3340;\r\n  --color-background-day: #188cc6;\r\n  \r\n  --color-selected-background: #2d3340;\r\n  --color-selected-text: #34bbff;\r\n\r\n  --color-text: white;\r\n  --color-text-secondary: #cbd3e3;\r\n  --color-text-blue: #49a5f2;\r\n  --color-text-gray: #d3d3d3;\r\n  --color-text-red: #b33737;\r\n\r\n  --shadow-default: 0 0 10px rgba(0,0,0,.25);\r\n  --radius: 6px;\r\n}\r\n\r\n.site-theme-light {\r\n  --color-background: #edf1f5;\r\n  --color-background-secondary: #cecece;\r\n  --color-background-border: #c7c7c7;\r\n  --color-background-darker: white;\r\n  --color-background-day: #4a9bc4;\r\n\r\n  --color-selected-background: #3391c0;\r\n  --color-selected-text: white;\r\n\r\n  --color-text: #222;\r\n  --color-text-secondary: #333;\r\n  --color-text-blue: #4090d1;\r\n  --color-text-gray: #666;\r\n  --color-text-red: #b33737;\r\n\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n  font-family: 'Jost', sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n\r\n  color: var(--color-text);\r\n  background: var(--color-background);\r\n  margin: 0;\r\n}\r\n\r\na {\r\n    text-decoration: none;\r\n    color: #65a9c4;\r\n}\r\n\r\ninput {\r\n  outline: none;\r\n  border: none;\r\n  background: none;\r\n  font: inherit;\r\n  display: block;\r\n  color: var(--color-text-input);\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n\r\n  max-width: 800px;\r\n  margin: auto;\r\n\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n\r\nfooter {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.prop {\r\n    display: flex;\r\n    align-items: center;\r\n    margin: 0 10px;\r\n}\r\n\r\n.prop-value {\r\n    margin-right: 6.47px;\r\n    font-size: 1.4em;\r\n}\r\n\r\n.prop-desc {\r\n    font-size: .76em;\r\n    color: var(--color-text-secondary);\r\n}\r\n\r\n// TRANSITIONS\r\n.popup-backdrop {\r\n    position: fixed;\r\n    bottom: 0;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n\r\n    z-index: 2;\r\n    background: rgba(0,0,0,.7);\r\n    \r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.popup-backdrop-enter-from, .popup-backdrop-leave-to {\r\n    opacity: 0;\r\n}\r\n\r\n.popup-backdrop-enter-active, .popup-backdrop-leave-active {\r\n    transition: .1s ease-in-out;\r\n}\r\n\r\n.popup-enter-from, .popup-leave-to {\r\n    transform: scale(0.9);\r\n}\r\n\r\n.popup-enter-active, .popup-leave-active {\r\n    transition: .2s ease;\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n    .popup-backdrop {\r\n        align-items: flex-end;\r\n    };\r\n}\r\n\r\n// MEDIA\r\n@media screen and (max-width: 800px) {\r\n  .container {\r\n    padding: 10px;\r\n  }\r\n}\r\n\r\n@keyframes pulse {\r\n  0%, 100% {\r\n     border-bottom-color: var(--color-background-border);\r\n  }\r\n\r\n  50% {\r\n    border-bottom-color: var(--color-text-blue);\r\n  }\r\n}\r\n</style>\r\n","// activityQuery: returns user's activities\r\nexport const activityQuery: string = `query ($userId: Int, $page: Int, $perPage: Int, $type: ActivityType, $from: Int, $to: Int) {\r\n    Page(page: $page, perPage: $perPage) {\r\n      pageInfo {\r\n        total\r\n        currentPage\r\n        lastPage\r\n        hasNextPage\r\n        perPage\r\n      }\r\n      activities(userId: $userId, sort: ID_DESC, type: $type, createdAt_greater: $from, createdAt_lesser: $to) {\r\n        __typename\r\n        ... on ListActivity {\r\n          id\r\n          media {\r\n            id\r\n            type\r\n            title {\r\n              romaji\r\n            }\r\n            coverImage {\r\n              medium\r\n            }\r\n          }\r\n          type\r\n          createdAt\r\n          status\r\n          progress\r\n        }\r\n      }\r\n    }\r\n  }`","// listQuery: returns all user's lists containing anime or manga.\r\nexport const listQuery: string = `query ($userId: Int, $type: MediaType, $chunk: Int) {\r\n    MediaListCollection (userId: $userId, type: $type, chunk: $chunk) {\r\n        lists {\r\n            name\r\n            isCustomList\r\n            entries {\r\n              id\r\n              status\r\n              progress\r\n              createdAt\r\n              startedAt {\r\n                year\r\n                month\r\n                day\r\n              }\r\n              completedAt {\r\n                year\r\n                month\r\n                day\r\n              }\r\n              media {\r\n                id\r\n                type\r\n                bannerImage\r\n                coverImage {\r\n                  medium\r\n                }\r\n                averageScore\r\n                seasonYear\r\n                title {\r\n                  romaji\r\n                }\r\n                format\r\n                episodes\r\n                chapters\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }`;\r\n","// Returns information about one entry (anime/manga), along with user's activities connected with it.\r\nexport const mediaQuery: string = `query ($userId: Int, $mediaId: Int, $page: Int, $perPage: Int) {\r\n    Media(id: $mediaId) {\r\n      id\r\n      title {\r\n        romaji\r\n      }\r\n      coverImage {\r\n        large\r\n      }\r\n      bannerImage\r\n      episodes\r\n    }\r\n    Page(page: $page, perPage: $perPage) {\r\n      pageInfo {\r\n        total\r\n        currentPage\r\n        lastPage\r\n        hasNextPage\r\n        perPage\r\n      }\r\n      activities(sort: ID_DESC, mediaId: $mediaId, userId: $userId) {\r\n        __typename\r\n        ... on ListActivity {\r\n          id\r\n          media {\r\n            id\r\n            type\r\n            title {\r\n              romaji\r\n            }\r\n            coverImage {\r\n              medium\r\n            }\r\n          }\r\n          type\r\n          createdAt\r\n          status\r\n          progress\r\n        }\r\n      }\r\n    }\r\n  }\r\n  `","// Returns more user data based on its name.\r\n// It's necessary, since while you may request user's list using the username, you can't do the same with activities (used in mediaQuery.)\r\n// Along with it, it fetches user's profile picture to display it and make the site prettier, because why not.\r\nexport const userQuery: string = `query ($username: String) {\r\n    User (name: $username) {\r\n      id\r\n      name\r\n      avatar {\r\n        medium\r\n      }\r\n    }\r\n  }`","import { ActivityDate, ActivityMedia } from \"@/interfaces/activity\";\r\nimport { activityQuery } from \"@/queries/activity\";\r\nimport { listQuery } from \"@/queries/list\";\r\nimport { mediaQuery } from \"@/queries/media\";\r\nimport { userQuery } from \"@/queries/user\";\r\n\r\nimport useSWRV, { IConfig } from 'swrv';\r\n\r\nconst swrvConfig: IConfig = {\r\n    revalidateOnFocus: false,\r\n    dedupingInterval: 3600000\r\n}\r\n\r\nexport async function anilistRequest(query: string, variables: any): Promise<any> {\r\n    const response = await fetch(\"https://graphql.anilist.co\", {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify({ query, variables })\r\n    });\r\n\r\n    const result = await response.json();\r\n    return result;\r\n}\r\n\r\nexport async function fetchUserData(username: string): Promise<any> {\r\n    return anilistRequest(userQuery, { username });\r\n}\r\n\r\nexport async function fetchMedia(id: number, media: number): Promise<any> {\r\n    const variables = {\r\n        page: 1,\r\n        perPage: 50,\r\n        mediaId: media,\r\n        userId: id  \r\n    }\r\n    \r\n    const { data, mutate } = useSWRV('/user/'+id+'/media/'+media, () => anilistRequest(mediaQuery, variables), swrvConfig);\r\n    \r\n    if(typeof data.value === 'undefined') await mutate();\r\n    \r\n    return data.value;\r\n}\r\n\r\nexport async function fetchList(id: number, type: string): Promise<any> {\r\n    const variables = {\r\n        userId: id,\r\n        type\r\n    }\r\n\r\n    return anilistRequest(listQuery, variables);\r\n}\r\n\r\nexport async function fetchActivity(id: number, page: number, mediaType: string, from?: number, to?: number): Promise<any> {\r\n    let type = undefined;\r\n    \r\n    if (mediaType == 'anime') {\r\n        type = 'ANIME_LIST';\r\n    } else if (mediaType == 'manga') {\r\n        type = 'MANGA_LIST';\r\n    }\r\n\r\n    const variables = {\r\n        page,\r\n        perPage: 50, // max\r\n        userId: id,\r\n        type,\r\n        from,\r\n        to\r\n    }\r\n\r\n    return anilistRequest(activityQuery, variables);\r\n}\r\n\r\nexport function compareDates(a: ActivityDate, b: ActivityDate): boolean {\r\n    return (a.d == b.d && a.m == b.m && a.y == b.y);\r\n}","import { ActivityDate, ActivityDay, ActivityMedia } from \"@/interfaces/activity\";\r\nimport { reactive } from \"vue\";\r\nimport { compareDates, fetchList } from \"./api\";\r\n\r\nexport const weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\nexport const monthNames = [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\", \"August\",\"September\",\"October\",\"November\",\"December\"];\r\n\r\nexport default {\r\n    debug: true,\r\n\r\n    state: reactive({\r\n        userData: {\r\n            id: 0,\r\n            username: \"\",\r\n            avatar: \"\"\r\n        },\r\n        activities: [] as ActivityDay[],\r\n        preloadedActivities: [] as ActivityDay[],\r\n        currentPage: 1,\r\n        updateHour: 3,\r\n        mediaType: 'both',\r\n        saveSettings: false,\r\n        animeList: [] as ActivityMedia[],\r\n        mangaList: [] as ActivityMedia[]\r\n    }),\r\n\r\n    setUserdata(obj: any): void {\r\n        this.state.userData.id = obj.data.User.id;\r\n        this.state.userData.username = obj.data.User.name;\r\n        this.state.userData.avatar = obj.data.User.avatar.medium;\r\n    },\r\n\r\n    incrementCurrentPage(): void {\r\n        this.state.currentPage++;\r\n    },\r\n\r\n    appendActivities(activities: ActivityDay[]): ActivityDay[] {\r\n        this.state.activities = this.state.activities.concat(activities);\r\n        return this.state.activities;\r\n    },\r\n\r\n    destroy(): void {\r\n        this.state.currentPage = 1;\r\n        this.state.activities = [];\r\n        this.state.preloadedActivities = [];\r\n        this.state.animeList = [];\r\n        this.state.mangaList = [];\r\n    },\r\n\r\n    saveSettings(e: boolean): void {\r\n        this.state.saveSettings = e;\r\n    },\r\n\r\n    setSettings(o: {\r\n        updateHour?: number,\r\n        mediaType?: string\r\n    }): void {\r\n        // Destroy current state, because in case the user loads their page again without refreshing the site, inconsistencies may appear.\r\n        this.destroy();\r\n        if ('updateHour' in o) this.state.updateHour = o.updateHour as number;\r\n        if ('mediaType' in o && o.mediaType) this.state.mediaType = o.mediaType;\r\n    },\r\n\r\n    setPreloadedActivities(activities: ActivityDay[]): void {\r\n        this.state.preloadedActivities = activities;\r\n    },\r\n\r\n    setAnimeList(list: ActivityMedia[]): void {\r\n        this.state.animeList = list;\r\n    },\r\n\r\n    setMangaList(list: ActivityMedia[]): void {\r\n        this.state.mangaList = list;\r\n    },\r\n\r\n    parseActivities(activities: any): ActivityDay[] {\r\n        const days: ActivityDay[] = [];\r\n\r\n        activities.forEach((a: any) => {\r\n            const timestamp = new Date(a.createdAt * 1000); // Convert AniList time to js time\r\n\r\n            if(timestamp.getHours() < this.state.updateHour) { // Couting late night as previous day (user can choose a specific hour in settings)\r\n                // Make the activity appear the previous day. For example: July 3 => July 2. The setDate function does month conversion and all for us.\r\n                timestamp.setDate(timestamp.getDate() - 1);\r\n            }\r\n\r\n            const activityDateObject: ActivityDate = {\r\n                d: timestamp.getDate(),\r\n                m: timestamp.getMonth() + 1, // converts to human-readable format (January as 1, not 0)\r\n                y: timestamp.getFullYear(),\r\n                weekday: weekdays[timestamp.getDay()],\r\n                time: timestamp.getTime()\r\n            }\r\n\r\n            // Determining watched episodes (or read chapters) count\r\n            let episodes = 0;\r\n            let chapters = 0;\r\n            let range;\r\n            \r\n            switch(a.status) {\r\n                case 'watched episode':\r\n                case 'rewatched episode':\r\n                    range = a.progress.split(' - ');\r\n                    if(range.length == 2) {\r\n                        episodes = parseInt(range[1]) - parseInt(range[0]) + 1;\r\n                    }\r\n                    else episodes = 1;\r\n                    break;\r\n                case 'read chapter':\r\n                case 'reread chapter':\r\n                    range = a.progress.split(' - ');\r\n                    if(range.length == 2) {\r\n                        chapters = parseInt(range[1]) - parseInt(range[0]) + 1;\r\n                    }\r\n                    else chapters = 1;\r\n                    break;\r\n                case 'completed':\r\n                    if(a.media.type == 'ANIME') episodes = 1;\r\n                    else chapters = 1;\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n\r\n            // Parsing media\r\n            const media: ActivityMedia = {\r\n                id: a.media.id,\r\n                type: a.media.type,\r\n                title: a.media.title.romaji,\r\n                cover: a.media.coverImage.medium,\r\n                episodes: (episodes ? episodes : chapters),\r\n            }\r\n\r\n            // Look for other activities in particular day and append our data to it (because one day = one activity object)\r\n            const sameDay: ActivityDay | undefined = days.find(x => compareDates(x.day, activityDateObject)); // is there any more efficient way to do this?\r\n            \r\n            // If it found something\r\n            if(sameDay) {\r\n                sameDay.episodes += episodes; // Append our episode count to the entire day's episode count\r\n                sameDay.chapters += chapters;\r\n\r\n                // Checking if there's another activity for the same anime/manga on this day.\r\n                const mediaObject = sameDay.media.find(x => x.id == media.id && x.type == media.type);\r\n                if(mediaObject) {\r\n                    if(mediaObject.type == 'ANIME') {\r\n                        mediaObject.episodes += episodes;\r\n                    } else {\r\n                        mediaObject.episodes += chapters; // There is no need for distinction between chapters and episodes in a single media object.\r\n                    }\r\n                } else {\r\n                    sameDay.media.push(media);\r\n                }\r\n            }\r\n            else { // We have to create an object for the day here.\r\n                days.push({\r\n                    day: activityDateObject,\r\n                    episodes,\r\n                    chapters,\r\n                    media: (media ? [media] : [])\r\n                })\r\n            }\r\n        })\r\n\r\n        return days;\r\n    }\r\n}","import { ActivityDate } from \"@/interfaces/activity\";\r\nimport { weekdays } from \"./store\";\r\n\r\nconst formatObj = new Intl.DateTimeFormat().formatToParts(new Date());\r\n    \r\nconst dateFormat = formatObj.map(obj => {\r\n    switch (obj.type) {\r\n        case \"day\":\r\n            return \"DD\";\r\n        case \"month\":\r\n            return \"MM\";\r\n        case \"year\":\r\n            return \"YYYY\";\r\n        default:\r\n            return obj.value;\r\n    }\r\n}).join(\"\");\r\n\r\nexport function prettyDate(date: ActivityDate): string {\r\n    if(date.time == 0) return \"Unknown\";\r\n    return dateFormat.replace(\"DD\", String(date.d)).replace(\"MM\", (date.m >= 10 ? String(date.m) : '0'+String(date.m) )).replace(\"YYYY\", String(date.y));\r\n}\r\n\r\nexport function newActivityDate(timestamp: number): ActivityDate {\r\n    const dateObject = new Date(timestamp);\r\n\r\n    return {\r\n        d: dateObject.getDate(),\r\n        m: dateObject.getMonth() + 1,\r\n        y: dateObject.getFullYear(),\r\n        weekday: weekdays[dateObject.getDay()],\r\n        time: dateObject.getTime()\r\n    }\r\n}\r\n\r\nexport function findAddedDate(raws: any): string {\r\n    const plan = raws.find((act: any) => act.status.startsWith(\"plans\"));\r\n    if(!plan) return \"Unknown\";\r\n    else {\r\n        const timestamp = new Date(plan.createdAt * 1000);\r\n\r\n        const activityDateObject: ActivityDate = {\r\n            d: timestamp.getDate(),\r\n            m: timestamp.getMonth() + 1, // converts to human-readable format (January as 1, not 0)\r\n            y: timestamp.getFullYear(),\r\n            weekday: weekdays[timestamp.getDay()],\r\n            time: timestamp.getTime()\r\n        }\r\n        return (plan ? prettyDate(activityDateObject) : 'Unknown')\r\n    }\r\n}\r\n\r\n// you can access DOM from here so why not?\r\nexport function toggleTheme(): void {\r\n    if(document.body.classList.contains('site-theme-light')) {\r\n        document.body.classList.remove('site-theme-light');\r\n        window.localStorage.setItem('theme', 'dark');\r\n        // Modify localstorage\r\n    } else {\r\n        document.body.classList.add('site-theme-light')\r\n        // Modify localstore\r\n        window.localStorage.setItem('theme', 'light');\r\n    }\r\n}","\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\nimport { toggleTheme } from './store/helpers';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n        }\r\n    },\r\n\r\n    created(): void {\r\n      // Load saved settings to state\r\n      const updateHour = localStorage.getItem(\"updateHour\");\r\n      const mediaType = localStorage.getItem(\"mediaType\");\r\n\r\n      if (updateHour && mediaType) {\r\n        store.saveSettings(true);\r\n        store.setSettings({\r\n          updateHour: Number(updateHour),\r\n          mediaType\r\n        })\r\n      }\r\n\r\n      const theme = localStorage.getItem(\"theme\")\r\n      if(theme == \"light\") {\r\n        toggleTheme();\r\n      }\r\n    },\r\n\r\n    mounted(): void {\r\n      this.$nextTick().then(() => {\r\n        //document.body.classList.add('site-theme-light');\r\n      })\r\n    }\r\n})\r\n\r\n","import { render } from \"./App.vue?vue&type=template&id=2b4b3d31\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=2b4b3d31&lang=scss\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"container\">\r\n    <Logo size=\"2em\"></Logo>\r\n    <span class=\"warning\">anistats 2 is still in <span style=\"color: var(--color-text-blue)\">beta</span> and may lack some features. For the previous version look <a href=\"https://pizza61.github.io/anistats\">here</a>.</span>\r\n    <transition name=\"errorfade\">\r\n      <span class=\"error\" v-if=\"error.length > 0\">{{ error }}</span>\r\n    </transition>\r\n    <div class=\"input\">\r\n      <div class=\"button-wrapper desktop\">\r\n        <Button icon=\"cog\" @click=\"toggleSettings\">Settings</Button>\r\n      </div>\r\n      <input class=\"username\" :class=\"{ usernameError: error.length > 0, pulse: loading }\" placeholder=\"Enter username\" type=\"text\" v-model=\"username\" @keyup.enter=\"send\" />\r\n      <div class=\"button-wrapper desktop\">\r\n        <Button @click=\"send\" icon=\"chevron-right\">Continue</Button>\r\n      </div>\r\n    </div>\r\n    <div class=\"buttons mobile\">\r\n      <div class=\"button-wrapper\">\r\n        <Button icon=\"cog\" @click=\"toggleSettings\">Settings</Button>\r\n      </div>\r\n      <div class=\"button-wrapper\">\r\n        <Button @click=\"send\" icon=\"chevron-right\">Continue</Button>\r\n      </div>\r\n    </div>\r\n    <div class=\"settings\">\r\n      <transition name=\"settings\" mode=\"out-in\">\r\n        <Settings v-if=\"settings\"></Settings>\r\n      </transition>\r\n    </div>\r\n    <footer>\r\n      <Panel @special=\"toggleSpecial($event)\"></Panel>\r\n    </footer>\r\n    <transition name=\"popup-backdrop\">\r\n      <Special v-if=\"showSpecial\" :view=\"specialView\" @hide=\"showSpecial = false\"></Special>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport Button from '@/components/Button.vue';\r\nimport Settings from '@/components/Home/Settings.vue';\r\nimport Panel from '@/components/Home/Panel.vue';\r\nimport Special from '@/views/Special.vue';\r\n\r\nimport store from '@/store/store';\r\nimport { fetchUserData } from '@/store/api';\r\n\r\nexport default defineComponent({\r\n  components: { Logo, Button, Settings, Panel, Special },\r\n\r\n  data() {\r\n    return {\r\n      show: true,\r\n      loading: false,\r\n      settings: false,\r\n\r\n      showSpecial: false,\r\n      specialView: '',\r\n\r\n      username: \"\",\r\n      error: \"\",\r\n      state: store.state\r\n    }\r\n  },\r\n\r\n  mounted(): void {\r\n    if(this.$route.query.error == \"1\") {\r\n      this.showError(\"Something went wrong. Please try again\");\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // Resolve username/link and redirect to next component for processing.\r\n    send(): void {\r\n      if(this.username.length < 2) {\r\n        return this.showError(\"Hey, I said enter your username.\")\r\n      }\r\n\r\n      if(this.username.startsWith(\"https://anilist.co\")) { // The user entered a profile link.\r\n        try {\r\n          let url = new URL(this.username);\r\n          if(url.pathname.startsWith(\"/user/\")) {\r\n            // If the link was correct, it should return the username. If it wasn't, the next component should return an error.\r\n            let username = url.pathname.split(\"/\")[2];\r\n            this.process(username);\r\n          } else {\r\n            throw 'Invalid URL';\r\n          }\r\n        }\r\n        catch (e)\r\n        {\r\n          this.showError(e);\r\n        }\r\n      } else { // The user entered something different (preferably the username)\r\n        // Saving user settings to localStorage (if user chose to)\r\n        if(this.state.saveSettings) {\r\n          localStorage.setItem(\"updateHour\", String(this.state.updateHour));\r\n          localStorage.setItem(\"mediaType\", this.state.mediaType);\r\n        } else { // clear settings in case they were saved but user opted out of it\r\n          localStorage.removeItem(\"updateHour\");\r\n          localStorage.removeItem(\"mediaType\");\r\n        }\r\n\r\n        this.loading = true;\r\n        this.process(this.username);\r\n      }\r\n    },\r\n\r\n    process(username: string): void {\r\n      // Checking if the user data is already loaded. If it is, it means that the user is revisitng the page so there's no need to fetch anything again\r\n      if(this.state.userData.username == username && this.state.activities.length > 0) {\r\n        this.$router.push('/'+username);\r\n      } else {\r\n        fetchUserData(username)\r\n        .then(resp => {\r\n          store.destroy();\r\n          store.setUserdata(resp);\r\n          this.$router.push('/'+username);\r\n        })\r\n        .catch(() => {\r\n          this.showError(\"Invalid username (or profile is private)\");\r\n        })\r\n      }\r\n    },\r\n\r\n    showError(e: string): void {\r\n      this.loading = false;\r\n      this.error = e;\r\n      setTimeout(() => {\r\n        this.error = \"\";\r\n      }, 5000);\r\n    },\r\n\r\n    toggleSettings(): void {\r\n      this.settings = !this.settings;\r\n    },\r\n\r\n    toggleSpecial(name: string): void {\r\n      this.specialView = name;\r\n      this.showSpecial = true;\r\n    }\r\n  }\r\n\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.input {\r\n  display: flex;\r\n  margin: 10px 0;\r\n\r\n}\r\n.username {\r\n  padding: 10px;\r\n\r\n  font-size: 2em;\r\n  font-weight: 500;\r\n\r\n  border-bottom: 3px solid var(--color-background-border);\r\n\r\n  transition: border-bottom .5s;\r\n\r\n  &::placeholder {\r\n    color: var(--color-text-secondary);\r\n  }\r\n}\r\n\r\n.usernameError {\r\n  border-bottom: 3px solid var(--color-text-red);\r\n}\r\n\r\n.buttons {\r\n  justify-content: space-around;\r\n  display: flex;\r\n}\r\n \r\n.button-wrapper {\r\n  flex-grow: 1;\r\n  border-radius: var(--radius);\r\n  color: var(--color-text-secondary);\r\n  padding: 6px;\r\n\r\n  transition: background .2s;\r\n  \r\n  &:hover {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 620px) {\r\n  .desktop {\r\n    display: none;\r\n  }\r\n\r\n  .username {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 621px) {\r\n  .mobile {\r\n    display: none;\r\n  }\r\n\r\n  .button-wrapper {\r\n    margin: 0 6px;\r\n  }\r\n}\r\n// TRANSITIONS\r\n.errorfade-enter-active, .errorfade-leave-active {\r\n  transition: opacity 0.5s ease;\r\n}\r\n\r\n.errorfade-enter-from, .errorfade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.pulse {\r\n  animation: pulse 2s linear infinite;\r\n}\r\n\r\n.settings-enter-active, .settings-leave-active {\r\n  transition: all .2s ease-out;\r\n}\r\n\r\n.settings-enter-from, .settings-leave-to {\r\n  transform: translateY(-10px);\r\n  opacity: 0;\r\n}\r\n</style>\r\n","<template>\r\n    <div class=\"logo\" :style=\"{ fontSize: size }\">\r\n        <span class=\"blue\">ani</span>\r\n        <span>stats</span>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        size: String\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.logo {\r\n    user-select: none;\r\n}\r\n\r\n.blue {\r\n    color: #3391c0;\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        size: String\r\n    }\r\n})\r\n","import { render } from \"./Logo.vue?vue&type=template&id=1ee4ba7e&scoped=true\"\nimport script from \"./Logo.vue?vue&type=script&lang=ts\"\nexport * from \"./Logo.vue?vue&type=script&lang=ts\"\n\nimport \"./Logo.vue?vue&type=style&index=0&id=1ee4ba7e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1ee4ba7e\"\n\nexport default script","<template>\r\n    <button class=\"btn\">\r\n        <font-awesome-icon v-if=\"icon\" :icon=\"icon\" size=\"lg\" fixed-width />\r\n        <span><slot></slot></span>\r\n    </button>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        icon: String,\r\n        color: String\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.btn {\r\n    display: inline-flex;\r\n    width: 100%;\r\n    height: 100%;\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n\r\n    appearance: none;\r\n    font: inherit;\r\n    color: inherit;\r\n    background: none;\r\n    outline: none;\r\n    border: none;\r\n\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    span {\r\n        padding-top: 5px;\r\n    }\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        icon: String,\r\n        color: String\r\n    }\r\n})\r\n","import { render } from \"./Button.vue?vue&type=template&id=edb20c84&scoped=true\"\nimport script from \"./Button.vue?vue&type=script&lang=ts\"\nexport * from \"./Button.vue?vue&type=script&lang=ts\"\n\nimport \"./Button.vue?vue&type=style&index=0&id=edb20c84&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-edb20c84\"\n\nexport default script","<template>\r\n    <div class=\"settings\">\r\n        <div class=\"section\">\r\n            <div class=\"setting\" v-for=\"(setting, i) in settings\" :key=\"i\">\r\n                <div class=\"setting-header\">\r\n                    <div class=\"setting-name\">{{ setting.name }}</div>\r\n                    <div class=\"setting-desc\">{{ setting.desc }}</div>\r\n                </div>\r\n                <div class=\"setting-switch\">\r\n                    <SettingsSwitcher :options=\"setting.options\" :default=\"setting.default\" @selection=\"handleSelect($event, i)\"></SettingsSwitcher>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <Switch name=\"save\" :model-value=\"save\" @update:model-value=\"toggleSave\">Save those settings for later</Switch>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport SettingsSwitcher from './SettingsSwitcher.vue';\r\nimport Switch from '@/components/Switch.vue';\r\n\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { SettingsSwitcher, Switch },\r\n    \r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            save: false,\r\n            settings: [\r\n                {\r\n                    name: \"Stats type\",\r\n                    desc: \"Choose which type of media you want to be displayed.\",\r\n                    options: [\"both\", \"anime\", \"manga\"]\r\n                },\r\n                {\r\n                    name: \"Beginning of a new day\",\r\n                    desc: \"You may choose to count late night as previous day.\",\r\n                    options: [\"12am\", \"1am\", \"2am\", \"3am\", \"4am\", \"6am\"]\r\n                }\r\n            ] as any[]\r\n        }\r\n    },\r\n\r\n    created(): void {\r\n        this.settings[0].default = this.state.mediaType;\r\n        this.settings[1].default = this.state.updateHour == 0 ? '12am' : this.state.updateHour+'am';\r\n\r\n        this.save = this.state.saveSettings;\r\n    },\r\n\r\n    methods: {\r\n        handleSelect(e: string, i: number): void {\r\n            let val = e.toLowerCase();\r\n            if(i == 0) {\r\n                store.setSettings({ mediaType: val })\r\n            } else if (i == 1) {\r\n                if (e == '12am') store.setSettings({ updateHour: 0 });\r\n                else store.setSettings({ updateHour: Number(e.slice(0, -2)) });\r\n            }\r\n        },\r\n\r\n        toggleSave(e: boolean): void {\r\n            this.save = e;\r\n            store.saveSettings(e);\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@media screen and (max-width: 600px) {\r\n    .setting {\r\n        flex-direction: column;\r\n    }\r\n\r\n    .setting-switch {\r\n        margin-top: 10px;\r\n    }\r\n}\r\n.setting {\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n    margin: 10px;\r\n}\r\n\r\n.setting-name {\r\n    display: blocl;\r\n    font-weight: 500;\r\n}\r\n\r\n.setting-desc {\r\n    display: block;\r\n    font-size: 0.86em;\r\n    color: var(--color-text-secondary);\r\n}\r\n\r\n\r\n</style>","<template>\r\n    <div class=\"switches\">\r\n        <div class=\"switch\" v-for=\"(option, i) in options\" :key=\"i\" :class=\"{ selected: option == chosen }\" @click=\"select(option)\">{{ capitalize(option) }}</div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        options: Array,\r\n        default: String\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            cho: [],\r\n            chosen: \"\"\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        this.chosen = this.default as string;\r\n    },\r\n\r\n    methods: {\r\n        capitalize(option: string): string {\r\n            return option[0].toUpperCase() + option.slice(1);\r\n        },\r\n\r\n        select(option: string): void {\r\n            this.chosen = option;\r\n            this.$emit('selection', option);\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.switches {\r\n    display: flex;\r\n}\r\n\r\n.switch {\r\n    display: inline-block;\r\n    background: var(--color-background-border);\r\n    padding: 8px 12px;\r\n\r\n    transition: .2s;\r\n    user-select: none;\r\n\r\n    &:first-child {\r\n        border-top-left-radius: var(--radius);\r\n        border-bottom-left-radius: var(--radius);\r\n    }\r\n\r\n    &:last-child {\r\n        border-top-right-radius: var(--radius);\r\n        border-bottom-right-radius: var(--radius);\r\n    }\r\n\r\n    &:not(.selected):hover {\r\n        background: var(--color-selected-background);\r\n    }\r\n}\r\n\r\n.selected {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n}\r\n\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        options: Array,\r\n        default: String\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            cho: [],\r\n            chosen: \"\"\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        this.chosen = this.default as string;\r\n    },\r\n\r\n    methods: {\r\n        capitalize(option: string): string {\r\n            return option[0].toUpperCase() + option.slice(1);\r\n        },\r\n\r\n        select(option: string): void {\r\n            this.chosen = option;\r\n            this.$emit('selection', option);\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./SettingsSwitcher.vue?vue&type=template&id=49c0d509&scoped=true\"\nimport script from \"./SettingsSwitcher.vue?vue&type=script&lang=ts\"\nexport * from \"./SettingsSwitcher.vue?vue&type=script&lang=ts\"\n\nimport \"./SettingsSwitcher.vue?vue&type=style&index=0&id=49c0d509&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-49c0d509\"\n\nexport default script","<template>\r\n    <div>\r\n        <div>\r\n            <input type=\"checkbox\" :checked=\"modelValue\" @input=\"$emit('update:modelValue', $event.target.checked)\" :id=\"name\" class=\"switch-input\" />\r\n            <label :for=\"name\" class=\"switch-label\"><slot></slot></label>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        modelValue: Boolean,\r\n        name: String\r\n    },\r\n    emits: ['update:modelValue'],\r\n\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.switch-input {\r\n    display: none;\r\n}\r\n\r\n.switch-label {\r\n    position: relative;\r\n    display: inline-block;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    font-weight: 500;\r\n    padding: 16px 0 16px 44px;\r\n}\r\n\r\n.switch-label:before, .switch-label:after {\r\n    content: \"\";\r\n    position: absolute;\r\n    margin: 0;\r\n    outline: 0;\r\n    top: 50%;\r\n    transform: translate(0, -50%);\r\n    transition: all 0.2s ease;\r\n}\r\n\r\n.switch-label:before {\r\n    left: 1px;\r\n    width: 34px;\r\n    height: 14px;\r\n    background-color: #363e50;\r\n    border-radius: 8px;\r\n}\r\n\r\n.switch-label:after {\r\n    left: 0;\r\n    width: 20px;\r\n    height: 20px;\r\n    background-color: var(--color-background-darker);\r\n    border-radius: 50%;\r\n    box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.14), 0 2px 2px 0 rgba(0, 0, 0, 0.098), 0 1px 5px 0 rgba(0, 0, 0, 0.084);\r\n}\r\n\r\n.switch-input:checked + .switch-label:after {\r\n    background-color: var(--color-selected-text);\r\n    transform: translate(80%, -50%);\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        modelValue: Boolean,\r\n        name: String\r\n    },\r\n    emits: ['update:modelValue'],\r\n\r\n})\r\n","import { render } from \"./Switch.vue?vue&type=template&id=358459af&scoped=true\"\nimport script from \"./Switch.vue?vue&type=script&lang=ts\"\nexport * from \"./Switch.vue?vue&type=script&lang=ts\"\n\nimport \"./Switch.vue?vue&type=style&index=0&id=358459af&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-358459af\"\n\nexport default script","\r\nimport SettingsSwitcher from './SettingsSwitcher.vue';\r\nimport Switch from '@/components/Switch.vue';\r\n\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { SettingsSwitcher, Switch },\r\n    \r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            save: false,\r\n            settings: [\r\n                {\r\n                    name: \"Stats type\",\r\n                    desc: \"Choose which type of media you want to be displayed.\",\r\n                    options: [\"both\", \"anime\", \"manga\"]\r\n                },\r\n                {\r\n                    name: \"Beginning of a new day\",\r\n                    desc: \"You may choose to count late night as previous day.\",\r\n                    options: [\"12am\", \"1am\", \"2am\", \"3am\", \"4am\", \"6am\"]\r\n                }\r\n            ] as any[]\r\n        }\r\n    },\r\n\r\n    created(): void {\r\n        this.settings[0].default = this.state.mediaType;\r\n        this.settings[1].default = this.state.updateHour == 0 ? '12am' : this.state.updateHour+'am';\r\n\r\n        this.save = this.state.saveSettings;\r\n    },\r\n\r\n    methods: {\r\n        handleSelect(e: string, i: number): void {\r\n            let val = e.toLowerCase();\r\n            if(i == 0) {\r\n                store.setSettings({ mediaType: val })\r\n            } else if (i == 1) {\r\n                if (e == '12am') store.setSettings({ updateHour: 0 });\r\n                else store.setSettings({ updateHour: Number(e.slice(0, -2)) });\r\n            }\r\n        },\r\n\r\n        toggleSave(e: boolean): void {\r\n            this.save = e;\r\n            store.saveSettings(e);\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Settings.vue?vue&type=template&id=a25cacc0&scoped=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=ts\"\nexport * from \"./Settings.vue?vue&type=script&lang=ts\"\n\nimport \"./Settings.vue?vue&type=style&index=0&id=a25cacc0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-a25cacc0\"\n\nexport default script","<template>\r\n    <div class=\"footer-wrapper\">\r\n        <div class=\"timestamp\">Built on {{ buildTimestamp }}</div>\r\n        <div class=\"footer\">\r\n            <span class=\"footer-link\" @click=\"lightMode\">Toggle theme</span>\r\n            <span class=\"footer-link\" @click=\"toggleSpecial('about')\">About</span>\r\n            <span class=\"footer-link\" @click=\"toggleSpecial('help')\">Help</span>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { toggleTheme } from '@/store/helpers';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    computed: {\r\n        buildTimestamp(): string {\r\n            return document.documentElement.dataset.buildTimestamp as string;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        lightMode(): void {\r\n            toggleTheme();\r\n        },\r\n\r\n        toggleSpecial(e: string): void {\r\n            this.$emit('special', e)\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.footer-wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n}\r\n\r\n.timestamp {\r\n    color: var(--color-text-gray);\r\n    font-size: 0.86em;\r\n}\r\n.footer-link {\r\n    display: inline-block;\r\n    background: var(--color-background-darker);\r\n    color: var(--color-text-secondary);\r\n    font-size: 0.85em;\r\n    cursor: pointer;\r\n    padding: 12px;\r\n    margin: 12px 3px;\r\n    border-radius: var(--radius);\r\n    \r\n    &:hover {\r\n        text-decoration: underline var(--color-text-secondary);\r\n    }\r\n}\r\n</style>","\r\nimport { toggleTheme } from '@/store/helpers';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    computed: {\r\n        buildTimestamp(): string {\r\n            return document.documentElement.dataset.buildTimestamp as string;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        lightMode(): void {\r\n            toggleTheme();\r\n        },\r\n\r\n        toggleSpecial(e: string): void {\r\n            this.$emit('special', e)\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Panel.vue?vue&type=template&id=3bc7c728&scoped=true\"\nimport script from \"./Panel.vue?vue&type=script&lang=ts\"\nexport * from \"./Panel.vue?vue&type=script&lang=ts\"\n\nimport \"./Panel.vue?vue&type=style&index=0&id=3bc7c728&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3bc7c728\"\n\nexport default script","<template>\r\n    <div class=\"special\" @click=\"popupHide\">\r\n        <div class=\"dialog\" @click=\"popupClick\">\r\n            <div class=\"header\">\r\n                <div class=\"header-title\">{{ view[0].toUpperCase()+view.slice(1) }}</div>\r\n                <span style=\"flex: 1\"></span>\r\n                <div class=\"header-control\" @click=\"popupHide\">\r\n                    <font-awesome-icon icon=\"times\"></font-awesome-icon>\r\n                </div>\r\n            </div>\r\n            <div class=\"content\">\r\n                <component :is=\"view\"></component>\r\n            </div>\r\n        </div>  \r\n    </div>\r\n\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport About from '@/components/Special/About.vue';\r\nimport Help from '@/components/Special/Help.vue';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        view: String\r\n    },\r\n    components: { About, Help },\r\n\r\n    methods: {\r\n        popupHide() {\r\n            this.$emit('hide');\r\n        },\r\n\r\n        popupClick(e: MouseEvent) {\r\n            e.stopPropagation();\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.special {\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n\r\n    position: fixed;\r\n    z-index: 10;\r\n\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background: rgba(0,0,0,.5);\r\n}\r\n\r\n.dialog {\r\n    max-width: 1080px;\r\n\r\n    background: var(--color-background);\r\n    border-radius: var(--radius);\r\n    overflow: hidden;\r\n}\r\n\r\n// HEADER \r\n.header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 10px 16px;\r\n\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.header-title {\r\n    font-weight: 500;\r\n    font-size: 1em;\r\n}\r\n\r\n.header-control {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    \r\n    width: 36px;\r\n    height: 36px;\r\n\r\n    text-align: center;\r\n    border-radius: 3px;\r\n\r\n    user-select: none;\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background: var(--color-background-secondary);\r\n    }\r\n\r\n    &:active {\r\n        opacity: 0.7;\r\n    }\r\n}\r\n\r\na {\r\n    color: inherit;\r\n}\r\n\r\n.content {\r\n    max-height: 80vh;\r\n    overflow-y: auto;\r\n    padding: 0 16px 16px 16px;\r\n}\r\n</style>","<template>\r\n    <div>\r\n        <p>anistats is an extension for AniList that lets you check how much time you spend/waste on watching anime and reading manga based on your activity.</p>\r\n        <p>Source code of this site is available <a target=\"_blank\" href=\"https://github.com/pizza61/anistats2\">here</a>.</p>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n</script>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n","import { render } from \"./About.vue?vue&type=template&id=ae73c9c2\"\nimport script from \"./About.vue?vue&type=script&lang=ts\"\nexport * from \"./About.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n    <div>\r\n        <h3>How does it work?</h3>\r\n        AniList has a small feature called \"Activity\". Each time you watch an episode, add something to your planning list, an activity is created. anistats takes adventage of that to count how many episodes you've seen on a specific day.\r\n        <h3>Why it doesn't work?</h3>\r\n        <h4>Activity Merge Time</h4>\r\n        <img src=\"@/assets/merge.png\">\r\n        <br>\r\n        <b>It has to be set to 12 hours or less for anistats to work properly</b> (in most use cases). If you set it to 'Always', it produces <b>one activity per anime</b>, no matter how long it took you to watch it. For anistats, it's best if there is <b>at least one activity per anime per day.</b>\r\n        <br>\r\n        Note: changing it won't affect previous activities.\r\n        <br><br>\r\n        Also, you have to add episodes using this little '+' symbol next to the episode count instead of setting it directly from the 'Edit' menu.\r\n        <br>\r\n        Let's say you've started a new series yesterday and watched 3 episodes so far. \r\n        Today, after watching 3 next episodes, you set the episode count directly to '6'. AniList creates an activity saying that you've watched episode 6. anistats counts that as <b>one</b> episode.\r\n        <br>\r\n        If you click the '+' symbol three times instead, the activity says that you've watched episodes 4-6. anistats sees that correctly as 3 episodes.\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\nimg {\r\n    max-width: 100%;\r\n}\r\n \r\nh3, h4, b {\r\n    font-weight: 500;\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n","import { render } from \"./Help.vue?vue&type=template&id=6692f36c&scoped=true\"\nimport script from \"./Help.vue?vue&type=script&lang=ts\"\nexport * from \"./Help.vue?vue&type=script&lang=ts\"\n\nimport \"./Help.vue?vue&type=style&index=0&id=6692f36c&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6692f36c\"\n\nexport default script","\r\nimport About from '@/components/Special/About.vue';\r\nimport Help from '@/components/Special/Help.vue';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        view: String\r\n    },\r\n    components: { About, Help },\r\n\r\n    methods: {\r\n        popupHide() {\r\n            this.$emit('hide');\r\n        },\r\n\r\n        popupClick(e: MouseEvent) {\r\n            e.stopPropagation();\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Special.vue?vue&type=template&id=2da0d219&scoped=true\"\nimport script from \"./Special.vue?vue&type=script&lang=ts\"\nexport * from \"./Special.vue?vue&type=script&lang=ts\"\n\nimport \"./Special.vue?vue&type=style&index=0&id=2da0d219&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2da0d219\"\n\nexport default script","\r\nimport { defineComponent } from 'vue';\r\n\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport Button from '@/components/Button.vue';\r\nimport Settings from '@/components/Home/Settings.vue';\r\nimport Panel from '@/components/Home/Panel.vue';\r\nimport Special from '@/views/Special.vue';\r\n\r\nimport store from '@/store/store';\r\nimport { fetchUserData } from '@/store/api';\r\n\r\nexport default defineComponent({\r\n  components: { Logo, Button, Settings, Panel, Special },\r\n\r\n  data() {\r\n    return {\r\n      show: true,\r\n      loading: false,\r\n      settings: false,\r\n\r\n      showSpecial: false,\r\n      specialView: '',\r\n\r\n      username: \"\",\r\n      error: \"\",\r\n      state: store.state\r\n    }\r\n  },\r\n\r\n  mounted(): void {\r\n    if(this.$route.query.error == \"1\") {\r\n      this.showError(\"Something went wrong. Please try again\");\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // Resolve username/link and redirect to next component for processing.\r\n    send(): void {\r\n      if(this.username.length < 2) {\r\n        return this.showError(\"Hey, I said enter your username.\")\r\n      }\r\n\r\n      if(this.username.startsWith(\"https://anilist.co\")) { // The user entered a profile link.\r\n        try {\r\n          let url = new URL(this.username);\r\n          if(url.pathname.startsWith(\"/user/\")) {\r\n            // If the link was correct, it should return the username. If it wasn't, the next component should return an error.\r\n            let username = url.pathname.split(\"/\")[2];\r\n            this.process(username);\r\n          } else {\r\n            throw 'Invalid URL';\r\n          }\r\n        }\r\n        catch (e)\r\n        {\r\n          this.showError(e);\r\n        }\r\n      } else { // The user entered something different (preferably the username)\r\n        // Saving user settings to localStorage (if user chose to)\r\n        if(this.state.saveSettings) {\r\n          localStorage.setItem(\"updateHour\", String(this.state.updateHour));\r\n          localStorage.setItem(\"mediaType\", this.state.mediaType);\r\n        } else { // clear settings in case they were saved but user opted out of it\r\n          localStorage.removeItem(\"updateHour\");\r\n          localStorage.removeItem(\"mediaType\");\r\n        }\r\n\r\n        this.loading = true;\r\n        this.process(this.username);\r\n      }\r\n    },\r\n\r\n    process(username: string): void {\r\n      // Checking if the user data is already loaded. If it is, it means that the user is revisitng the page so there's no need to fetch anything again\r\n      if(this.state.userData.username == username && this.state.activities.length > 0) {\r\n        this.$router.push('/'+username);\r\n      } else {\r\n        fetchUserData(username)\r\n        .then(resp => {\r\n          store.destroy();\r\n          store.setUserdata(resp);\r\n          this.$router.push('/'+username);\r\n        })\r\n        .catch(() => {\r\n          this.showError(\"Invalid username (or profile is private)\");\r\n        })\r\n      }\r\n    },\r\n\r\n    showError(e: string): void {\r\n      this.loading = false;\r\n      this.error = e;\r\n      setTimeout(() => {\r\n        this.error = \"\";\r\n      }, 5000);\r\n    },\r\n\r\n    toggleSettings(): void {\r\n      this.settings = !this.settings;\r\n    },\r\n\r\n    toggleSpecial(name: string): void {\r\n      this.specialView = name;\r\n      this.showSpecial = true;\r\n    }\r\n  }\r\n\r\n})\r\n","import { render } from \"./Home.vue?vue&type=template&id=6685224c&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=ts\"\nexport * from \"./Home.vue?vue&type=script&lang=ts\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=6685224c&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6685224c\"\n\nexport default script","<template>\r\n    <Loading v-if=\"loading\"></Loading>\r\n    <div class=\"view\" v-else>\r\n        <div class=\"sidebar-wrapper\" :class=\"{ 'sidebar-hide-mobile': !showSidebar }\">\r\n            <Sidebar @special=\"toggleSpecial($event)\" @toggle=\"toggleSidebar\"></Sidebar>\r\n\r\n        </div>\r\n        <div class=\"content\">\r\n            <div class=\"mobile-header\">\r\n                <div class=\"mobile-icon\" @click=\"toggleSidebar\">\r\n                    <font-awesome-icon icon=\"bars\" size=\"lg\" />  \r\n                </div>\r\n                <router-link class=\"a\" to=\"/\"><Logo size=\"1.8em\"></Logo></router-link>\r\n            </div>\r\n            <router-view @loadRequest=\"loadEarlierActivities\"></router-view>\r\n        </div>\r\n\r\n        <transition name=\"popup-backdrop\">\r\n            <Special v-if=\"showSpecial\" :view=\"specialView\" @hide=\"showSpecial = false\"></Special>\r\n        </transition>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { compareDates, fetchActivity, fetchUserData } from '@/store/api';\r\nimport store from '@/store/store';\r\n\r\nimport Loading from '@/components/User/Loading.vue';\r\nimport Sidebar from '@/components/User/Sidebar.vue';\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport Special from '@/views/Special.vue';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport { defineComponent } from '@vue/runtime-core';\r\n\r\nexport default defineComponent({\r\n    components: { Loading, Sidebar, Logo, Special },\r\n\r\n    data() {\r\n        return {\r\n            loading: true,\r\n            lock: false,\r\n            lastPage: 0,\r\n            state: store.state,\r\n\r\n            showSidebar: false,\r\n            showSpecial: false,\r\n            specialView: '',\r\n            \r\n            preloadedActivities: [] as ActivityDay[],\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        // Checking if this page is visited directly (no userData in state)\r\n        // or from the main page (userData set.)\r\n        // If there is no userData, the component has to fetch and set it on its own.\r\n        if(!this.state.userData.id) {\r\n            fetchUserData(this.$route.params.user as string)\r\n            .then(resp => {\r\n                store.setUserdata(resp);\r\n                this.loadActivites();\r\n            })\r\n            .catch(() => {\r\n                this.$router.push({ path: '/', query: { error: 1 }});\r\n            })\r\n        } else if (this.state.activities.length == 0) {\r\n            this.loadActivites();\r\n        } else {\r\n            this.loading = false;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        // Load and parse user's activities (only used for the first time)\r\n        loadActivites(): void {\r\n            fetchActivity(this.state.userData.id, this.state.currentPage, this.state.mediaType)\r\n            .then(resp => {\r\n                this.lastPage = resp.data.Page.pageInfo.lastPage;\r\n                const activities = store.parseActivities(resp.data.Page.activities);\r\n\r\n                if(activities.length == 0) {\r\n                    return this.$router.push({ path: '/', query: { error: 1 }});\r\n                }\r\n                // Preload next page of user's activites.\r\n                // It's because next page may contain activity from the last day on the first page, and it's better to display it together. Also for better user experience.\r\n                this.preloadActivites(activities)\r\n                .then(preloaded => {\r\n                    store.setPreloadedActivities(preloaded);\r\n\r\n                    store.appendActivities(activities);\r\n                    this.loading = false;\r\n                })\r\n                \r\n            })\r\n        },\r\n\r\n        loadEarlierActivities(): void {\r\n            // Lock so the user can't smash the button and break it.\r\n            if(this.lock) return;\r\n            this.lock = true;\r\n            store.incrementCurrentPage();\r\n\r\n            const activities = store.appendActivities(this.state.preloadedActivities);\r\n            this.preloadActivites(activities)\r\n            .then(preloaded => {\r\n                store.setPreloadedActivities(preloaded);\r\n\r\n                this.lock = false;\r\n            })\r\n        },\r\n\r\n        // Load the next page of user's activities and save for later use.\r\n        async preloadActivites(activities: ActivityDay[]): Promise<ActivityDay[]> {\r\n            if(this.state.currentPage == this.lastPage) return []; // Reached the end, nothing to preload.\r\n\r\n            const nextPage = await fetchActivity(this.state.userData.id, this.state.currentPage + 1, this.state.mediaType);\r\n            const preloadedActivities = store.parseActivities(nextPage.data.Page.activities);\r\n\r\n            // Looking for duplicates\r\n            // We want to give user a complete summary of a particular day, but sometimes it's continued on the second page.\r\n            // That's why, to complete a particular day, we have to look if it's mentioned on the preloaded page and move (remove from preloaded, add to current) it to currently displayed activities (activities)\r\n            const duplicates = preloadedActivities.filter(x => compareDates(x.day, activities[activities.length - 1].day));\r\n            duplicates.forEach(dup => {\r\n                // Remove from preloaded\r\n                const indexToRemove = preloadedActivities.indexOf(dup);\r\n                preloadedActivities.splice(indexToRemove, 1);\r\n\r\n                // Add to current\r\n                // Find the last element (last day present on current page) and \"merge\" it with dup\r\n                const old = activities[activities.length - 1];\r\n                old.media = old.media.concat(dup.media);\r\n                old.episodes += dup.episodes;\r\n                old.chapters += dup.chapters;\r\n            });\r\n\r\n            return preloadedActivities;\r\n        },\r\n\r\n        toggleSidebar(): void {\r\n            this.showSidebar = !this.showSidebar\r\n        },\r\n\r\n        toggleSpecial(name: string): void {\r\n            this.specialView = name;\r\n            this.showSpecial = true;\r\n        }\r\n    }\r\n})\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.a {\r\n    color: inherit;\r\n}\r\n\r\n.mobile-header {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 8px;\r\n}\r\n\r\n.mobile-icon {\r\n    padding: 10px;\r\n    margin-right: 8px;\r\n\r\n    border-radius: var(--radius);\r\n    transition: .2s;\r\n\r\n    &:hover {\r\n        background: var(--color-background-darker)\r\n    }\r\n}\r\n\r\n\r\n@media screen and (max-width: 1020px) {\r\n    .sidebar-wrapper {\r\n        position: fixed;\r\n        left: 0;\r\n        right: 0;\r\n        top: 0;\r\n        z-index: 4;\r\n\r\n        display: flex;\r\n\r\n        visibility: visible;\r\n        opacity: 1;\r\n        transition: opacity .2s ease-out, visibility .2s;\r\n    }\r\n\r\n    .sidebar-backdrop {\r\n        position: fixed;\r\n        left: 0;\r\n        right: 0;\r\n        top: 0;\r\n        bottom: 0;\r\n        background: rgba(0,0,0,.7);\r\n        flex-grow: 2;\r\n    }\r\n\r\n    .sidebar-hide-mobile {\r\n        visibility: hidden;\r\n        opacity: 0;\r\n    }\r\n}\r\n@media screen and (min-width: 1021px) {\r\n    .mobile-header {\r\n        display: none;\r\n    }\r\n\r\n    .view {\r\n        display: grid;\r\n        grid-template-columns: 20% 80%;\r\n\r\n        max-width: 1280px;\r\n        margin: auto;\r\n    }\r\n\r\n    .sidebar-backdrop {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@keyframes appear {\r\n    from {\r\n        opacity: 0;\r\n    }\r\n\r\n    to {\r\n        opacity: 1;\r\n    }\r\n}\r\n</style>","<template>\r\n    <div class=\"container\">\r\n        <Logo size=\"3em\"></Logo>\r\n        <div class=\"loading\">Loading...</div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { Logo }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.loading {\r\n    font-size: 3em;\r\n    font-weight: 500;\r\n    padding: 10px;\r\n    border-bottom: 3px solid;\r\n\r\n    animation: pulse 2s linear infinite;\r\n}\r\n</style>","\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { Logo }\r\n})\r\n","import { render } from \"./Loading.vue?vue&type=template&id=64c13412&scoped=true\"\nimport script from \"./Loading.vue?vue&type=script&lang=ts\"\nexport * from \"./Loading.vue?vue&type=script&lang=ts\"\n\nimport \"./Loading.vue?vue&type=style&index=0&id=64c13412&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-64c13412\"\n\nexport default script","<template>\r\n    <div class=\"sidebar\">\r\n        <div class=\"header\">\r\n            <div class=\"header-icon\" @click=\"emitToggle\">\r\n                <font-awesome-icon icon=\"bars\" size=\"lg\" />\r\n            </div>\r\n        </div>\r\n        <router-link class=\"a\" to=\"/\"><Logo size=\"2em\"></Logo></router-link>\r\n        <MenuItem @click=\"emitToggle\" icon=\"user-circle\" to=\"\">Overview</MenuItem>\r\n        <div class=\"category\" v-if=\"state.mediaType != 'manga'\">\r\n            <span class=\"category-header\">Anime</span>\r\n            <MenuItem @click=\"emitToggle\" icon=\"list\" to=\"/list/anime\">List</MenuItem>\r\n            <MenuItem @click=\"emitToggle\" icon=\"history\" to=\"/history/anime\">History</MenuItem>\r\n        </div>\r\n        <div class=\"category\" v-if=\"state.mediaType != 'anime'\">\r\n            <span class=\"category-header\">Manga</span>\r\n            <MenuItem @click=\"emitToggle\" icon=\"book-open\" to=\"/list/manga\">List</MenuItem>\r\n            <MenuItem @click=\"emitToggle\" icon=\"history\" to=\"/history/manga\">History</MenuItem>\r\n        </div>\r\n        <div class=\"category category-small\">\r\n            <span @click=\"toggleTheme\" class=\"item-small\">Toggle theme</span>\r\n            <span @click=\"toggleSpecial('help')\" class=\"item-small\">Help</span>\r\n            <span @click=\"toggleSpecial('about')\" class=\"item-small\">About</span>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\n\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport MenuItem from '@/components/User/Sidebar/MenuItem.vue';\r\nimport { toggleTheme } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    components: { Logo, MenuItem },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        emitToggle(): void {\r\n            this.$emit('toggle');\r\n        },\r\n\r\n        toggleTheme(): void {\r\n            toggleTheme();\r\n        },\r\n\r\n        toggleSpecial(e: string): void {\r\n            this.$emit('special', e)\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sidebar {\r\n    position: sticky;\r\n    top: 0;\r\n    background: var(--color-background);\r\n}\r\n\r\n.header {\r\n    padding: 8px;\r\n}\r\n\r\n.header-icon {\r\n    padding: 10px;\r\n    margin-right: 8px;\r\n\r\n    border-radius: var(--radius);\r\n    transition: .2s;\r\n\r\n    &:hover {\r\n        background: var(--color-background-darker)\r\n    }\r\n}\r\n\r\n.a {\r\n    color: inherit;\r\n    display: block;\r\n    padding: 15px;\r\n}\r\n\r\n.category-header {\r\n    display: block;\r\n    padding: 5px;\r\n    margin: 0 5px;\r\n    font-weight: 500;\r\n}\r\n\r\n.category-small {\r\n    margin: 5px;\r\n    padding: 10px;\r\n}\r\n\r\n.item-small {\r\n    display: block;\r\n    \r\n    font-size: .86em;\r\n    margin-bottom: 5px;\r\n    color: var(--color-text-secondary);\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        text-decoration: underline;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 1020px) {\r\n    .sidebar {\r\n        width: 100%;\r\n        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2)\r\n    }\r\n\r\n    .menuitem {\r\n        padding: 12px 10px;\r\n        margin: 3px;\r\n    }\r\n\r\n    .a {\r\n        display: none;\r\n    }\r\n\r\n    .category-small {\r\n        display: flex;\r\n        justify-content: space-around;\r\n    }\r\n}\r\n\r\n@media screen and (min-width: 1021px) {\r\n    .header {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@keyframes appear {\r\n    from {\r\n        transform: translateX(-300px);\r\n\r\n    }\r\n\r\n    to {\r\n        transform: translateX(0px);\r\n    }\r\n}\r\n</style>","<template>  \r\n    <router-link :to=\"'/'+$route.params.user+to\" class=\"menuitem\">\r\n            <font-awesome-icon :icon=\"icon\" size=\"lg\" fixed-width />\r\n            <span class=\"label\">\r\n                <slot></slot>\r\n            </span>\r\n    </router-link>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        to: String,\r\n        icon: String\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.menuitem {\r\n    background: inherit; // no idea why it's needed\r\n    padding: 10px;\r\n    margin: 5px;\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    border-radius: 5px;\r\n    transition: background .1s;\r\n\r\n    &:not(.router-link-exact-active):hover {\r\n        background: var(--color-selected-background);\r\n        color: white;\r\n    }\r\n}\r\n\r\n.router-link-exact-active {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n}\r\n\r\n.label {\r\n    padding-left: 15px;\r\n    font-weight: 500;\r\n}\r\n\r\na {\r\n    color: inherit;\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        to: String,\r\n        icon: String\r\n    }\r\n})\r\n","import { render } from \"./MenuItem.vue?vue&type=template&id=1903ee1d&scoped=true\"\nimport script from \"./MenuItem.vue?vue&type=script&lang=ts\"\nexport * from \"./MenuItem.vue?vue&type=script&lang=ts\"\n\nimport \"./MenuItem.vue?vue&type=style&index=0&id=1903ee1d&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1903ee1d\"\n\nexport default script","\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\n\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport MenuItem from '@/components/User/Sidebar/MenuItem.vue';\r\nimport { toggleTheme } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    components: { Logo, MenuItem },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        emitToggle(): void {\r\n            this.$emit('toggle');\r\n        },\r\n\r\n        toggleTheme(): void {\r\n            toggleTheme();\r\n        },\r\n\r\n        toggleSpecial(e: string): void {\r\n            this.$emit('special', e)\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Sidebar.vue?vue&type=template&id=0a18f476&scoped=true\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=ts\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=ts\"\n\nimport \"./Sidebar.vue?vue&type=style&index=0&id=0a18f476&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0a18f476\"\n\nexport default script","\r\nimport { compareDates, fetchActivity, fetchUserData } from '@/store/api';\r\nimport store from '@/store/store';\r\n\r\nimport Loading from '@/components/User/Loading.vue';\r\nimport Sidebar from '@/components/User/Sidebar.vue';\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport Special from '@/views/Special.vue';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport { defineComponent } from '@vue/runtime-core';\r\n\r\nexport default defineComponent({\r\n    components: { Loading, Sidebar, Logo, Special },\r\n\r\n    data() {\r\n        return {\r\n            loading: true,\r\n            lock: false,\r\n            lastPage: 0,\r\n            state: store.state,\r\n\r\n            showSidebar: false,\r\n            showSpecial: false,\r\n            specialView: '',\r\n            \r\n            preloadedActivities: [] as ActivityDay[],\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        // Checking if this page is visited directly (no userData in state)\r\n        // or from the main page (userData set.)\r\n        // If there is no userData, the component has to fetch and set it on its own.\r\n        if(!this.state.userData.id) {\r\n            fetchUserData(this.$route.params.user as string)\r\n            .then(resp => {\r\n                store.setUserdata(resp);\r\n                this.loadActivites();\r\n            })\r\n            .catch(() => {\r\n                this.$router.push({ path: '/', query: { error: 1 }});\r\n            })\r\n        } else if (this.state.activities.length == 0) {\r\n            this.loadActivites();\r\n        } else {\r\n            this.loading = false;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        // Load and parse user's activities (only used for the first time)\r\n        loadActivites(): void {\r\n            fetchActivity(this.state.userData.id, this.state.currentPage, this.state.mediaType)\r\n            .then(resp => {\r\n                this.lastPage = resp.data.Page.pageInfo.lastPage;\r\n                const activities = store.parseActivities(resp.data.Page.activities);\r\n\r\n                if(activities.length == 0) {\r\n                    return this.$router.push({ path: '/', query: { error: 1 }});\r\n                }\r\n                // Preload next page of user's activites.\r\n                // It's because next page may contain activity from the last day on the first page, and it's better to display it together. Also for better user experience.\r\n                this.preloadActivites(activities)\r\n                .then(preloaded => {\r\n                    store.setPreloadedActivities(preloaded);\r\n\r\n                    store.appendActivities(activities);\r\n                    this.loading = false;\r\n                })\r\n                \r\n            })\r\n        },\r\n\r\n        loadEarlierActivities(): void {\r\n            // Lock so the user can't smash the button and break it.\r\n            if(this.lock) return;\r\n            this.lock = true;\r\n            store.incrementCurrentPage();\r\n\r\n            const activities = store.appendActivities(this.state.preloadedActivities);\r\n            this.preloadActivites(activities)\r\n            .then(preloaded => {\r\n                store.setPreloadedActivities(preloaded);\r\n\r\n                this.lock = false;\r\n            })\r\n        },\r\n\r\n        // Load the next page of user's activities and save for later use.\r\n        async preloadActivites(activities: ActivityDay[]): Promise<ActivityDay[]> {\r\n            if(this.state.currentPage == this.lastPage) return []; // Reached the end, nothing to preload.\r\n\r\n            const nextPage = await fetchActivity(this.state.userData.id, this.state.currentPage + 1, this.state.mediaType);\r\n            const preloadedActivities = store.parseActivities(nextPage.data.Page.activities);\r\n\r\n            // Looking for duplicates\r\n            // We want to give user a complete summary of a particular day, but sometimes it's continued on the second page.\r\n            // That's why, to complete a particular day, we have to look if it's mentioned on the preloaded page and move (remove from preloaded, add to current) it to currently displayed activities (activities)\r\n            const duplicates = preloadedActivities.filter(x => compareDates(x.day, activities[activities.length - 1].day));\r\n            duplicates.forEach(dup => {\r\n                // Remove from preloaded\r\n                const indexToRemove = preloadedActivities.indexOf(dup);\r\n                preloadedActivities.splice(indexToRemove, 1);\r\n\r\n                // Add to current\r\n                // Find the last element (last day present on current page) and \"merge\" it with dup\r\n                const old = activities[activities.length - 1];\r\n                old.media = old.media.concat(dup.media);\r\n                old.episodes += dup.episodes;\r\n                old.chapters += dup.chapters;\r\n            });\r\n\r\n            return preloadedActivities;\r\n        },\r\n\r\n        toggleSidebar(): void {\r\n            this.showSidebar = !this.showSidebar\r\n        },\r\n\r\n        toggleSpecial(name: string): void {\r\n            this.specialView = name;\r\n            this.showSpecial = true;\r\n        }\r\n    }\r\n})\r\n\r\n","import { render } from \"./User.vue?vue&type=template&id=393292b8&scoped=true\"\nimport script from \"./User.vue?vue&type=script&lang=ts\"\nexport * from \"./User.vue?vue&type=script&lang=ts\"\n\nimport \"./User.vue?vue&type=style&index=0&id=393292b8&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-393292b8\"\n\nexport default script","<template>\r\n    <div class=\"main\">\r\n        <transition name=\"popup-backdrop\">\r\n            <div class=\"popup\" v-if=\"showTooltip\" @click=\"popupHide\"></div>\r\n        </transition>\r\n        \r\n        <div class=\"left\">\r\n            <DataRange @loadRequest=\"load\"></DataRange>\r\n            <Calendar @popup=\"showPopup\" @error=\"showError\" @dynamicPopup=\"fetchPopup\"></Calendar>\r\n            <div class=\"tooltipct\">\r\n                <transition name=\"easein\" mode=\"in-out\">\r\n                    <div v-if=\"showTooltip\" class=\"tooltip\">\r\n                        <Tooltip :day=\"tooltipActivities\" @close=\"popupHide\" :loading=\"popupLoading\"></Tooltip>\r\n                    </div>\r\n                </transition>\r\n            </div>\r\n            <Chart :height=\"150\" id=\"episodes\" row=\"episodes\" v-if=\"state.mediaType != 'manga'\">Episodes watched</Chart>\r\n            <Chart :height=\"150\" id=\"chapters\" row=\"chapters\" v-if=\"state.mediaType != 'anime'\">Chapters read</Chart>\r\n        </div>\r\n        <DetailsContainer @loadRequest=\"load\"></DetailsContainer>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport store from '@/store/store';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nimport DetailsContainer from '@/components/User/Details/DetailsContainer.vue';\r\nimport Calendar from './Calendar.vue';\r\nimport DataRange from './DataRange.vue'\r\nimport Tooltip from './Tooltip.vue';\r\nimport Chart from './Chart.vue';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport { fetchActivity } from '@/store/api';\r\n\r\nexport default defineComponent({\r\n    components: { DetailsContainer, Calendar, Tooltip, DataRange, Chart },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n\r\n            showTooltip: false,\r\n            tooltipActivities: {} as ActivityDay,\r\n            \r\n            popupLoading: false\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        load(): void {\r\n            this.$emit('loadRequest');\r\n        },\r\n\r\n        // Show popup using already loaded data\r\n        showPopup(e: { activities: ActivityDay, event: MouseEvent }): void {\r\n            this.showTooltip = false;\r\n            this.tooltipActivities = e.activities;\r\n        \r\n            this.showTooltip = true;\r\n        },\r\n\r\n        // Show popup having loaded data\r\n        fetchPopup(e: { event: MouseEvent, d: number, m: number, y: number}): void {\r\n            this.popupLoading = true;\r\n            this.showTooltip = true;\r\n            let date = new Date(e.y, e.m-1, e.d);\r\n\r\n            // Get timestamp of the beginning and the end of this day.\r\n            // Converting to AniList time and adding hours according to user's preferences.\r\n            const begin = (date.getTime()/1000)+this.state.updateHour*3600;\r\n            const end = begin+86400; // add 24 hours to the beginning timestamp\r\n            \r\n            fetchActivity(this.state.userData.id, 1, this.state.mediaType, begin, end)\r\n            .then(resp => {\r\n                const activities = store.parseActivities(resp.data.Page.activities);\r\n                this.tooltipActivities = activities[0];\r\n\r\n                if(activities.length == 0) this.showTooltip = false;\r\n                else this.popupLoading = false;\r\n            })\r\n        },\r\n\r\n        showError(e: any): void {\r\n            console.log(e);\r\n        },\r\n\r\n        popupHide(): void {\r\n            this.showTooltip = false;\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.left {\r\n    margin: 12.944px 10px;\r\n}\r\n\r\n@media screen and (min-width: 901px) {\r\n    .left {\r\n        margin-right: 15px;\r\n    }\r\n}\r\n\r\n.tooltip {\r\n    z-index: 2;\r\n    flex-grow: 1;\r\n    max-width: 100%;\r\n}\r\n\r\n.tooltipct {\r\n    z-index: 2;\r\n}\r\n\r\nbutton {\r\n    align-self: flex-start;\r\n}\r\n\r\n.popup {\r\n    position: fixed;\r\n    bottom: 0;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n}\r\n\r\n\r\n// POPUP\r\n\r\n.popup {\r\n    z-index: 2;\r\n    background: rgba(0,0,0,.7);\r\n}\r\n\r\n.popup-enter-from, .popup-leave-to {\r\n    opacity: 0;\r\n}\r\n\r\n.popup-enter-active, .popup-leave-active {\r\n    transition: .1s ease-in-out;\r\n}\r\n\r\n// transitions\r\n\r\n.easein-enter-from, .easein-leave-to {\r\n    opacity: 0;\r\n    transform: scale(0.9);\r\n}\r\n\r\n.easein-enter-active, .easein-leave-active {\r\n    transition: .2s ease;\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n    .tooltipct {\r\n        position: fixed;\r\n        bottom: 10px;\r\n        left: 10px;\r\n        right: 10px;\r\n    }\r\n}\r\n\r\n@media screen and (min-width: 901px) {\r\n    .main {\r\n        display: grid;\r\n        grid-template-columns: 55% 45%;\r\n    }\r\n\r\n    .tooltipct {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n}\r\n</style>","<template>\r\n    <div class=\"details\">\r\n        <div class=\"title\">\r\n            Timeline\r\n        </div>\r\n        <div class=\"group\" v-for=\"(day, i) in state.activities\" :key=\"i\">\r\n            <div class=\"group-header\">\r\n                <div class=\"date-group\">\r\n                    <span class=\"weekday\">{{ day.day.weekday }}</span>\r\n                    <span class=\"date\">{{ prettyDate(day.day) }}</span>\r\n                </div>\r\n                \r\n                <span style=\"flex: 1\"></span>\r\n                <div class=\"prop\" v-if=\"state.mediaType != 'anime'\">\r\n                    <div class=\"prop-value\">{{ day.chapters }}</div>\r\n                    <div class=\"prop-desc\">chapters</div>\r\n                </div>\r\n                <div class=\"prop\" v-if=\"state.mediaType != 'manga'\">\r\n                    <div class=\"prop-value\">{{ day.episodes }}</div>\r\n                    <div class=\"prop-desc\">episodes</div>\r\n                </div>\r\n            </div>\r\n            <SeriesItem v-for=\"(media, i) in day.media\" :key=\"i\" :stamp=\"day.day.d+'a'+day.day.m+i\" :media=\"media\"></SeriesItem>\r\n        </div>\r\n        <button class=\"button group\" @click=\"$emit('loadRequest')\">\r\n            More...\r\n        </button>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport store from '@/store/store';\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\nimport SeriesItem from './SeriesItem.vue';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { SeriesItem },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@media screen and (min-width: 901px) {\r\n    .details {\r\n        padding: 12.944px;\r\n        background: var(--color-selected-background);\r\n        border-left: 1px solid var(--color-background-border);\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n    .details {\r\n        margin: 12.944px 10px;\r\n    }\r\n}\r\n\r\n.title {\r\n    margin-bottom: 12.944px;\r\n    font-weight: 500;\r\n    font-size: 1.2em;\r\n}\r\n\r\n.group {\r\n    box-shadow: 0 4px 10px rgba(0,0,0,.25);\r\n    background: var(--color-background);\r\n    border-radius: var(--radius);\r\n    overflow: hidden;\r\n\r\n    margin-bottom: 12.944px;\r\n}\r\n\r\n.group-header {\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    padding: 8px 12.944px;\r\n}\r\n\r\n.weekday {\r\n    display: block;\r\n    font-size: 0.86em;\r\n    padding-right: 3px;\r\n    color: var(--color-text-secondary);\r\n}\r\n\r\n.date {\r\n    display: block;\r\n    font-weight: 500;\r\n}\r\n\r\n.button {\r\n    appearance: none;\r\n    font: inherit;\r\n    color: inherit;\r\n    outline: none;\r\n    border: none;\r\n    display: block;\r\n\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n    text-align: center;\r\n    padding: 12px;\r\n    width: 100%;\r\n    font-weight: 500;\r\n\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background: var(--color-selected-background);\r\n        color: var(--color-selected-text);\r\n    }\r\n}\r\n</style>","<template>\r\n    <div class=\"item-wrapper\">\r\n        <div class=\"item\" @click=\"toggleDisplay\">\r\n            <img class=\"image\" :alt=\"'Cover image of '+media.title\" :src=\"media.cover\">\r\n            <span class=\"title\" :title=\"media.title\">{{ media.title }}</span>\r\n            <span style=\"flex: 1;\"></span>\r\n            <div class=\"prop\">\r\n                <span class=\"prop-value\">{{ media.episodes }}</span>\r\n                <span class=\"prop-desc\">{{ media.type === 'ANIME' ? 'episodes' : 'chapters' }}</span>\r\n            </div>\r\n        </div>\r\n        <transition name=\"details\">\r\n            <SeriesDetails v-if=\"details && !hide\" :stamp=\"stamp\" :media=\"media\"></SeriesDetails>\r\n        </transition>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\nimport SeriesDetails from './SeriesDetails.vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: Object,\r\n        hide: Boolean,\r\n        stamp: String\r\n    },\r\n\r\n    components: { SeriesDetails },\r\n\r\n    data() {\r\n        return {\r\n            details: false\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        hide: function(val) {\r\n            this.details = !val;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        toggleDisplay(): void {\r\n            this.$emit('toggle');\r\n            this.details = !this.details;\r\n        }\r\n    }\r\n\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.item {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    padding: 10px 2px 10px 12px; \r\n\r\n    &:hover {\r\n        background: var(--color-selected-background);\r\n        color: var(--color-selected-text);\r\n    }\r\n}\r\n\r\n.image {\r\n    object-fit: cover;\r\n    border-radius: 3px;\r\n    min-width: 36px;\r\n    width: 36px;\r\n    height: 36px;\r\n\r\n    margin-right: 12px;\r\n}\r\n\r\n.title {\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.details-enter-from, .details-leave-to {\r\n    transform: scale(0.9);\r\n    opacity: 0;\r\n}\r\n.details-enter-active, .details-leave-active {\r\n    transition: .2s ease;\r\n}\r\n</style>","<template>\r\n    <div v-if=\"loading\">\r\n        <CheapLoading></CheapLoading>\r\n    </div>\r\n    <div class=\"entries\" v-else>\r\n        <div class=\"header\">\r\n            <div class=\"tip-name\">\r\n                Planned since\r\n            </div>\r\n            <div class=\"tip-value\">\r\n                {{ added }}\r\n            </div>\r\n        </div>\r\n        <ActivityChart :height=\"100\" :id=\"media.id+''+stamp\" :row=\"media.type == 'ANIME' ? 'episodes' : 'chapters'\" :activities=\"activities\"></ActivityChart>\r\n        <!--<div class=\"entry\" v-for=\"(day, i) in activities\" :key=\"i\">\r\n            <div class=\"entry-date\">\r\n                {{ prettyDate(day.day)}}\r\n            </div>\r\n            <div class=\"entry-prop\">\r\n                <span class=\"entry-value\">{{ media.type == 'ANIME' ? day.episodes : day.chapters }}</span>\r\n                <span class=\"entry-desc\">{{ media.type == 'ANIME' ? ' episodes' : ' chapters' }}</span>\r\n            </div>\r\n        </div>-->\r\n        \r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport CheapLoading from '@/components/CheapLoading.vue';\r\nimport ActivityChart from '@/components/User/ActivityChart.vue';\r\n\r\n\r\nimport { fetchMedia } from '@/store/api';\r\nimport { findAddedDate, prettyDate } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: {} as any,\r\n        stamp: String\r\n    },\r\n\r\n    components: { CheapLoading, ActivityChart },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate,\r\n\r\n            activities: [] as ActivityDay[],\r\n            added: \"Unknown\",\r\n\r\n            loading: true\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        fetchMedia(this.state.userData.id, this.media.id)\r\n        .then(resp => {\r\n            const rawActivities = resp.data.Page.activities;\r\n            this.activities = store.parseActivities(rawActivities).reverse();\r\n\r\n            if(typeof this.media.added == 'undefined') {\r\n                this.added = findAddedDate(rawActivities);   \r\n            } else {\r\n                this.added = (this.media.added.time == 0 ? 'Unknown' : prettyDate(this.media.added));\r\n            }\r\n\r\n            this.loading = false;\r\n        })\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.header {\r\n    display: flex;\r\n    padding: 8px;\r\n    border-bottom: 1px solid var(--color-selected-text);\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.tip-value {\r\n    font-size: .95em;\r\n    font-weight: 500;\r\n}\r\n\r\n.tip-name {\r\n    color: var(--color-text-secondary);\r\n    font-size: .86em;\r\n}\r\n</style>","<template>\r\n    <div class=\"loading\">\r\n        Loading...\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.loading {\r\n    font-weight: 500;\r\n    padding: 10px 16px;\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n","import { render } from \"./CheapLoading.vue?vue&type=template&id=b816d2c6&scoped=true\"\nimport script from \"./CheapLoading.vue?vue&type=script&lang=ts\"\nexport * from \"./CheapLoading.vue?vue&type=script&lang=ts\"\n\nimport \"./CheapLoading.vue?vue&type=style&index=0&id=b816d2c6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-b816d2c6\"\n\nexport default script","<template>\r\n        <div class=\"chart\" ref=\"chart\" @mousedown=\"mouseDown\" @mouseup=\"mouseUp\" @mousemove=\"mouseMove\" @mouseleave=\"mouseLeave\">\r\n            <div :id=\"'area-'+id\" ref=\"area\"></div>\r\n            <div class=\"axis\">\r\n                <div class=\"label\" v-for=\"(day, i) in activities\" :key=\"i\">\r\n                    <span class=\"label-top\">{{ prettyDate(day.day) }}</span>\r\n                    <span class=\"label-bottom\">{{ day.day.weekday }}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    \r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, PropType } from 'vue'\r\nimport * as d3 from \"d3\";\r\n\r\nimport { ActivityDay } from '@/interfaces/activity'\r\nimport store from '@/store/store'\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        activities: {\r\n            type: Array as PropType<ActivityDay[]>,\r\n            required: true\r\n        },\r\n        row: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        id: String,\r\n        height: {\r\n            type: Number,\r\n            required: true\r\n        }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate,\r\n\r\n            margin: { top: 50, bottom: 10 },\r\n\r\n            dragging: false,\r\n            startX: 0,\r\n            scrollLeft: 0\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        activities: function() {\r\n            this.clean();\r\n            this.render();\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        this.render();\r\n    },\r\n    \r\n\r\n    methods: {\r\n        clean(): void {\r\n            const node = (this.$refs.area as HTMLDivElement)\r\n            while(node.lastChild) {\r\n                node.removeChild(node.lastChild);\r\n            }\r\n        },\r\n        render(): void {\r\n            const columnWidth = 100;\r\n            const width = this.activities.length * columnWidth;\r\n\r\n            const svg = d3.select('#area-'+this.id)\r\n            .append(\"svg\")\r\n            .attr(\"width\", width)\r\n            .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\r\n            .append(\"g\")\r\n            .attr(\"transform\", `translate(0, ${this.margin.top})`);\r\n\r\n            // x axis (human-readable day names)\r\n            const x = d3.scaleBand()\r\n            .domain(this.activities.map(x => prettyDate(x.day)))\r\n            .range([0, width])\r\n\r\n            const countArray = this.activities.map((x: any) => x[this.row]);\r\n            // y axis (episode/chapter count)\r\n            const y = d3.scaleLinear()\r\n            .domain([d3.min(countArray), d3.max(countArray) as number])\r\n            .range([this.height, 0])\r\n\r\n            const line = d3.line<ActivityDay>()\r\n            .x((d: ActivityDay) => {\r\n                return x(prettyDate(d.day)) as number + columnWidth/2;\r\n            })\r\n            .y((d: any) => y(d[this.row]))\r\n            .curve(d3.curveMonotoneX)\r\n\r\n            // AREA\r\n            svg.append(\"path\")\r\n            .datum(this.activities)\r\n            .attr(\"fill\", \"none\")\r\n            .attr(\"stroke\", \"#188cc6\") // TODO move to CSS\r\n            .attr(\"stroke-width\", 4)\r\n            .attr(\"d\", line)\r\n\r\n            // EPISODE COUNT LABELS\r\n            svg.selectAll(\"labels\")\r\n            .data(this.activities)\r\n            .join(\"text\")\r\n            .text((d: any) => d[this.row])\r\n            .attr(\"class\", \"chart-label\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"font-weight\", \"500\")\r\n            .attr(\"x\", d => x(prettyDate(d.day)) as number + columnWidth/2)\r\n            .attr(\"y\", (d: any) => y(d[this.row]) - 15);\r\n\r\n            // POINTS\r\n            svg.selectAll(\"circles\")\r\n            .data(this.activities)\r\n            .join(\"circle\")\r\n            .attr(\"fill\", \"#34bbff\") // TODO move to CSS\r\n            .attr(\"stroke\", \"none\")\r\n            .attr(\"fill-opacity\", \"0.7\")\r\n            .attr(\"r\", 5)\r\n            .attr(\"cx\", d => x(prettyDate(d.day)) as number + columnWidth/2)\r\n            .attr(\"cy\", (d: any) => y(d[this.row]));\r\n        },\r\n\r\n        // Chart scrolling event handlers\r\n        mouseDown(e: MouseEvent) {\r\n            this.dragging = true;\r\n            this.startX = e.pageX - (this.$refs.chart as HTMLDivElement).offsetLeft;\r\n            this.scrollLeft = (this.$refs.chart as HTMLDivElement).scrollLeft;\r\n        },\r\n\r\n        mouseUp() {\r\n            this.dragging = false;\r\n        },\r\n\r\n        mouseMove(e: MouseEvent) {\r\n            if(!this.dragging) return;\r\n            const x = e.pageX - (this.$refs.chart as HTMLDivElement).offsetLeft;\r\n            const walk = (x - this.startX) * 1.5;\r\n            (this.$refs.chart as HTMLDivElement).scrollLeft = this.scrollLeft - walk;\r\n        },\r\n\r\n        mouseLeave() {\r\n            this.dragging = false;\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.chart {\r\n    overflow-x: scroll;\r\n    white-space: nowrap;\r\n    user-select: none;\r\n    scrollbar-width: none;\r\n\r\n    cursor: grab;\r\n\r\n    &:active {\r\n        cursor: grabbing;\r\n    }\r\n\r\n    *::-webkit-scrollbar {\r\n        display: none;\r\n    }\r\n}\r\n\r\n.axis {\r\n    padding-right: 10px;\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.label {\r\n    background: var(--color-background-darker);\r\n    padding: 10px 0; \r\n\r\n    display: inline-flex;\r\n    flex-direction: column;\r\n\r\n    width: 100px;\r\n    text-align: center;\r\n}\r\n\r\n.label-top {\r\n    font-weight: 500;\r\n    font-size: 0.95em;\r\n}\r\n\r\n.label-bottom {\r\n    font-size: 0.76em;\r\n    color: var(--color-text-secondary);\r\n}\r\n</style>\r\n<!-- SVG STYLING-->\r\n\r\n<style lang=\"scss\">\r\nsvg .chart-label {\r\n    fill: var(--color-text);\r\n}\r\n</style>","\r\nimport { defineComponent, PropType } from 'vue'\r\nimport * as d3 from \"d3\";\r\n\r\nimport { ActivityDay } from '@/interfaces/activity'\r\nimport store from '@/store/store'\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        activities: {\r\n            type: Array as PropType<ActivityDay[]>,\r\n            required: true\r\n        },\r\n        row: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        id: String,\r\n        height: {\r\n            type: Number,\r\n            required: true\r\n        }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate,\r\n\r\n            margin: { top: 50, bottom: 10 },\r\n\r\n            dragging: false,\r\n            startX: 0,\r\n            scrollLeft: 0\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        activities: function() {\r\n            this.clean();\r\n            this.render();\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        this.render();\r\n    },\r\n    \r\n\r\n    methods: {\r\n        clean(): void {\r\n            const node = (this.$refs.area as HTMLDivElement)\r\n            while(node.lastChild) {\r\n                node.removeChild(node.lastChild);\r\n            }\r\n        },\r\n        render(): void {\r\n            const columnWidth = 100;\r\n            const width = this.activities.length * columnWidth;\r\n\r\n            const svg = d3.select('#area-'+this.id)\r\n            .append(\"svg\")\r\n            .attr(\"width\", width)\r\n            .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\r\n            .append(\"g\")\r\n            .attr(\"transform\", `translate(0, ${this.margin.top})`);\r\n\r\n            // x axis (human-readable day names)\r\n            const x = d3.scaleBand()\r\n            .domain(this.activities.map(x => prettyDate(x.day)))\r\n            .range([0, width])\r\n\r\n            const countArray = this.activities.map((x: any) => x[this.row]);\r\n            // y axis (episode/chapter count)\r\n            const y = d3.scaleLinear()\r\n            .domain([d3.min(countArray), d3.max(countArray) as number])\r\n            .range([this.height, 0])\r\n\r\n            const line = d3.line<ActivityDay>()\r\n            .x((d: ActivityDay) => {\r\n                return x(prettyDate(d.day)) as number + columnWidth/2;\r\n            })\r\n            .y((d: any) => y(d[this.row]))\r\n            .curve(d3.curveMonotoneX)\r\n\r\n            // AREA\r\n            svg.append(\"path\")\r\n            .datum(this.activities)\r\n            .attr(\"fill\", \"none\")\r\n            .attr(\"stroke\", \"#188cc6\") // TODO move to CSS\r\n            .attr(\"stroke-width\", 4)\r\n            .attr(\"d\", line)\r\n\r\n            // EPISODE COUNT LABELS\r\n            svg.selectAll(\"labels\")\r\n            .data(this.activities)\r\n            .join(\"text\")\r\n            .text((d: any) => d[this.row])\r\n            .attr(\"class\", \"chart-label\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"font-weight\", \"500\")\r\n            .attr(\"x\", d => x(prettyDate(d.day)) as number + columnWidth/2)\r\n            .attr(\"y\", (d: any) => y(d[this.row]) - 15);\r\n\r\n            // POINTS\r\n            svg.selectAll(\"circles\")\r\n            .data(this.activities)\r\n            .join(\"circle\")\r\n            .attr(\"fill\", \"#34bbff\") // TODO move to CSS\r\n            .attr(\"stroke\", \"none\")\r\n            .attr(\"fill-opacity\", \"0.7\")\r\n            .attr(\"r\", 5)\r\n            .attr(\"cx\", d => x(prettyDate(d.day)) as number + columnWidth/2)\r\n            .attr(\"cy\", (d: any) => y(d[this.row]));\r\n        },\r\n\r\n        // Chart scrolling event handlers\r\n        mouseDown(e: MouseEvent) {\r\n            this.dragging = true;\r\n            this.startX = e.pageX - (this.$refs.chart as HTMLDivElement).offsetLeft;\r\n            this.scrollLeft = (this.$refs.chart as HTMLDivElement).scrollLeft;\r\n        },\r\n\r\n        mouseUp() {\r\n            this.dragging = false;\r\n        },\r\n\r\n        mouseMove(e: MouseEvent) {\r\n            if(!this.dragging) return;\r\n            const x = e.pageX - (this.$refs.chart as HTMLDivElement).offsetLeft;\r\n            const walk = (x - this.startX) * 1.5;\r\n            (this.$refs.chart as HTMLDivElement).scrollLeft = this.scrollLeft - walk;\r\n        },\r\n\r\n        mouseLeave() {\r\n            this.dragging = false;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./ActivityChart.vue?vue&type=template&id=f62daefc&scoped=true\"\nimport script from \"./ActivityChart.vue?vue&type=script&lang=ts\"\nexport * from \"./ActivityChart.vue?vue&type=script&lang=ts\"\n\nimport \"./ActivityChart.vue?vue&type=style&index=0&id=f62daefc&lang=scss&scoped=true\"\nimport \"./ActivityChart.vue?vue&type=style&index=1&id=f62daefc&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-f62daefc\"\n\nexport default script","\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport CheapLoading from '@/components/CheapLoading.vue';\r\nimport ActivityChart from '@/components/User/ActivityChart.vue';\r\n\r\n\r\nimport { fetchMedia } from '@/store/api';\r\nimport { findAddedDate, prettyDate } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: {} as any,\r\n        stamp: String\r\n    },\r\n\r\n    components: { CheapLoading, ActivityChart },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate,\r\n\r\n            activities: [] as ActivityDay[],\r\n            added: \"Unknown\",\r\n\r\n            loading: true\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        fetchMedia(this.state.userData.id, this.media.id)\r\n        .then(resp => {\r\n            const rawActivities = resp.data.Page.activities;\r\n            this.activities = store.parseActivities(rawActivities).reverse();\r\n\r\n            if(typeof this.media.added == 'undefined') {\r\n                this.added = findAddedDate(rawActivities);   \r\n            } else {\r\n                this.added = (this.media.added.time == 0 ? 'Unknown' : prettyDate(this.media.added));\r\n            }\r\n\r\n            this.loading = false;\r\n        })\r\n    }\r\n})\r\n","import { render } from \"./SeriesDetails.vue?vue&type=template&id=d5b22e72&scoped=true\"\nimport script from \"./SeriesDetails.vue?vue&type=script&lang=ts\"\nexport * from \"./SeriesDetails.vue?vue&type=script&lang=ts\"\n\nimport \"./SeriesDetails.vue?vue&type=style&index=0&id=d5b22e72&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-d5b22e72\"\n\nexport default script","\r\nimport { defineComponent } from 'vue';\r\nimport SeriesDetails from './SeriesDetails.vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: Object,\r\n        hide: Boolean,\r\n        stamp: String\r\n    },\r\n\r\n    components: { SeriesDetails },\r\n\r\n    data() {\r\n        return {\r\n            details: false\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        hide: function(val) {\r\n            this.details = !val;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        toggleDisplay(): void {\r\n            this.$emit('toggle');\r\n            this.details = !this.details;\r\n        }\r\n    }\r\n\r\n})\r\n","import { render } from \"./SeriesItem.vue?vue&type=template&id=1740b062&scoped=true\"\nimport script from \"./SeriesItem.vue?vue&type=script&lang=ts\"\nexport * from \"./SeriesItem.vue?vue&type=script&lang=ts\"\n\nimport \"./SeriesItem.vue?vue&type=style&index=0&id=1740b062&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1740b062\"\n\nexport default script","\r\nimport store from '@/store/store';\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\nimport SeriesItem from './SeriesItem.vue';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { SeriesItem },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./DetailsContainer.vue?vue&type=template&id=451e4c02&scoped=true\"\nimport script from \"./DetailsContainer.vue?vue&type=script&lang=ts\"\nexport * from \"./DetailsContainer.vue?vue&type=script&lang=ts\"\n\nimport \"./DetailsContainer.vue?vue&type=style&index=0&id=451e4c02&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-451e4c02\"\n\nexport default script","<template>\r\n    <div class=\"calendar\">\r\n        <div class=\"header\">\r\n            <div class=\"header-title\">Calendar</div>\r\n            <span style=\"flex: 1;\"></span>\r\n            <div class=\"header-month\">\r\n                <span class=\"header-monthName\">{{ displayMonth }}</span>\r\n                <span>{{ \" \" }}</span>\r\n                <span class=\"header-year\" @click=\"toggleYearPicker()\" title=\"Click to open year picker\">{{ y }}</span>\r\n            </div>\r\n            <div class=\"header-control\" @click=\"update(-1)\">\r\n                <font-awesome-icon icon=\"chevron-left\"></font-awesome-icon>\r\n            </div>\r\n            <div class=\"header-control\" @click=\"update(1)\">\r\n                <font-awesome-icon icon=\"chevron-right\"></font-awesome-icon>\r\n            </div>\r\n        </div>\r\n        <div class=\"picker\" v-if=\"showYearPicker\">\r\n            <div class=\"pick-item\" v-for=\"year in pickerYears\" :key=\"year\" :class=\"{ selected: year == y }\" @click=\"loadMonth(m-1, year)\">{{ year }}</div>\r\n        </div>\r\n        <div class=\"display\">\r\n            <div class=\"weekdays\">\r\n                <div class=\"weekday\">Sun</div>\r\n                <div class=\"weekday\">Mon</div>\r\n                <div class=\"weekday\">Tue</div>\r\n                <div class=\"weekday\">Wed</div>\r\n                <div class=\"weekday\">Thu</div>\r\n                <div class=\"weekday\">Fri</div>\r\n                <div class=\"weekday\">Sat</div>\r\n            </div>\r\n            <div class=\"days\">\r\n                <div class=\"day\" \r\n                    v-for=\"(day, i) in days\" :key=\"i\" \r\n                    :style=\"(day.n == 1 ? { gridColumn: firstWeekday+1 } : '')\" \r\n                    @click=\"handleClick($event, day)\"\r\n                    :title=\"`${displayMonth} ${day.n}, ${y}\\nClick to see activities on this day.${day.notLoaded || day.notYetHappened ? '\\nIf you want to have colored background here, click Load more button below until it appears.' : ''}`\">\r\n                    <div class=\"day-bg\" :style=\"{ opacity: getOpacity(day.episodes) }\"></div>\r\n                    <div class=\"day-label\" :style=\"{ opacity: (day.notLoaded || day.notYetHappened ? '0.5' : '' ) }\">{{ day.n }}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\nimport { ActivityDay } from '@/interfaces/activity';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            days: [] as any,\r\n\r\n            y: 2021,\r\n            m: 0 as number,\r\n\r\n            displayMonth!: \"\",\r\n            firstWeekday!: 0,\r\n            max: 0,\r\n\r\n            showYearPicker: false,\r\n            pickerYears: [] as number[]\r\n        }\r\n    },\r\n\r\n    mounted: function(): void {\r\n        const now = new Date();\r\n\r\n        this.m = now.getMonth();\r\n        this.y = now.getFullYear();\r\n\r\n        this.preparePickers();\r\n        this.loadMonth(this.m, this.y);\r\n    },\r\n\r\n    computed: {\r\n        activities(): ActivityDay[] {\r\n            return this.state.activities\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        activities() {\r\n            this.loadMonth(this.m - 1, this.y)\r\n        }\r\n    },\r\n    \r\n    methods: {\r\n        loadMonth(m: number, y: number): void { // m is NOT human-readable (Jan = 0) as opposed to this.m\r\n            // Clear current display\r\n            this.days.length = 0;\r\n\r\n            // Load the first day of the month\r\n            let firstDay = new Date(y, m, 1);\r\n\r\n            // Get day of the week of the first day\r\n            this.firstWeekday = firstDay.getDay();\r\n\r\n            // Figure out how many days there are in this month\r\n            const count = this.daysInMonth(m, y);\r\n\r\n            // Figure out on which day the user has watched most episodes (used for colors)\r\n            this.max = Math.max.apply(Math, this.state.activities.map(x => x.episodes + x.chapters)); // TODO episode/chapter distinction\r\n\r\n            const latestActivity = this.state.activities[0];\r\n            let latestDay: number = 32;\r\n\r\n            const lastActivity = this.state.activities[this.state.activities.length - 1]; \r\n            let lastDay: number = 0; // last day number currently present in activities array\r\n            \r\n            if(lastActivity.day.m == m+1 && lastActivity.day.y == y) {\r\n                lastDay = lastActivity.day.d;\r\n            } else if (lastActivity.day.m > m+1 && lastActivity.day.y == y) {\r\n                lastDay = 32;\r\n            } else if (lastActivity.day.y > y) {\r\n                lastDay = 32;\r\n            }\r\n\r\n            if(latestActivity.day.m == m+1 && latestActivity.day.y == y) {\r\n                latestDay = latestActivity.day.d;\r\n            } else if (latestActivity.day.m < m+1 && latestActivity.day.y == y) {\r\n                latestDay = 0;\r\n            } else if (latestActivity.day.y < y) {\r\n                latestDay = 0;\r\n            }\r\n\r\n            for (let i = 1; i <= count; i++) {\r\n                const activities = this.state.activities.find(x => x.day.d == i && x.day.m == m+1 && x.day.y == y);\r\n                this.days.push({\r\n                    n: i,\r\n                    activities,\r\n                    notLoaded: !activities && i < lastDay,\r\n                    notYetHappened: i > latestDay,\r\n                    //empty: !activities && (i < lastDay || i > latestDay),\r\n                    episodes: (activities ? activities.episodes + activities.chapters : 0)\r\n                })\r\n            }\r\n\r\n            // Change displayed date\r\n            this.m = m+1;\r\n            this.y = y;\r\n            this.displayMonth = new Intl.DateTimeFormat('default', { month: 'long' }).format(firstDay);\r\n        },\r\n\r\n        // handleClick: show popup containing activities on a specific day\r\n        handleClick(event: MouseEvent, day: any) { // TODO get rid of any\r\n            if(day.activities) { // the day has activities loaded\r\n                this.$emit('popup', {\r\n                    event,\r\n                    activities: day.activities\r\n                })\r\n            } else if (!day.activities && !day.notLoaded) { // the day has no activities, but is within loaded range\r\n                this.$emit('error', \"There are no activities present on this day.\")\r\n            } else if (!day.notYetHappened) { // the day is not within loaded range\r\n                this.$emit('dynamicPopup', {\r\n                    event,\r\n                    d: day.n,\r\n                    m: this.m,\r\n                    y: this.y\r\n                })\r\n            }\r\n        },\r\n\r\n        update(change: number): void {\r\n            if(change > 0) {\r\n                if (this.m + 1 > 12) {\r\n                    this.y++;\r\n                    this.loadMonth(0, this.y)\r\n                } else {\r\n                    this.loadMonth(this.m, this.y);\r\n                }\r\n            } else {\r\n                if (this.m - 1 < 1) {\r\n                    this.y--;\r\n                    this.loadMonth(11, this.y);\r\n                } else {\r\n                    this.loadMonth(this.m-2, this.y);\r\n                }\r\n            }\r\n        },\r\n\r\n        toggleYearPicker() {\r\n            this.showYearPicker = !this.showYearPicker;\r\n        },\r\n\r\n        preparePickers() {\r\n            // Prepare year picker\r\n            this.pickerYears = [this.y-3, this.y-2, this.y-1, this.y]\r\n        },\r\n\r\n        daysInMonth(m: number, y: number): number {\r\n            switch (m) {\r\n                case 1 :\r\n                    return (y % 4 == 0 && y % 100) || y % 400 == 0 ? 29 : 28;\r\n                case 8 : case 3 : case 5 : case 10 :\r\n                    return 30;\r\n                default :\r\n                    return 31\r\n            }\r\n        },\r\n\r\n        getOpacity(count: number): number {\r\n            const ratio = count / this.max;\r\n\r\n            if (ratio == 0) return 0;\r\n            else if (ratio < 0.15) return 0.15;\r\n            else return ratio;\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.calendar {\r\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);\r\n\r\n    border-radius: var(--radius);\r\n    padding-bottom: 4px;\r\n\r\n    margin-bottom: 12.944px;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 10px 16px;\r\n\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.header-title {\r\n    font-weight: 500;\r\n    font-size: 1.2em;\r\n}\r\n\r\n.header-month {\r\n    padding: 3px 12px;\r\n    margin: 0 3px;\r\n    font-weight: 500;\r\n    text-align: center;\r\n    background: var(--color-background-darker);\r\n    border-radius: 3px;\r\n}\r\n\r\n.header-year {\r\n    cursor: pointer;\r\n    \r\n    &:hover {\r\n        color: var(--color-selected-text);\r\n        text-decoration: underline;\r\n    }\r\n}\r\n\r\n.header-control {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 50px;\r\n    height: 29px;\r\n\r\n    text-align: center;\r\n    border-radius: 3px;\r\n\r\n    user-select: none;\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background: var(--color-selected-background);\r\n        color: var(--color-selected-text);\r\n    }\r\n\r\n    &:active {\r\n        opacity: 0.7;\r\n    }\r\n}\r\n\r\n.picker {\r\n    display: flex;\r\n}\r\n\r\n.pick-item {\r\n    padding: 8px;\r\n    margin: 4px;\r\n    border-radius: var(--radius);\r\n    font-weight: 500;\r\n\r\n    flex-grow: 1;\r\n    text-align: center;\r\n\r\n    cursor: pointer;\r\n}\r\n\r\n.selected {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n}\r\n\r\n.days, .weekdays {\r\n    display: grid;\r\n    grid-template-columns: repeat(7, 1fr);\r\n\r\n    margin: 0 5px;\r\n    font-size: .89em;\r\n}\r\n\r\n.day {\r\n    padding: 12px 12px 8px 12px;\r\n    margin: 2px;\r\n    border: 1px solid transparent;\r\n\r\n    border-radius: 4px;\r\n    text-align: center;\r\n    font-weight: 500;\r\n    \r\n    display: flex;\r\n    justify-content: center;\r\n\r\n    cursor: pointer;\r\n    user-select: none;\r\n\r\n    position: relative;\r\n    transition: border .2s, opacity .2s;\r\n\r\n\r\n    &:hover {\r\n        border: 1px solid var(--color-background-day);\r\n    }\r\n\r\n    &:active {\r\n        opacity: 0.8;\r\n    }\r\n}\r\n\r\n.weekday {\r\n    text-align: center;\r\n    font-weight: 600;\r\n\r\n    border-bottom: 1px solid var(--color-background-border);\r\n    padding: 12px;\r\n}\r\n\r\n.day-bg {\r\n    background: var(--color-background-day);\r\n    position: absolute;\r\n    border-radius: 4px;\r\n\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n\r\n    z-index: 0;\r\n}\r\n\r\n.day-label {\r\n    z-index: 1;\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\nimport { ActivityDay } from '@/interfaces/activity';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            days: [] as any,\r\n\r\n            y: 2021,\r\n            m: 0 as number,\r\n\r\n            displayMonth!: \"\",\r\n            firstWeekday!: 0,\r\n            max: 0,\r\n\r\n            showYearPicker: false,\r\n            pickerYears: [] as number[]\r\n        }\r\n    },\r\n\r\n    mounted: function(): void {\r\n        const now = new Date();\r\n\r\n        this.m = now.getMonth();\r\n        this.y = now.getFullYear();\r\n\r\n        this.preparePickers();\r\n        this.loadMonth(this.m, this.y);\r\n    },\r\n\r\n    computed: {\r\n        activities(): ActivityDay[] {\r\n            return this.state.activities\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        activities() {\r\n            this.loadMonth(this.m - 1, this.y)\r\n        }\r\n    },\r\n    \r\n    methods: {\r\n        loadMonth(m: number, y: number): void { // m is NOT human-readable (Jan = 0) as opposed to this.m\r\n            // Clear current display\r\n            this.days.length = 0;\r\n\r\n            // Load the first day of the month\r\n            let firstDay = new Date(y, m, 1);\r\n\r\n            // Get day of the week of the first day\r\n            this.firstWeekday = firstDay.getDay();\r\n\r\n            // Figure out how many days there are in this month\r\n            const count = this.daysInMonth(m, y);\r\n\r\n            // Figure out on which day the user has watched most episodes (used for colors)\r\n            this.max = Math.max.apply(Math, this.state.activities.map(x => x.episodes + x.chapters)); // TODO episode/chapter distinction\r\n\r\n            const latestActivity = this.state.activities[0];\r\n            let latestDay: number = 32;\r\n\r\n            const lastActivity = this.state.activities[this.state.activities.length - 1]; \r\n            let lastDay: number = 0; // last day number currently present in activities array\r\n            \r\n            if(lastActivity.day.m == m+1 && lastActivity.day.y == y) {\r\n                lastDay = lastActivity.day.d;\r\n            } else if (lastActivity.day.m > m+1 && lastActivity.day.y == y) {\r\n                lastDay = 32;\r\n            } else if (lastActivity.day.y > y) {\r\n                lastDay = 32;\r\n            }\r\n\r\n            if(latestActivity.day.m == m+1 && latestActivity.day.y == y) {\r\n                latestDay = latestActivity.day.d;\r\n            } else if (latestActivity.day.m < m+1 && latestActivity.day.y == y) {\r\n                latestDay = 0;\r\n            } else if (latestActivity.day.y < y) {\r\n                latestDay = 0;\r\n            }\r\n\r\n            for (let i = 1; i <= count; i++) {\r\n                const activities = this.state.activities.find(x => x.day.d == i && x.day.m == m+1 && x.day.y == y);\r\n                this.days.push({\r\n                    n: i,\r\n                    activities,\r\n                    notLoaded: !activities && i < lastDay,\r\n                    notYetHappened: i > latestDay,\r\n                    //empty: !activities && (i < lastDay || i > latestDay),\r\n                    episodes: (activities ? activities.episodes + activities.chapters : 0)\r\n                })\r\n            }\r\n\r\n            // Change displayed date\r\n            this.m = m+1;\r\n            this.y = y;\r\n            this.displayMonth = new Intl.DateTimeFormat('default', { month: 'long' }).format(firstDay);\r\n        },\r\n\r\n        // handleClick: show popup containing activities on a specific day\r\n        handleClick(event: MouseEvent, day: any) { // TODO get rid of any\r\n            if(day.activities) { // the day has activities loaded\r\n                this.$emit('popup', {\r\n                    event,\r\n                    activities: day.activities\r\n                })\r\n            } else if (!day.activities && !day.notLoaded) { // the day has no activities, but is within loaded range\r\n                this.$emit('error', \"There are no activities present on this day.\")\r\n            } else if (!day.notYetHappened) { // the day is not within loaded range\r\n                this.$emit('dynamicPopup', {\r\n                    event,\r\n                    d: day.n,\r\n                    m: this.m,\r\n                    y: this.y\r\n                })\r\n            }\r\n        },\r\n\r\n        update(change: number): void {\r\n            if(change > 0) {\r\n                if (this.m + 1 > 12) {\r\n                    this.y++;\r\n                    this.loadMonth(0, this.y)\r\n                } else {\r\n                    this.loadMonth(this.m, this.y);\r\n                }\r\n            } else {\r\n                if (this.m - 1 < 1) {\r\n                    this.y--;\r\n                    this.loadMonth(11, this.y);\r\n                } else {\r\n                    this.loadMonth(this.m-2, this.y);\r\n                }\r\n            }\r\n        },\r\n\r\n        toggleYearPicker() {\r\n            this.showYearPicker = !this.showYearPicker;\r\n        },\r\n\r\n        preparePickers() {\r\n            // Prepare year picker\r\n            this.pickerYears = [this.y-3, this.y-2, this.y-1, this.y]\r\n        },\r\n\r\n        daysInMonth(m: number, y: number): number {\r\n            switch (m) {\r\n                case 1 :\r\n                    return (y % 4 == 0 && y % 100) || y % 400 == 0 ? 29 : 28;\r\n                case 8 : case 3 : case 5 : case 10 :\r\n                    return 30;\r\n                default :\r\n                    return 31\r\n            }\r\n        },\r\n\r\n        getOpacity(count: number): number {\r\n            const ratio = count / this.max;\r\n\r\n            if (ratio == 0) return 0;\r\n            else if (ratio < 0.15) return 0.15;\r\n            else return ratio;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Calendar.vue?vue&type=template&id=4e6c0de4&scoped=true\"\nimport script from \"./Calendar.vue?vue&type=script&lang=ts\"\nexport * from \"./Calendar.vue?vue&type=script&lang=ts\"\n\nimport \"./Calendar.vue?vue&type=style&index=0&id=4e6c0de4&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4e6c0de4\"\n\nexport default script","<template>\r\n    <div class=\"datarange\">\r\n        <div class=\"header-title\">Data range</div>\r\n        <span style=\"flex: 1;\"></span>\r\n        <div class=\"header-button\" @click=\"$emit('loadRequest')\">\r\n            <font-awesome-icon icon=\"redo-alt\"></font-awesome-icon>\r\n            <span class=\"button-label\">Load more</span>\r\n        </div>\r\n        <span class=\"breaker\"></span>\r\n        <span class=\"header-range\">{{ lastLoadedDay }} - today</span>\r\n        <!--<span class=\"spacer\"></span>\r\n        <div class=\"header-button\">\r\n            <font-awesome-icon icon=\"question-circle\"></font-awesome-icon>\r\n        </div>-->\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        lastLoadedDay(): string {\r\n            return prettyDate(this.state.activities[this.state.activities.length-1].day);\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.datarange {\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    align-items: center;\r\n    padding: 0 8px;\r\n    margin-bottom: 12.944px;\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.header-title {\r\n    font-weight: 500;\r\n    font-size: 1.2em;\r\n    padding: 8px 0;\r\n}\r\n\r\n.header-range {\r\n    font-weight: 500;\r\n    margin: 0 6px;\r\n}\r\n\r\n.header-button {\r\n    padding: 8px;\r\n    \r\n    border-radius: var(--radius);\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n    font-weight: 500;\r\n\r\n    transition: background .2s ease;\r\n    cursor: pointer;\r\n    user-select: none;\r\n\r\n    &:hover {\r\n        background: var(--color-background-border);\r\n    }\r\n}\r\n\r\n.button-label {\r\n    margin-left: 6px;\r\n}\r\n\r\n@media screen and (max-width: 600px) {\r\n    .breaker {\r\n        display: block;\r\n        height: 0;\r\n        width: 100%;\r\n    }\r\n\r\n    .spacer {\r\n        flex: 1;\r\n    }\r\n\r\n    .header-title {\r\n        padding: 0;\r\n    }\r\n\r\n    .header-button {\r\n        background: inherit;\r\n    }\r\n\r\n    .header-range {\r\n        font-weight: normal;\r\n        margin: 0;\r\n    }\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        lastLoadedDay(): string {\r\n            return prettyDate(this.state.activities[this.state.activities.length-1].day);\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./DataRange.vue?vue&type=template&id=46337ac5&scoped=true\"\nimport script from \"./DataRange.vue?vue&type=script&lang=ts\"\nexport * from \"./DataRange.vue?vue&type=script&lang=ts\"\n\nimport \"./DataRange.vue?vue&type=style&index=0&id=46337ac5&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-46337ac5\"\n\nexport default script","<template>\r\n    <div class=\"tooltip\">\r\n        <div v-if=\"loading\">\r\n            <CheapLoading></CheapLoading>\r\n        </div>\r\n        <div v-else>\r\n            <div class=\"header\">\r\n                <div class=\"header-title\">{{ prettyDate(day.day) }}</div>\r\n                <span style=\"flex: 1\"></span>\r\n                <div class=\"prop\" v-if=\"day.chapters > 0\">\r\n                    <div class=\"prop-value\">{{ day.chapters }}</div>\r\n                    <div class=\"prop-desc\" title=\"chapters\">chapters</div>\r\n                </div>\r\n                <div class=\"prop\" v-if=\"day.episodes > 0\">\r\n                    <div class=\"prop-value\">{{ day.episodes }}</div>\r\n                    <div class=\"prop-desc\" title=\"episodes\">episodes</div>\r\n                </div>\r\n                <div class=\"header-control\" @click=\"close\">\r\n                    <font-awesome-icon icon=\"times\"></font-awesome-icon>\r\n                </div>\r\n            </div>\r\n            <div class=\"content\">\r\n                <SeriesItem v-for=\"(media, i) in day.media\" :key=\"i\" :media=\"media\" @toggle=\"handleClick(i)\" :hide=\"selected != i\"></SeriesItem>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { prettyDate } from '@/store/helpers';\r\nimport SeriesItem from '@/components/User/Details/SeriesItem.vue';\r\nimport CheapLoading from '@/components/CheapLoading.vue';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        day: {} as any,\r\n        loading: Boolean\r\n    },\r\n\r\n    components: { SeriesItem, CheapLoading },\r\n\r\n    data() {\r\n        return {\r\n            prettyDate,\r\n\r\n            selected: -1\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        close(): void {\r\n            this.$emit('close');\r\n        },\r\n\r\n        handleClick(i: number): void {\r\n            if(this.selected == i) this.selected = -1;\r\n            else this.selected = i;\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tooltip {\r\n    background: var(--color-background);\r\n    border-radius: var(--radius);\r\n    overflow: hidden;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 10px 16px;\r\n\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.header-title {\r\n    font-weight: 500;\r\n    font-size: 1em;\r\n}\r\n\r\n.header-control {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    \r\n    width: 29px;\r\n    height: 29px;\r\n\r\n    text-align: center;\r\n    border-radius: 3px;\r\n\r\n    user-select: none;\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background: var(--color-background-secondary);\r\n    }\r\n\r\n    &:active {\r\n        opacity: 0.7;\r\n    }\r\n}\r\n\r\n@media screen and (min-width: 901px) {\r\n    .tooltip {\r\n        margin-bottom: 12.944px;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n    .content {\r\n        max-height: 60vh;\r\n        overflow-y: auto;\r\n    }\r\n}\r\n</style>","\r\nimport { prettyDate } from '@/store/helpers';\r\nimport SeriesItem from '@/components/User/Details/SeriesItem.vue';\r\nimport CheapLoading from '@/components/CheapLoading.vue';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        day: {} as any,\r\n        loading: Boolean\r\n    },\r\n\r\n    components: { SeriesItem, CheapLoading },\r\n\r\n    data() {\r\n        return {\r\n            prettyDate,\r\n\r\n            selected: -1\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        close(): void {\r\n            this.$emit('close');\r\n        },\r\n\r\n        handleClick(i: number): void {\r\n            if(this.selected == i) this.selected = -1;\r\n            else this.selected = i;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Tooltip.vue?vue&type=template&id=d36cfb8a&scoped=true\"\nimport script from \"./Tooltip.vue?vue&type=script&lang=ts\"\nexport * from \"./Tooltip.vue?vue&type=script&lang=ts\"\n\nimport \"./Tooltip.vue?vue&type=style&index=0&id=d36cfb8a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-d36cfb8a\"\n\nexport default script","<template>\r\n    <div class=\"chart-container\">\r\n        <div class=\"header\">\r\n            <div class=\"header-title\"><slot></slot></div>\r\n        </div>\r\n        <ActivityChart :height=\"height\" :row=\"row\" :id=\"id\" :activities=\"state.activities\"></ActivityChart>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"@vue/runtime-core\";\r\nimport store from '@/store/store';\r\n\r\nimport ActivityChart from './ActivityChart.vue';\r\n\r\nexport default defineComponent({\r\n    components: { ActivityChart },\r\n    props: {\r\n        row: String,\r\n        id: String,\r\n        height: Number\r\n    },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n        }\r\n    }\r\n})      \r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.chart-container {\r\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);\r\n\r\n    border-radius: var(--radius);\r\n\r\n    margin-bottom: 12.944px;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 10px 16px;\r\n\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.header-title {\r\n    font-weight: 500;\r\n    font-size: 1.2em;\r\n}\r\n\r\n</style>","\r\nimport { defineComponent } from \"@vue/runtime-core\";\r\nimport store from '@/store/store';\r\n\r\nimport ActivityChart from './ActivityChart.vue';\r\n\r\nexport default defineComponent({\r\n    components: { ActivityChart },\r\n    props: {\r\n        row: String,\r\n        id: String,\r\n        height: Number\r\n    },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n        }\r\n    }\r\n})      \r\n","import { render } from \"./Chart.vue?vue&type=template&id=c136de9e&scoped=true\"\nimport script from \"./Chart.vue?vue&type=script&lang=ts\"\nexport * from \"./Chart.vue?vue&type=script&lang=ts\"\n\nimport \"./Chart.vue?vue&type=style&index=0&id=c136de9e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-c136de9e\"\n\nexport default script","\r\nimport store from '@/store/store';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nimport DetailsContainer from '@/components/User/Details/DetailsContainer.vue';\r\nimport Calendar from './Calendar.vue';\r\nimport DataRange from './DataRange.vue'\r\nimport Tooltip from './Tooltip.vue';\r\nimport Chart from './Chart.vue';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport { fetchActivity } from '@/store/api';\r\n\r\nexport default defineComponent({\r\n    components: { DetailsContainer, Calendar, Tooltip, DataRange, Chart },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n\r\n            showTooltip: false,\r\n            tooltipActivities: {} as ActivityDay,\r\n            \r\n            popupLoading: false\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        load(): void {\r\n            this.$emit('loadRequest');\r\n        },\r\n\r\n        // Show popup using already loaded data\r\n        showPopup(e: { activities: ActivityDay, event: MouseEvent }): void {\r\n            this.showTooltip = false;\r\n            this.tooltipActivities = e.activities;\r\n        \r\n            this.showTooltip = true;\r\n        },\r\n\r\n        // Show popup having loaded data\r\n        fetchPopup(e: { event: MouseEvent, d: number, m: number, y: number}): void {\r\n            this.popupLoading = true;\r\n            this.showTooltip = true;\r\n            let date = new Date(e.y, e.m-1, e.d);\r\n\r\n            // Get timestamp of the beginning and the end of this day.\r\n            // Converting to AniList time and adding hours according to user's preferences.\r\n            const begin = (date.getTime()/1000)+this.state.updateHour*3600;\r\n            const end = begin+86400; // add 24 hours to the beginning timestamp\r\n            \r\n            fetchActivity(this.state.userData.id, 1, this.state.mediaType, begin, end)\r\n            .then(resp => {\r\n                const activities = store.parseActivities(resp.data.Page.activities);\r\n                this.tooltipActivities = activities[0];\r\n\r\n                if(activities.length == 0) this.showTooltip = false;\r\n                else this.popupLoading = false;\r\n            })\r\n        },\r\n\r\n        showError(e: any): void {\r\n            console.log(e);\r\n        },\r\n\r\n        popupHide(): void {\r\n            this.showTooltip = false;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Main.vue?vue&type=template&id=aabbaf26&scoped=true\"\nimport script from \"./Main.vue?vue&type=script&lang=ts\"\nexport * from \"./Main.vue?vue&type=script&lang=ts\"\n\nimport \"./Main.vue?vue&type=style&index=0&id=aabbaf26&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-aabbaf26\"\n\nexport default script","<template>\r\n    <div class=\"list\">\r\n        <transition name=\"popup-backdrop\">\r\n            <div class=\"popup-backdrop\" v-if=\"showPopup\" @click=\"popupHide\">\r\n                <transition appear name=\"popup\">\r\n                    <Popup :media=\"popupMedia\" @close=\"popupHide\"></Popup>\r\n                </transition>\r\n            </div>\r\n        </transition>\r\n        <div class=\"controls\">\r\n            <div class=\"controls-search\">\r\n                <input class=\"controls-input\" type=\"text\" v-model=\"query\" placeholder=\"Search...\" />\r\n            </div>\r\n            <div class=\"controls-filterGroup\" v-for=\"(filter, i) in filteredFilters\" :key=\"i\">\r\n                <span class=\"filter-name\">{{ filter.name }}: </span>\r\n                <button class=\"filter-button\" title=\"Click to toggle\" :class=\"{ selected: filter.checked.indexOf(value.key) > -1 }\" v-for=\"(value, j) in filter.values\" :key=\"j\" @click=\"toggleFilter(i, value.key)\">{{ typeof value.name === 'undefined' ? ($route.name == \"AnimeList\" ? value.animeName : value.mangaName) : value.name }}</button>\r\n            </div>\r\n        </div>\r\n        <Pagination v-if=\"listLength > 1\" @set=\"navigate\" :max=\"listLength\" :current=\"currentPage\"></Pagination>\r\n        <table cellspacing=\"0\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"tableHeader tableHeader-title\">Title</th>\r\n                    <th class=\"tableHeader tableHeader-regular\">Type</th>\r\n                    <th class=\"tableHeader tableHeader-regular table-responsive\">Added</th>\r\n                    <th class=\"tableHeader tableHeader-regular table-responsive\">Completed</th>\r\n                    <th class=\"tableHeader tableHeader-regular table-responsive2\">Status</th>\r\n                    <th class=\"tableHeader\"></th>\r\n                </tr>\r\n            </thead>\r\n            <div class=\"loading\" v-if=\"loading\">\r\n                Loading...\r\n            </div>\r\n            <tbody v-else>\r\n                <tr v-for=\"media in paginatedList\" :key=\"media.id\" class=\"tableRow\" @click=\"popupShow(media)\">\r\n                    <td class=\"tableData tableData-title\">\r\n                        <img v-lazyload class=\"tableData-image\" :data-src=\"media.cover\" width=\"24\" height=\"24\" loading=\"lazy\" />\r\n                        <span>{{ media.title }}</span>\r\n                    </td>\r\n                    <td class=\"tableData tableData-regular\">{{ prettyFormat(media.format) }}</td>\r\n                    <td class=\"tableData tableData-regular table-responsive\">{{ prettyDate(media.added) }}</td>\r\n                    <td class=\"tableData tableData-regular table-responsive\">{{ prettyDate(media.completed) }}</td>\r\n                    <td class=\"tableData tableData-regular table-responsive2\">{{ prettyStatus(media.status) }}</td>\r\n                    <td class=\"tableData tableData-icon\">\r\n                        <div class=\"tableData-iconWrapper\" :style=\"{ color: resolveColor(media.status) }\">\r\n                            <font-awesome-icon :icon=\"resolveIcon(media.status)\" fixed-width />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <div class=\"loading\" v-if=\"list.length == 0\">\r\n                    No results found. Maybe try changing the filters?\r\n                </div>\r\n            </tbody>\r\n        </table>\r\n        <Pagination v-if=\"listLength > 1\" @set=\"navigate\" :max=\"listLength\" :current=\"currentPage\"></Pagination>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\n\r\nimport store from '@/store/store';\r\nimport { fetchMediaList } from \"@/store/lists\";\r\nimport { prettyDate } from \"@/store/helpers\";\r\n\r\nimport { ActivityMedia } from \"@/interfaces/activity\";\r\nimport { Filter } from '@/interfaces/filters';\r\n\r\nimport Popup from './Popup.vue';\r\nimport Pagination from './Pagination.vue';\r\n\r\nexport default defineComponent({\r\n    components: { Popup, Pagination },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate: prettyDate,\r\n\r\n            loading: true,\r\n            displayCover: -1,\r\n\r\n            showPopup: false,\r\n            popupMedia: {} as ActivityMedia,\r\n\r\n            pageSize: 100, // size of one page\r\n            currentPage: 0, // we're using computer-friendly numbers here\r\n            listLength: 0,\r\n\r\n            query: \"\",\r\n            filters: [\r\n                {\r\n                    name: \"Status\",\r\n                    key: \"status\",\r\n                    type: \"both\",\r\n                    values: [\r\n                        {\r\n                            animeName: \"Watching\",\r\n                            mangaName: \"Reading\",\r\n                            key: \"CURRENT\"\r\n                        },\r\n                        {\r\n                            animeName: \"Rewatching\",\r\n                            mangaName: \"Rereading\",\r\n                            key: \"REPEATING\"\r\n                        },\r\n                        {\r\n                            name: \"Completed\",\r\n                            key: \"COMPLETED\"\r\n                        },\r\n                        {\r\n                            name: \"Planning\",\r\n                            key: \"PLANNING\"\r\n                        },\r\n                        {\r\n                            name: \"Dropped\",\r\n                            key: \"DROPPED\"\r\n                        },\r\n                        {\r\n                            name: \"Paused\",\r\n                            key: \"PAUSED\"\r\n                        }\r\n                    ],\r\n                    checked: [\"COMPLETED\", \"CURRENT\", \"REPEATING\"]\r\n                },\r\n                {\r\n                    name: \"Type\",\r\n                    key: \"format\",\r\n                    type: \"anime\",\r\n                    values: [\r\n                        {\r\n                            name: \"TV\",\r\n                            key: \"TV\"\r\n                        },\r\n                        {\r\n                            name: \"TV Short\",\r\n                            key: \"TV_SHORT\"\r\n                        },\r\n                        {\r\n                            name: \"Movie\",\r\n                            key: \"MOVIE\"\r\n                        },\r\n                        {\r\n                            name: \"Special\",\r\n                            key: \"SPECIAL\"\r\n                        },\r\n                        {\r\n                            name: \"OVA\",\r\n                            key: \"OVA\"\r\n                        },\r\n                        {\r\n                            name: \"ONA\",\r\n                            key: \"ONA\"\r\n                        },\r\n                        {\r\n                            name: \"Music\",\r\n                            key: \"MUSIC\"\r\n                        }\r\n                    ],\r\n                    checked: [\"TV\", \"TV_SHORT\", \"MOVIE\", \"SPECIAL\", \"OVA\", \"ONA\", \"MUSIC\"]\r\n                },\r\n                {\r\n                    name: \"Type\",\r\n                    key: \"format\",\r\n                    type: \"manga\",\r\n                    values: [\r\n                        {\r\n                            name: \"Manga\",\r\n                            key: \"MANGA\"\r\n                        },\r\n                        {\r\n                            name: \"Light novel\",\r\n                            key: \"NOVEL\"\r\n                        },\r\n                        {\r\n                            name: \"One shot\",\r\n                            key: \"ONE_SHOT\"\r\n                        }\r\n                    ],\r\n                    checked: [\"MANGA\", \"NOVEL\", \"ONE_SHOT\"]\r\n                }\r\n            ]\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.fetchData();\r\n    },\r\n\r\n    watch: {\r\n        '$route': 'fetchData',\r\n        query() {\r\n            this.currentPage = 0;\r\n\r\n            // Calculate new length\r\n            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        list(): ActivityMedia[] {\r\n            const raw: ActivityMedia[] = (this.$route.name == \"AnimeList\" ? this.state.animeList : this.state.mangaList);\r\n            \r\n            // For starters, we filter the list by user's search query (if there's none, this function will just do nothing)\r\n            \r\n            let filtered: ActivityMedia[] = raw.filter(item => item.title.toLowerCase().indexOf(this.query.toLowerCase()) > -1);\r\n            \r\n            // Loop through each applicable filter and apply it\r\n            this.filteredFilters.forEach(filter => {\r\n                filtered = filtered.filter((x: any) => filter.checked.indexOf(x[filter.key]) > -1)\r\n            })\r\n            return filtered;\r\n        },\r\n        paginatedList(): ActivityMedia[] {\r\n            return this.list.slice(this.currentPage * this.pageSize, (this.currentPage + 1) * this.pageSize)\r\n        },\r\n        filteredFilters(): Filter[] {\r\n            return this.filters.filter(filter => {\r\n                if(this.$route.name == \"AnimeList\" && filter.type == \"manga\") return false;\r\n                else if(this.$route.name == \"MangaList\" && filter.type == \"anime\") return false;\r\n                else return true;\r\n            });\r\n        }\r\n    },\r\n\r\n    directives: {\r\n        lazyload: {\r\n            mounted(el): any {\r\n                el.src = el.dataset.src;\r\n            }\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        fetchData() {\r\n            // setTimeout is here, because without it, the DOM has a short lag (when the list is large, at least.). That way, the DOM has a lag as well,\r\n            // but it's once 'List' component is visible to the user, and \"Loading...\" label is displayed, which surely improves user experience.\r\n            this.loading = true;\r\n            this.currentPage = 0;\r\n            this.listLength = 0;\r\n            setTimeout(() => {\r\n                if(this.$route.name == \"AnimeList\") {\r\n                    if(this.state.animeList.length == 0) {\r\n                        fetchMediaList(\"ANIME\")\r\n                        .then(list => {\r\n                            store.setAnimeList(list);\r\n                            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                            this.loading = false;\r\n                        })\r\n                    } else {\r\n                        this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                        this.loading = false;\r\n                    }\r\n                } else if (this.$route.name == \"MangaList\") {\r\n                    if(this.state.mangaList.length == 0) {\r\n                        fetchMediaList(\"MANGA\")\r\n                        .then(list => {\r\n                            store.setMangaList(list);\r\n                            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                            this.loading = false;\r\n\r\n                        })\r\n                    } else {\r\n                        this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                        this.loading = false;\r\n                    }\r\n                }\r\n            }, 100)\r\n            \r\n        },\r\n        popupShow(media: ActivityMedia) {\r\n            this.showPopup = true;\r\n            this.popupMedia = media;\r\n        },\r\n        popupHide() {\r\n            this.showPopup = false;\r\n        },\r\n        toggleFilter(index: number, key: string) {\r\n            // Reset view to first page\r\n            this.currentPage = 0;\r\n\r\n            const indexof = this.filteredFilters[index].checked.indexOf(key);\r\n            if(indexof > -1) {\r\n                this.filteredFilters[index].checked.splice(indexof, 1);\r\n            } else {\r\n                this.filteredFilters[index].checked.push(key);\r\n            }\r\n\r\n            // Calculate new length\r\n            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n        },\r\n        navigate(set: number) {\r\n            if(set < 0) return;\r\n            if(set >= this.listLength) return;\r\n            this.currentPage = set;\r\n        },\r\n        prettyFormat(format: string) {\r\n            if(!format) return '';\r\n            else if(format == 'TV_SHORT') return 'TV Short';\r\n            else if([\"TV\", \"OVA\", \"ONA\"].indexOf(format) > -1) return format; \r\n            else return format[0] + format.slice(1).replace(\"_\", \" \").toLowerCase();\r\n        },\r\n        prettyStatus(status: string) {\r\n            return status[0] + status.slice(1).toLowerCase();\r\n        },\r\n        resolveIcon(status: string) {\r\n            switch(status) {\r\n                case 'CURRENT':\r\n                case 'REPEATING':\r\n                    return 'play'\r\n                case 'DROPPED':\r\n                    return 'stop'\r\n                case 'PAUSED':\r\n                    return 'pause'\r\n                case 'COMPLETED':\r\n                    return 'check'\r\n                default:\r\n                    return 'clock'\r\n                }\r\n        },\r\n        resolveColor(status: string) {\r\n            switch(status) {\r\n                case 'CURRENT':\r\n                    return '#2f754e'\r\n                case 'DROPPED':\r\n                    return '#a44646'\r\n                case 'PAUSED':\r\n                    return '#ad8015'\r\n                case 'COMPLETED':\r\n                    return '#14699b'\r\n                default:\r\n                    return '#595f6e'\r\n            }\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// CONTROLS\r\n.controls-input {\r\n    width: 100%;\r\n    padding: 10px;\r\n\r\n    font-size: 2em;\r\n    border-bottom: 3px solid var(--color-background-border);\r\n}\r\n\r\n.filter-name {\r\n    padding: 4px;\r\n}\r\n\r\n.filter-button {\r\n    appearance: none;\r\n    font: inherit;\r\n    color: inherit;\r\n    background: var(--color-background-secondary);\r\n    outline: none;\r\n    border: none;\r\n\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    font-weight: 500;\r\n\r\n    padding: 4px 12px;\r\n    margin: 4px;\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.selected {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n}\r\n// TABLE\r\n.tableHeader {\r\n    text-align: left;\r\n    font-weight: 500;\r\n}\r\n\r\n.tableRow {\r\n    cursor: pointer;\r\n    transition: .2s;\r\n\r\n    &:nth-child(even) {\r\n        background: var(--color-background-darker);\r\n    }\r\n\r\n    &:hover {\r\n        color: var(--color-text-blue);\r\n    }\r\n}\r\n\r\n.tableData, .tableHeader {\r\n    border-bottom: 2px solid var(--color-background-border);\r\n    //font-size: .9em;\r\n    padding: .5em 1em;\r\n}\r\n\r\n.tableData-title, .tableData-statusWrapper {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.tableData-image {\r\n    width: 24px;\r\n    height: 24px;\r\n    min-width: 24px;\r\n    \r\n    margin-right: 12px;\r\n    border-radius: 6px;\r\n    object-fit: cover;\r\n}\r\n\r\n.tableData-regular {\r\n    text-align: center;\r\n}\r\n\r\n.tableData-iconWrapper {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.tableHeader-title {\r\n    width: 100%;\r\n}\r\n\r\n.tableHeader-regular {\r\n    min-width: 96px;\r\n    text-align: center;\r\n}\r\n\r\n.loading {\r\n    padding: 12px;\r\n}\r\n\r\n// RESPONSIVITY\r\n\r\n\r\n@media screen and (max-width: 780px) {\r\n    .table-responsive {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 472px) {\r\n    .table-responsive2 {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 650px) {\r\n    .controls-filterGroup {\r\n        padding: 10px;\r\n        border-bottom: 3px solid var(--color-selected-background);\r\n    }\r\n\r\n    .filter-name {\r\n        display: block;\r\n        font-weight: 500;\r\n    }\r\n}\r\n</style>","import { ActivityDate, ActivityMedia } from '@/interfaces/activity';\r\nimport { fetchList } from './api';\r\nimport { newActivityDate } from './helpers';\r\nimport store, { weekdays } from './store';\r\n\r\nexport async function fetchMediaList(type: string): Promise<ActivityMedia[]> {\r\n    const r = await fetchList(store.state.userData.id, type)\r\n    const list = r.data.MediaListCollection.lists;\r\n\r\n    // Merge all lists into one, remove custom lists\r\n    const formatted = list.filter((x: any) => !x.isCustomList).map((x: any) => x.entries).flat(1);\r\n\r\n    const final: ActivityMedia[] = formatted.map((x: any): ActivityMedia[] => ({\r\n        ...x.media,\r\n        title: x.media.title.romaji,\r\n        type: x.media.type,\r\n        status: x.status,\r\n        cover: x.media.coverImage.medium,\r\n        banner: x.media.bannerImage,\r\n        progress: x.progress,\r\n        started: mapDates(x.startedAt),\r\n        completed: mapDates(x.completedAt),\r\n        added: newActivityDate(x.createdAt*1000)\r\n    })) \r\n    .sort((a: ActivityMedia, b: ActivityMedia) => a.title.localeCompare(b.title)); // Sort alphabetically\r\n\r\n    return final;\r\n}\r\n\r\n//performance goes brrr\r\nfunction mapDates(y: any): ActivityDate {\r\n    if(y.day == null) {\r\n        return {\r\n            d: 0,\r\n            m: 0,\r\n            y: 0,\r\n            time: 0\r\n        }\r\n    }\r\n\r\n    const date = new Date(y.year, y.month, y.day);\r\n\r\n    return {\r\n        d: y.day,\r\n        m: y.month,\r\n        y: y.year,\r\n        weekday: weekdays[date.getDay()],\r\n        time: date.getTime()\r\n    }\r\n}","<template>\r\n    <div class=\"popup\" @click=\"$event.stopPropagation()\">\r\n        <div class=\"header\" :style=\"{ backgroundImage: 'url('+media.banner+')' }\">\r\n            <img class=\"header-image\" :src=\"media.cover\">\r\n            <a :href=\"'https://anilist.co/'+media.type.toLowerCase()+'/'+media.id\" target=\"_blank\" rel=\"nofollow\"><div class=\"header-title\">{{ media.title }}</div></a>\r\n            <span style=\"flex: 1\"></span>\r\n            <div class=\"header-control\" @click=\"close\">\r\n                <font-awesome-icon icon=\"times\"></font-awesome-icon>\r\n            </div>\r\n        </div>\r\n        <div class=\"content\">\r\n            <SeriesDetails :media=\"media\"></SeriesDetails>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nimport SeriesDetails from '@/components/User/Details/SeriesDetails.vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: {}\r\n    },\r\n\r\n    components: { SeriesDetails },\r\n    \r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        close(): void {\r\n            this.$emit('close');\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.popup {\r\n    background: var(--color-background);\r\n    border-radius: var(--radius);\r\n\r\n    z-index: 2;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    justify-content: center;\r\n    padding: 10px 16px;\r\n\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n\r\n    height: 100px;\r\n    background-size: cover;\r\n}\r\n\r\n.header-image {\r\n    width: auto;\r\n    height: 80px;\r\n    object-fit: cover;\r\n\r\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);\r\n    border-radius: var(--radius);\r\n    margin-right: 6px;\r\n}\r\n\r\na {\r\n    color: inherit;\r\n}\r\n\r\n.header-title {\r\n    font-weight: 500;\r\n    font-size: 1em;\r\n\r\n    color: white;\r\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);\r\n    padding: 8px;\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.header-control {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    \r\n    width: 29px;\r\n    height: 29px;\r\n\r\n    text-align: center;\r\n    border-radius: 3px;\r\n\r\n    user-select: none;\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    margin-left: 6px;\r\n\r\n    &:hover {\r\n        background: var(--color-background-secondary);\r\n    }\r\n\r\n    &:active {\r\n        opacity: 0.7;\r\n    }\r\n}\r\n\r\n.header-title, .header-control {\r\n    background: rgba(0, 0, 0, 0.4);\r\n}\r\n\r\n.content {\r\n    max-height: 70vh;\r\n    overflow-y: auto;\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n    .popup {\r\n        margin: 10px;\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n@media screen and (min-width: 901px) {\r\n    .popup {\r\n        min-width: 500px;\r\n    }\r\n}\r\n</style>","\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nimport SeriesDetails from '@/components/User/Details/SeriesDetails.vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: {}\r\n    },\r\n\r\n    components: { SeriesDetails },\r\n    \r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        close(): void {\r\n            this.$emit('close');\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Popup.vue?vue&type=template&id=6eedf04c&scoped=true\"\nimport script from \"./Popup.vue?vue&type=script&lang=ts\"\nexport * from \"./Popup.vue?vue&type=script&lang=ts\"\n\nimport \"./Popup.vue?vue&type=style&index=0&id=6eedf04c&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6eedf04c\"\n\nexport default script","<template>\r\n    <div class=\"pager\">\r\n        <button class=\"pager-button pager-arrow\" @click=\"$emit('set', current-1)\">\r\n            <font-awesome-icon icon=\"chevron-left\"></font-awesome-icon>\r\n        </button>\r\n        <button class=\"pager-button\" v-for=\"i in max\" :key=\"i\" @click=\"$emit('set', i-1)\" :class=\"{ selected: current == i-1 }\">\r\n            {{ i }}\r\n        </button>\r\n        <button class=\"pager-button pager-arrow\" @click=\"$emit('set', current+1)\">\r\n            <font-awesome-icon icon=\"chevron-right\"></font-awesome-icon>\r\n        </button>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        current: Number,\r\n        max: Number\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.pager {\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n\r\n.pager-button {\r\n    appearance: none;\r\n    outline: none;\r\n    border: none;\r\n    color: inherit;\r\n    background: inherit;\r\n    font: inherit;\r\n\r\n    padding: 8px;\r\n    margin: 4px 2px;\r\n\r\n    text-align: center;\r\n    border-radius: 3px;\r\n\r\n    font-weight: 500;\r\n\r\n    cursor: arrow;\r\n\r\n    transition: background .2s ease;\r\n\r\n    &:not(.selected):hover {\r\n        background: var(--color-selected-background);\r\n    }\r\n}\r\n\r\n.pager-arrow {\r\n    padding: 8px 24px;\r\n    margin: 4px;\r\n    background: var(--color-background-darker);\r\n}\r\n\r\n.selected {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text)\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        current: Number,\r\n        max: Number\r\n    }\r\n})\r\n","import { render } from \"./Pagination.vue?vue&type=template&id=5120db18&scoped=true\"\nimport script from \"./Pagination.vue?vue&type=script&lang=ts\"\nexport * from \"./Pagination.vue?vue&type=script&lang=ts\"\n\nimport \"./Pagination.vue?vue&type=style&index=0&id=5120db18&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-5120db18\"\n\nexport default script","\r\nimport { defineComponent } from \"vue\";\r\n\r\nimport store from '@/store/store';\r\nimport { fetchMediaList } from \"@/store/lists\";\r\nimport { prettyDate } from \"@/store/helpers\";\r\n\r\nimport { ActivityMedia } from \"@/interfaces/activity\";\r\nimport { Filter } from '@/interfaces/filters';\r\n\r\nimport Popup from './Popup.vue';\r\nimport Pagination from './Pagination.vue';\r\n\r\nexport default defineComponent({\r\n    components: { Popup, Pagination },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate: prettyDate,\r\n\r\n            loading: true,\r\n            displayCover: -1,\r\n\r\n            showPopup: false,\r\n            popupMedia: {} as ActivityMedia,\r\n\r\n            pageSize: 100, // size of one page\r\n            currentPage: 0, // we're using computer-friendly numbers here\r\n            listLength: 0,\r\n\r\n            query: \"\",\r\n            filters: [\r\n                {\r\n                    name: \"Status\",\r\n                    key: \"status\",\r\n                    type: \"both\",\r\n                    values: [\r\n                        {\r\n                            animeName: \"Watching\",\r\n                            mangaName: \"Reading\",\r\n                            key: \"CURRENT\"\r\n                        },\r\n                        {\r\n                            animeName: \"Rewatching\",\r\n                            mangaName: \"Rereading\",\r\n                            key: \"REPEATING\"\r\n                        },\r\n                        {\r\n                            name: \"Completed\",\r\n                            key: \"COMPLETED\"\r\n                        },\r\n                        {\r\n                            name: \"Planning\",\r\n                            key: \"PLANNING\"\r\n                        },\r\n                        {\r\n                            name: \"Dropped\",\r\n                            key: \"DROPPED\"\r\n                        },\r\n                        {\r\n                            name: \"Paused\",\r\n                            key: \"PAUSED\"\r\n                        }\r\n                    ],\r\n                    checked: [\"COMPLETED\", \"CURRENT\", \"REPEATING\"]\r\n                },\r\n                {\r\n                    name: \"Type\",\r\n                    key: \"format\",\r\n                    type: \"anime\",\r\n                    values: [\r\n                        {\r\n                            name: \"TV\",\r\n                            key: \"TV\"\r\n                        },\r\n                        {\r\n                            name: \"TV Short\",\r\n                            key: \"TV_SHORT\"\r\n                        },\r\n                        {\r\n                            name: \"Movie\",\r\n                            key: \"MOVIE\"\r\n                        },\r\n                        {\r\n                            name: \"Special\",\r\n                            key: \"SPECIAL\"\r\n                        },\r\n                        {\r\n                            name: \"OVA\",\r\n                            key: \"OVA\"\r\n                        },\r\n                        {\r\n                            name: \"ONA\",\r\n                            key: \"ONA\"\r\n                        },\r\n                        {\r\n                            name: \"Music\",\r\n                            key: \"MUSIC\"\r\n                        }\r\n                    ],\r\n                    checked: [\"TV\", \"TV_SHORT\", \"MOVIE\", \"SPECIAL\", \"OVA\", \"ONA\", \"MUSIC\"]\r\n                },\r\n                {\r\n                    name: \"Type\",\r\n                    key: \"format\",\r\n                    type: \"manga\",\r\n                    values: [\r\n                        {\r\n                            name: \"Manga\",\r\n                            key: \"MANGA\"\r\n                        },\r\n                        {\r\n                            name: \"Light novel\",\r\n                            key: \"NOVEL\"\r\n                        },\r\n                        {\r\n                            name: \"One shot\",\r\n                            key: \"ONE_SHOT\"\r\n                        }\r\n                    ],\r\n                    checked: [\"MANGA\", \"NOVEL\", \"ONE_SHOT\"]\r\n                }\r\n            ]\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.fetchData();\r\n    },\r\n\r\n    watch: {\r\n        '$route': 'fetchData',\r\n        query() {\r\n            this.currentPage = 0;\r\n\r\n            // Calculate new length\r\n            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        list(): ActivityMedia[] {\r\n            const raw: ActivityMedia[] = (this.$route.name == \"AnimeList\" ? this.state.animeList : this.state.mangaList);\r\n            \r\n            // For starters, we filter the list by user's search query (if there's none, this function will just do nothing)\r\n            \r\n            let filtered: ActivityMedia[] = raw.filter(item => item.title.toLowerCase().indexOf(this.query.toLowerCase()) > -1);\r\n            \r\n            // Loop through each applicable filter and apply it\r\n            this.filteredFilters.forEach(filter => {\r\n                filtered = filtered.filter((x: any) => filter.checked.indexOf(x[filter.key]) > -1)\r\n            })\r\n            return filtered;\r\n        },\r\n        paginatedList(): ActivityMedia[] {\r\n            return this.list.slice(this.currentPage * this.pageSize, (this.currentPage + 1) * this.pageSize)\r\n        },\r\n        filteredFilters(): Filter[] {\r\n            return this.filters.filter(filter => {\r\n                if(this.$route.name == \"AnimeList\" && filter.type == \"manga\") return false;\r\n                else if(this.$route.name == \"MangaList\" && filter.type == \"anime\") return false;\r\n                else return true;\r\n            });\r\n        }\r\n    },\r\n\r\n    directives: {\r\n        lazyload: {\r\n            mounted(el): any {\r\n                el.src = el.dataset.src;\r\n            }\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        fetchData() {\r\n            // setTimeout is here, because without it, the DOM has a short lag (when the list is large, at least.). That way, the DOM has a lag as well,\r\n            // but it's once 'List' component is visible to the user, and \"Loading...\" label is displayed, which surely improves user experience.\r\n            this.loading = true;\r\n            this.currentPage = 0;\r\n            this.listLength = 0;\r\n            setTimeout(() => {\r\n                if(this.$route.name == \"AnimeList\") {\r\n                    if(this.state.animeList.length == 0) {\r\n                        fetchMediaList(\"ANIME\")\r\n                        .then(list => {\r\n                            store.setAnimeList(list);\r\n                            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                            this.loading = false;\r\n                        })\r\n                    } else {\r\n                        this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                        this.loading = false;\r\n                    }\r\n                } else if (this.$route.name == \"MangaList\") {\r\n                    if(this.state.mangaList.length == 0) {\r\n                        fetchMediaList(\"MANGA\")\r\n                        .then(list => {\r\n                            store.setMangaList(list);\r\n                            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                            this.loading = false;\r\n\r\n                        })\r\n                    } else {\r\n                        this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                        this.loading = false;\r\n                    }\r\n                }\r\n            }, 100)\r\n            \r\n        },\r\n        popupShow(media: ActivityMedia) {\r\n            this.showPopup = true;\r\n            this.popupMedia = media;\r\n        },\r\n        popupHide() {\r\n            this.showPopup = false;\r\n        },\r\n        toggleFilter(index: number, key: string) {\r\n            // Reset view to first page\r\n            this.currentPage = 0;\r\n\r\n            const indexof = this.filteredFilters[index].checked.indexOf(key);\r\n            if(indexof > -1) {\r\n                this.filteredFilters[index].checked.splice(indexof, 1);\r\n            } else {\r\n                this.filteredFilters[index].checked.push(key);\r\n            }\r\n\r\n            // Calculate new length\r\n            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n        },\r\n        navigate(set: number) {\r\n            if(set < 0) return;\r\n            if(set >= this.listLength) return;\r\n            this.currentPage = set;\r\n        },\r\n        prettyFormat(format: string) {\r\n            if(!format) return '';\r\n            else if(format == 'TV_SHORT') return 'TV Short';\r\n            else if([\"TV\", \"OVA\", \"ONA\"].indexOf(format) > -1) return format; \r\n            else return format[0] + format.slice(1).replace(\"_\", \" \").toLowerCase();\r\n        },\r\n        prettyStatus(status: string) {\r\n            return status[0] + status.slice(1).toLowerCase();\r\n        },\r\n        resolveIcon(status: string) {\r\n            switch(status) {\r\n                case 'CURRENT':\r\n                case 'REPEATING':\r\n                    return 'play'\r\n                case 'DROPPED':\r\n                    return 'stop'\r\n                case 'PAUSED':\r\n                    return 'pause'\r\n                case 'COMPLETED':\r\n                    return 'check'\r\n                default:\r\n                    return 'clock'\r\n                }\r\n        },\r\n        resolveColor(status: string) {\r\n            switch(status) {\r\n                case 'CURRENT':\r\n                    return '#2f754e'\r\n                case 'DROPPED':\r\n                    return '#a44646'\r\n                case 'PAUSED':\r\n                    return '#ad8015'\r\n                case 'COMPLETED':\r\n                    return '#14699b'\r\n                default:\r\n                    return '#595f6e'\r\n            }\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./List.vue?vue&type=template&id=ada47df6&scoped=true\"\nimport script from \"./List.vue?vue&type=script&lang=ts\"\nexport * from \"./List.vue?vue&type=script&lang=ts\"\n\nimport \"./List.vue?vue&type=style&index=0&id=ada47df6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-ada47df6\"\n\nexport default script","<template>\r\n    <div class=\"history\">\r\n        <transition name=\"popup-backdrop\">\r\n            <div class=\"popup-backdrop\" v-if=\"showPopup\" @click=\"popupHide\">\r\n                <transition appear name=\"popup\">\r\n                    <Popup :media=\"popupMedia\" @close=\"popupHide\"></Popup>\r\n                </transition>\r\n            </div>\r\n        </transition>\r\n        <div class=\"loading\" v-if=\"loading\">\r\n            Loading...\r\n        </div>\r\n        <div v-else>\r\n            <div class=\"header header-desktop\">\r\n                <div class=\"month\"></div>\r\n                <div class=\"month\">Jan</div>\r\n                <div class=\"month\">Feb</div>\r\n                <div class=\"month\">Mar</div>\r\n                <div class=\"month\">Apr</div>\r\n                <div class=\"month\">May</div>\r\n                <div class=\"month\">Jun</div>\r\n                <div class=\"month\">Jul</div>\r\n                <div class=\"month\">Aug</div>\r\n                <div class=\"month\">Sep</div>\r\n                <div class=\"month\">Oct</div>\r\n                <div class=\"month\">Nov</div>\r\n                <div class=\"month\">Dec</div>\r\n            </div>\r\n            <div class=\"header header-mobile\">\r\n                <div class=\"month\"></div>\r\n                <div class=\"month\" v-for=\"i in 12\" :key=\"i\">{{ i }}</div>\r\n            </div>\r\n            <div class=\"row\" v-for=\"year in years\" :key=\"year\">\r\n                <div class=\"col-year\">{{ year.year }}</div>\r\n                <div class=\"col\" v-for=\"(month, i) in 12\" :key=\"i\" @click=\"load(month, year.year)\">\r\n                    <div class=\"col-bg\" :style=\"{ opacity: year.months[i] ? getOpacity(year.months[i].count) : 0 }\"></div>\r\n                    <div class=\"col-label\">{{ year.months[i] ? year.months[i].count : 0 }}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"missing\" v-if=\"unknownCount\">There are {{ unknownCount }} titles with unknown completed date.</div>\r\n            <div class=\"details\">\r\n                <div class=\"details-content\" v-if=\"selectedMonth && selectedYear\">\r\n                    <div class=\"details-title\">{{ $route.name == \"AnimeHistory\" ? \"Anime\" : \"Manga\" }} completed in {{ monthNames[selectedMonth-1] }} of {{ selectedYear }} ({{ selected.length }})</div>\r\n                    <div class=\"details-list\">\r\n                        <div class=\"details-entry\" v-for=\"entry in selected\" :key=\"entry.id\" @click=\"popupShow(entry)\">\r\n                            <img class=\"entry-image\" :src=\"entry.cover\">\r\n                            <div class=\"entry-title\">\r\n                                {{ entry.title }}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div v-else>\r\n                    Choose a month above to see details on it.\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { ActivityMedia } from '@/interfaces/activity';\r\nimport { fetchMediaList } from '@/store/lists';\r\nimport store, { monthNames } from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nimport Popup from '@/components/List/Popup.vue';\r\n\r\ninterface Year {\r\n    year: number;\r\n    months: {\r\n        count: number;\r\n    }[];\r\n}\r\n\r\nexport default defineComponent({\r\n    components: { Popup },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            loading: false,\r\n            monthNames,\r\n\r\n            years: [] as Year[],\r\n            unknownCount: 0,\r\n            max: 0,\r\n\r\n            showPopup: false,\r\n            popupMedia: {} as ActivityMedia,\r\n\r\n            selected: [] as ActivityMedia[],\r\n            selectedMonth: 0,\r\n            selectedYear: 0,\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.fetchData();\r\n    },\r\n\r\n    watch: {\r\n        '$route': 'fetchData'\r\n    },\r\n\r\n    computed: {\r\n        list(): ActivityMedia[] {\r\n            const filtered: ActivityMedia[] = (this.$route.name == \"AnimeHistory\" ? this.state.animeList : this.state.mangaList);\r\n\r\n            return filtered;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        fetchData() {\r\n            this.clear();\r\n            this.loading = true;\r\n            if(this.$route.name == \"AnimeHistory\") {\r\n                if(this.state.animeList.length == 0) {\r\n                    fetchMediaList(\"ANIME\")\r\n                    .then(list => {\r\n                        store.setAnimeList(list);\r\n                        this.parseData();\r\n                    })\r\n                } else {\r\n                    this.parseData();\r\n                }\r\n            } else if (this.$route.name == \"MangaHistory\") {\r\n                if(this.state.mangaList.length == 0) {\r\n                    fetchMediaList(\"MANGA\")\r\n                    .then(list => {\r\n                        store.setMangaList(list);\r\n                        this.parseData();\r\n                    })\r\n                } else {\r\n                    this.parseData();\r\n                }\r\n            }\r\n        },\r\n\r\n        parseData() {\r\n            let currentYear = new Date().getFullYear();\r\n\r\n            let progress = true;\r\n\r\n            while(progress) {\r\n                const zeros = this.checkYear(currentYear);\r\n                if(zeros < 12) {\r\n                    currentYear--;\r\n                } else {\r\n                    const lesser = this.list.filter(x => x.completed && x.completed?.y < currentYear && x.completed?.y != 0);\r\n                    if(lesser.length == 0) {\r\n                        progress = false;\r\n                        this.years.pop(); // the last, empty year is appended to array of years, so we have to remove it manually here.\r\n                    } else {\r\n                        currentYear--;\r\n                    }\r\n                }\r\n\r\n                if(currentYear < 2000) {\r\n                    progress = false;\r\n                }\r\n            }\r\n            \r\n            this.unknownCount = this.list.filter(x => x.status == \"COMPLETED\" && x.completed?.y == 0).length;\r\n\r\n            this.loading = false;\r\n        },\r\n    \r\n        checkYear(year: number): number {\r\n            let zeroCount = 0;\r\n            for (let i = 1; i < 13; i++) {\r\n                const targetYear = this.years.find(m => m.year == year);\r\n                const filtered = this.list.filter(x => x.completed?.m == i && x.completed?.y == year);\r\n\r\n                if(filtered.length == 0) zeroCount++;\r\n                if(filtered.length > this.max) this.max = filtered.length;\r\n                if(targetYear) {\r\n                    targetYear.months[i-1] = {\r\n                        count: filtered.length\r\n                    }\r\n                } else {\r\n                    const obj: Year = {\r\n                        year: year,\r\n                        months: []\r\n                    }\r\n\r\n                    obj.months[i-1] = {\r\n                        count: filtered.length\r\n                    }\r\n\r\n                    this.years.push(obj);\r\n                }\r\n            }\r\n\r\n            return zeroCount;\r\n        },\r\n\r\n        popupShow(media: ActivityMedia) {\r\n            this.showPopup = true;\r\n            this.popupMedia = media;\r\n        },\r\n\r\n        popupHide() {\r\n            this.showPopup = false;\r\n        },\r\n\r\n        load(month: number, year: number) {\r\n            const matches = this.list.filter(entry => entry.completed?.m == month && entry.completed?.y == year);\r\n            this.selectedMonth = month;\r\n            this.selectedYear = year;\r\n            this.selected = matches;\r\n        },\r\n\r\n        clear() {\r\n            this.years = [];\r\n            this.max = 0;\r\n            this.unknownCount = 0;\r\n\r\n            this.selected = [];\r\n            this.selectedMonth = 0;\r\n            this.selectedYear = 0;\r\n        },\r\n\r\n        getOpacity(count: number): number {\r\n            const ratio = count / this.max;\r\n\r\n            return ratio;\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.row, .header {\r\n    display: grid;\r\n    grid-template-columns: repeat(13, 1fr);\r\n}\r\n\r\n.col, .col-year {\r\n    margin: 3px;\r\n    \r\n    border-radius: 4px;\r\n    text-align: center;\r\n    font-weight: 500;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n\r\n    cursor: pointer;\r\n    position: relative;\r\n\r\n    transition: .2s;\r\n\r\n    border: 1px solid transparent;\r\n}\r\n\r\n.col:hover {\r\n    border: 1px solid var(--color-selected-text);\r\n}\r\n\r\n.col-bg {\r\n    background: var(--color-background-day);\r\n    position: absolute;\r\n    border-radius: 4px;\r\n\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n\r\n    z-index: 0;\r\n}\r\n\r\n.col-label {\r\n    z-index: 1;\r\n}\r\n\r\n.missing {\r\n    margin: 10px;\r\n    font-weight: 500;\r\n    text-align: center;\r\n}\r\n\r\n.details {\r\n    margin: 10px;\r\n}\r\n\r\n.details-entry {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    margin: 10px;\r\n\r\n    transition: .2s;\r\n\r\n    &:hover {\r\n        color: var(--color-text-blue);\r\n    }\r\n}\r\n\r\n.entry-image {\r\n    width: 32px;\r\n    height: 32px;\r\n    min-width: 32px;\r\n\r\n    border-radius: var(--radius);\r\n    object-fit: cover;\r\n\r\n    margin: 0 12px;\r\n}\r\n\r\n.entry-title {\r\n    cursor: pointer;\r\n}\r\n\r\n.month {\r\n    text-align: center;\r\n    font-weight: 600;\r\n    border-bottom: 1px solid var(--color-background-border);\r\n}\r\n@media screen and (min-width: 651px) {\r\n    .col, .col-year {\r\n        padding: 12px 12px 8px 12px;\r\n    }\r\n\r\n    .month {\r\n        padding: 12px;\r\n    }\r\n\r\n    .header-mobile {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 650px) {\r\n    .col-label {\r\n        visibility: hidden;\r\n    }\r\n\r\n    .header-desktop {\r\n        display: none;\r\n    }\r\n\r\n    .month {\r\n        font-size: .86em;\r\n    }\r\n\r\n    .month:first-child {\r\n        width: 40px;\r\n        margin: 3px;\r\n    }\r\n}\r\n</style>","\r\nimport { ActivityMedia } from '@/interfaces/activity';\r\nimport { fetchMediaList } from '@/store/lists';\r\nimport store, { monthNames } from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nimport Popup from '@/components/List/Popup.vue';\r\n\r\ninterface Year {\r\n    year: number;\r\n    months: {\r\n        count: number;\r\n    }[];\r\n}\r\n\r\nexport default defineComponent({\r\n    components: { Popup },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            loading: false,\r\n            monthNames,\r\n\r\n            years: [] as Year[],\r\n            unknownCount: 0,\r\n            max: 0,\r\n\r\n            showPopup: false,\r\n            popupMedia: {} as ActivityMedia,\r\n\r\n            selected: [] as ActivityMedia[],\r\n            selectedMonth: 0,\r\n            selectedYear: 0,\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.fetchData();\r\n    },\r\n\r\n    watch: {\r\n        '$route': 'fetchData'\r\n    },\r\n\r\n    computed: {\r\n        list(): ActivityMedia[] {\r\n            const filtered: ActivityMedia[] = (this.$route.name == \"AnimeHistory\" ? this.state.animeList : this.state.mangaList);\r\n\r\n            return filtered;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        fetchData() {\r\n            this.clear();\r\n            this.loading = true;\r\n            if(this.$route.name == \"AnimeHistory\") {\r\n                if(this.state.animeList.length == 0) {\r\n                    fetchMediaList(\"ANIME\")\r\n                    .then(list => {\r\n                        store.setAnimeList(list);\r\n                        this.parseData();\r\n                    })\r\n                } else {\r\n                    this.parseData();\r\n                }\r\n            } else if (this.$route.name == \"MangaHistory\") {\r\n                if(this.state.mangaList.length == 0) {\r\n                    fetchMediaList(\"MANGA\")\r\n                    .then(list => {\r\n                        store.setMangaList(list);\r\n                        this.parseData();\r\n                    })\r\n                } else {\r\n                    this.parseData();\r\n                }\r\n            }\r\n        },\r\n\r\n        parseData() {\r\n            let currentYear = new Date().getFullYear();\r\n\r\n            let progress = true;\r\n\r\n            while(progress) {\r\n                const zeros = this.checkYear(currentYear);\r\n                if(zeros < 12) {\r\n                    currentYear--;\r\n                } else {\r\n                    const lesser = this.list.filter(x => x.completed && x.completed?.y < currentYear && x.completed?.y != 0);\r\n                    if(lesser.length == 0) {\r\n                        progress = false;\r\n                        this.years.pop(); // the last, empty year is appended to array of years, so we have to remove it manually here.\r\n                    } else {\r\n                        currentYear--;\r\n                    }\r\n                }\r\n\r\n                if(currentYear < 2000) {\r\n                    progress = false;\r\n                }\r\n            }\r\n            \r\n            this.unknownCount = this.list.filter(x => x.status == \"COMPLETED\" && x.completed?.y == 0).length;\r\n\r\n            this.loading = false;\r\n        },\r\n    \r\n        checkYear(year: number): number {\r\n            let zeroCount = 0;\r\n            for (let i = 1; i < 13; i++) {\r\n                const targetYear = this.years.find(m => m.year == year);\r\n                const filtered = this.list.filter(x => x.completed?.m == i && x.completed?.y == year);\r\n\r\n                if(filtered.length == 0) zeroCount++;\r\n                if(filtered.length > this.max) this.max = filtered.length;\r\n                if(targetYear) {\r\n                    targetYear.months[i-1] = {\r\n                        count: filtered.length\r\n                    }\r\n                } else {\r\n                    const obj: Year = {\r\n                        year: year,\r\n                        months: []\r\n                    }\r\n\r\n                    obj.months[i-1] = {\r\n                        count: filtered.length\r\n                    }\r\n\r\n                    this.years.push(obj);\r\n                }\r\n            }\r\n\r\n            return zeroCount;\r\n        },\r\n\r\n        popupShow(media: ActivityMedia) {\r\n            this.showPopup = true;\r\n            this.popupMedia = media;\r\n        },\r\n\r\n        popupHide() {\r\n            this.showPopup = false;\r\n        },\r\n\r\n        load(month: number, year: number) {\r\n            const matches = this.list.filter(entry => entry.completed?.m == month && entry.completed?.y == year);\r\n            this.selectedMonth = month;\r\n            this.selectedYear = year;\r\n            this.selected = matches;\r\n        },\r\n\r\n        clear() {\r\n            this.years = [];\r\n            this.max = 0;\r\n            this.unknownCount = 0;\r\n\r\n            this.selected = [];\r\n            this.selectedMonth = 0;\r\n            this.selectedYear = 0;\r\n        },\r\n\r\n        getOpacity(count: number): number {\r\n            const ratio = count / this.max;\r\n\r\n            return ratio;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./History.vue?vue&type=template&id=3294c33b&scoped=true\"\nimport script from \"./History.vue?vue&type=script&lang=ts\"\nexport * from \"./History.vue?vue&type=script&lang=ts\"\n\nimport \"./History.vue?vue&type=style&index=0&id=3294c33b&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3294c33b\"\n\nexport default script","import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router'\r\nimport Home from '../views/Home.vue'\r\nimport User from '../views/User.vue';\r\n\r\nimport Main from '../components/User/Main.vue';\r\nimport List from '../components/List/List.vue';\r\nimport History from '../components/History/History.vue';\r\n\r\nconst routes: Array<RouteRecordRaw> = [\r\n  {\r\n    path: '/',\r\n    name: 'Home',\r\n    component: Home\r\n  },\r\n  {\r\n    path: '/:user',\r\n    name: 'User',\r\n    component: User,\r\n    children: [\r\n      {\r\n        path: '',\r\n        component: Main\r\n      },\r\n      {\r\n        path: 'list/anime',\r\n        component: List,\r\n        name: \"AnimeList\",\r\n        props: {\r\n          type: 'anime'\r\n        }\r\n      },\r\n      {\r\n        path: 'list/manga',\r\n        component: List,\r\n        name: \"MangaList\",\r\n        props: {\r\n          type: 'manga'\r\n        }\r\n      },\r\n      {\r\n        path: 'history/anime',\r\n        component: History,\r\n        name: \"AnimeHistory\"\r\n      },\r\n      {\r\n        path: 'history/manga',\r\n        component: History,\r\n        name: \"MangaHistory\"\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nimport { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { faBookOpen, faChevronRight, faCog, faInfo, faLightbulb, faMoon, faQuestionCircle, faRandom, faList, faUserCircle, faChevronLeft, faTimes, faHistory, faPlay, faStop, faPause, faCheck, faClock, faBars, faRedoAlt } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\r\n\r\nlibrary.add(faCog, faChevronLeft, faChevronRight, faQuestionCircle, faMoon, faLightbulb, faInfo, faUserCircle, faBookOpen, faList, faRandom, faTimes, faHistory, faPlay, faStop, faPause, faCheck, faClock, faBars, faRedoAlt)\r\n\r\ncreateApp(App).use(router).component('font-awesome-icon', FontAwesomeIcon).mount('#app')\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Sidebar.vue?vue&type=style&index=0&id=0a18f476&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Loading.vue?vue&type=style&index=0&id=64c13412&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MenuItem.vue?vue&type=style&index=0&id=1903ee1d&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Popup.vue?vue&type=style&index=0&id=6eedf04c&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./List.vue?vue&type=style&index=0&id=ada47df6&lang=scss&scoped=true\""],"sourceRoot":""}