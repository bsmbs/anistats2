{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/User/ActivityChart.vue?ddff","webpack:///./src/components/User/Chart.vue?d2b0","webpack:///./src/components/Switch.vue?323a","webpack:///./src/components/CheapLoading.vue?3dd3","webpack:///./src/views/User.vue?6902","webpack:///./src/components/History/History.vue?9c19","webpack:///./src/components/User/Details/SeriesItem.vue?bd17","webpack:///./src/components/User/Tooltip.vue?bd72","webpack:///./src/views/Special.vue?85b3","webpack:///./src/components/User/Calendar.vue?20ee","webpack:///./src/components/Home/Settings.vue?32a3","webpack:///./src/views/Home.vue?ff41","webpack:///./src/components/User/ActivityChart.vue?3933","webpack:///./src/components/User/DataRange.vue?33f4","webpack:///./src/components/List/Pagination.vue?c342","webpack:///./src/components/User/Sidebar.vue?3d04","webpack:///./src/components/Home/SettingsSwitcher.vue?3ef6","webpack:///./src/components/Home/Panel.vue?acdf","webpack:///./src/assets/merge.png","webpack:///./src/components/Home/Logo.vue?7d95","webpack:///./src/components/Button.vue?49e9","webpack:///./src/App.vue?2fff","webpack:///./src/components/User/Details/SeriesDetails.vue?6e59","webpack:///./src/components/User/Main.vue?15ec","webpack:///./src/components/Special/Help.vue?0a36","webpack:///./src/components/User/Details/DetailsContainer.vue?b611","webpack:///./src/App.vue","webpack:///./src/queries/activity.ts","webpack:///./src/queries/list.ts","webpack:///./src/queries/media.ts","webpack:///./src/queries/user.ts","webpack:///./src/store/api.ts","webpack:///./src/store/store.ts","webpack:///./src/store/helpers.ts","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?dfb6","webpack:///./src/views/Home.vue","webpack:///./src/components/Home/Logo.vue","webpack:///./src/components/Home/Logo.vue?21b9","webpack:///./src/components/Home/Logo.vue?5f56","webpack:///./src/components/Button.vue","webpack:///./src/components/Button.vue?0589","webpack:///./src/components/Button.vue?e107","webpack:///./src/components/Home/Settings.vue","webpack:///./src/components/Home/SettingsSwitcher.vue","webpack:///./src/components/Home/SettingsSwitcher.vue?5407","webpack:///./src/components/Home/SettingsSwitcher.vue?b1a3","webpack:///./src/components/Switch.vue","webpack:///./src/components/Switch.vue?587b","webpack:///./src/components/Switch.vue?e14d","webpack:///./src/components/Home/Settings.vue?1caf","webpack:///./src/components/Home/Settings.vue?5163","webpack:///./src/components/Home/Panel.vue","webpack:///./src/components/Home/Panel.vue?dec0","webpack:///./src/components/Home/Panel.vue?080d","webpack:///./src/views/Home.vue?d5e7","webpack:///./src/views/Home.vue?ab8c","webpack:///./src/views/Special.vue","webpack:///./src/views/Special.vue?4f00","webpack:///./src/views/Special.vue?68b7","webpack:///./src/views/User.vue","webpack:///./src/components/User/Loading.vue","webpack:///./src/components/User/Loading.vue?aba7","webpack:///./src/components/User/Loading.vue?03a1","webpack:///./src/components/User/Sidebar.vue","webpack:///./src/components/User/Sidebar/MenuItem.vue","webpack:///./src/components/User/Sidebar/MenuItem.vue?585b","webpack:///./src/components/User/Sidebar/MenuItem.vue?5230","webpack:///./src/components/User/Sidebar.vue?168c","webpack:///./src/components/User/Sidebar.vue?33a4","webpack:///./src/views/User.vue?2474","webpack:///./src/views/User.vue?a29a","webpack:///./src/components/Special/Help.vue","webpack:///./src/components/Special/Help.vue?8fbd","webpack:///./src/components/Special/Help.vue?c132","webpack:///./src/components/Special/About.vue","webpack:///./src/components/Special/About.vue?5693","webpack:///./src/components/Special/About.vue?6542","webpack:///./src/components/User/Main.vue","webpack:///./src/components/User/Details/DetailsContainer.vue","webpack:///./src/components/User/Details/SeriesItem.vue","webpack:///./src/components/User/Details/SeriesDetails.vue","webpack:///./src/components/CheapLoading.vue","webpack:///./src/components/CheapLoading.vue?6d1d","webpack:///./src/components/CheapLoading.vue?9b37","webpack:///./src/components/User/ActivityChart.vue","webpack:///./src/components/User/ActivityChart.vue?0790","webpack:///./src/components/User/ActivityChart.vue?3145","webpack:///./src/components/User/Details/SeriesDetails.vue?e970","webpack:///./src/components/User/Details/SeriesDetails.vue?f750","webpack:///./src/components/User/Details/SeriesItem.vue?d23d","webpack:///./src/components/User/Details/SeriesItem.vue?332b","webpack:///./src/components/User/Details/DetailsContainer.vue?9c99","webpack:///./src/components/User/Details/DetailsContainer.vue?8914","webpack:///./src/components/User/Calendar.vue","webpack:///./src/components/User/Calendar.vue?d309","webpack:///./src/components/User/Calendar.vue?b2e9","webpack:///./src/components/User/DataRange.vue","webpack:///./src/components/User/DataRange.vue?b68b","webpack:///./src/components/User/DataRange.vue?932e","webpack:///./src/components/User/Tooltip.vue","webpack:///./src/components/User/Tooltip.vue?1584","webpack:///./src/components/User/Tooltip.vue?439d","webpack:///./src/components/User/Chart.vue","webpack:///./src/components/User/Chart.vue?b487","webpack:///./src/components/User/Chart.vue?4ccc","webpack:///./src/components/User/Main.vue?6c3e","webpack:///./src/components/User/Main.vue?f9ec","webpack:///./src/components/List/List.vue","webpack:///./src/store/lists.ts","webpack:///./src/components/List/Popup.vue","webpack:///./src/components/List/Popup.vue?80c0","webpack:///./src/components/List/Popup.vue?938f","webpack:///./src/components/List/Pagination.vue","webpack:///./src/components/List/Pagination.vue?b350","webpack:///./src/components/List/Pagination.vue?1154","webpack:///./src/components/List/List.vue?71c9","webpack:///./src/components/List/List.vue?e016","webpack:///./src/components/History/History.vue","webpack:///./src/components/History/History.vue?1288","webpack:///./src/components/History/History.vue?4804","webpack:///./src/router/index.ts","webpack:///./src/main.ts","webpack:///./src/components/User/Loading.vue?ebca","webpack:///./src/components/User/Sidebar/MenuItem.vue?9c6a","webpack:///./src/components/List/Popup.vue?71d1","webpack:///./src/components/List/List.vue?8800"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","activityQuery","listQuery","mediaQuery","userQuery","anilistRequest","query","variables","fetch","method","headers","body","JSON","stringify","response","json","fetchUserData","username","fetchMedia","id","media","page","perPage","mediaId","userId","fetchList","type","fetchActivity","mediaType","from","to","undefined","compareDates","a","b","y","weekdays","monthNames","debug","state","userData","avatar","activities","preloadedActivities","currentPage","updateHour","saveSettings","animeList","mangaList","setUserdata","obj","this","User","medium","incrementCurrentPage","appendActivities","concat","destroy","e","setSettings","setPreloadedActivities","setAnimeList","list","setMangaList","parseActivities","days","forEach","timestamp","Date","createdAt","getHours","setDate","getDate","range","activityDateObject","getMonth","getFullYear","weekday","getDay","time","getTime","episodes","chapters","status","progress","split","parseInt","title","romaji","cover","coverImage","sameDay","find","x","day","mediaObject","formatObj","Intl","DateTimeFormat","formatToParts","dateFormat","map","join","prettyDate","date","replace","String","newActivityDate","dateObject","findAddedDate","raws","plan","act","startsWith","document","classList","contains","remove","localStorage","setItem","add","store","created","getItem","Number","theme","mounted","$nextTick","then","render","class","style","href","size","error","icon","toggleSettings","loading","placeholder","send","settings","props","__scopeId","fixed-width","color","setting","desc","options","default","handleSelect","$event","model-value","save","toggleSave","option","chosen","select","capitalize","Array","cho","methods","toUpperCase","$emit","checked","modelValue","target","for","Boolean","emits","components","SettingsSwitcher","Switch","val","toLowerCase","buildTimestamp","lightMode","computed","documentElement","dataset","Logo","Button","Settings","Panel","show","$route","showError","url","URL","pathname","process","removeItem","console","log","$router","resp","catch","setTimeout","showSidebar","toggleSidebar","loadEarlierActivities","emitToggle","toggleTheme","params","user","MenuItem","Loading","Sidebar","lock","lastPage","loadActivites","path","Page","pageInfo","preloadActivites","preloaded","nextPage","duplicates","filter","dup","indexToRemove","indexOf","old","src","showTooltip","popupHide","load","showPopup","fetchPopup","tooltipActivities","popupLoading","height","row","stamp","toggleDisplay","alt","details","hide","added","ref","mouseDown","mouseUp","mouseMove","mouseLeave","required","margin","top","bottom","dragging","startX","scrollLeft","watch","clean","node","$refs","area","lastChild","removeChild","dir","columnWidth","width","svg","append","attr","domain","countArray","line","curve","datum","selectAll","text","pageX","chart","offsetLeft","walk","CheapLoading","ActivityChart","rawActivities","reverse","SeriesDetails","SeriesItem","displayMonth","toggleYearPicker","update","showYearPicker","pickerYears","year","loadMonth","firstWeekday","handleClick","notLoaded","notYetHappened","getOpacity","max","now","preparePickers","firstDay","count","daysInMonth","Math","latestActivity","latestDay","lastActivity","lastDay","month","format","event","change","ratio","lastLoadedDay","close","selected","DetailsContainer","Calendar","Tooltip","DataRange","Chart","begin","end","cellspacing","appear","popupMedia","filteredFilters","values","toggleFilter","animeName","mangaName","listLength","navigate","current","paginatedList","popupShow","data-src","prettyFormat","completed","prettyStatus","resolveColor","resolveIcon","fetchMediaList","MediaListCollection","lists","formatted","isCustomList","entries","flat","final","banner","bannerImage","started","mapDates","startedAt","completedAt","sort","localeCompare","stopPropagation","rel","Popup","Pagination","displayCover","pageSize","filters","fetchData","ceil","raw","filtered","item","directives","lazyload","el","index","indexof","set","years","months","unknownCount","selectedMonth","selectedYear","entry","clear","parseData","currentYear","zeros","checkYear","lesser","pop","zeroCount","targetYear","matches","routes","component","Home","Special","children","Help","About","Main","List","History","router","history","App","use","mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,cAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,+HCvJT,W,6DCAA,W,2DCAA,W,6GCAA,W,oCCAA,W,kCCAA,W,oCCAA,W,2DCAA,W,oCCAA,W,oCCAA,W,yDCAA,W,2DCAA,W,kCCAA,W,oCCAA,W,2JCAA,W,oCCAA,W,yGCAA,W,oCCAA,W,uBCAAW,EAAOD,QAAU,IAA0B,0B,kCCA3C,W,2DCAA,W,6GCAA,W,kCCAA,W,yDCAA,W,kCCAA,W,kCCAA,W,qLCCA,eAAc,G,sFCAD+B,G,oBAAa,4tBCAbC,EAAS,k8BCATC,EAAU,2zBCEVC,EAAS,uICGf,SAAeC,EAAtB,oC,8DAAO,WAA8BC,EAAeC,GAA7C,yGACoBC,MAAM,6BAA8B,CACvDC,OAAQ,OACRC,QAAS,CACL,eAAgB,kCAEpBC,KAAMC,KAAKC,UAAU,CAAEP,QAAOC,gBAN/B,cACGO,EADH,gBASkBA,EAASC,OAT3B,cASGtD,EATH,yBAUIA,GAVJ,2C,wBAaA,SAAeuD,EAAtB,kC,8DAAO,WAA6BC,GAA7B,0GACIZ,EAAeD,EAAW,CAAEa,cADhC,2C,wBAIA,SAAeC,EAAtB,oC,8DAAO,WAA0BC,EAAYC,GAAtC,8FACGb,EAAY,CACdc,KAAM,EACNC,QAAS,GACTC,QAASH,EACTI,OAAQL,GALT,kBAQId,EAAeF,EAAYI,IAR/B,2C,wBAWA,SAAekB,EAAtB,oC,8DAAO,WAAyBN,EAAYO,GAArC,8FACGnB,EAAY,CACdiB,OAAQL,EACRO,QAHD,kBAMIrB,EAAeH,EAAWK,IAN9B,2C,wBASA,SAAeoB,EAAtB,0C,8DAAO,WAA6BR,EAAYE,EAAcO,EAAmBC,EAAeC,GAAzF,gGACCJ,OAAOK,EAEM,SAAbH,EACAF,EAAO,aACa,SAAbE,IACPF,EAAO,cAGLnB,EAAY,CACdc,OACAC,QAAS,GACTE,OAAQL,EACRO,OACAG,OACAC,MAfD,kBAkBIzB,EAAeJ,EAAeM,IAlBlC,2C,wBAqBD,SAAUyB,EAAaC,EAAiBC,GAC1C,OAAQD,EAAE1D,GAAK2D,EAAE3D,GAAK0D,EAAE5D,GAAK6D,EAAE7D,GAAK4D,EAAEE,GAAKD,EAAEC,EC7D1C,IAAMC,EAAW,CAAC,SAAU,SAAU,UAAW,YAAa,WAAY,SAAU,YAC9EC,EAAa,CAAC,UAAU,WAAW,QAAQ,QAAQ,MAAM,OAAO,OAAQ,SAAS,YAAY,UAAU,WAAW,YAEhH,GACXC,OAAO,EAEPC,MAAO,eAAS,CACZC,SAAU,CACNrB,GAAI,EACJF,SAAU,GACVwB,OAAQ,IAEZC,WAAY,GACZC,oBAAqB,GACrBC,YAAa,EACbC,WAAY,EACZjB,UAAW,OACXkB,cAAc,EACdC,UAAW,GACXC,UAAW,KAGfC,YAnBW,SAmBCC,GACRC,KAAKZ,MAAMC,SAASrB,GAAK+B,EAAI9G,KAAKgH,KAAKjC,GACvCgC,KAAKZ,MAAMC,SAASvB,SAAWiC,EAAI9G,KAAKgH,KAAK5E,KAC7C2E,KAAKZ,MAAMC,SAASC,OAASS,EAAI9G,KAAKgH,KAAKX,OAAOY,QAGtDC,qBAzBW,WA0BPH,KAAKZ,MAAMK,eAGfW,iBA7BW,SA6BMb,GAEb,OADAS,KAAKZ,MAAMG,WAAaS,KAAKZ,MAAMG,WAAWc,OAAOd,GAC9CS,KAAKZ,MAAMG,YAGtBe,QAlCW,WAmCPN,KAAKZ,MAAMK,YAAc,EACzBO,KAAKZ,MAAMG,WAAa,GACxBS,KAAKZ,MAAMI,oBAAsB,GACjCQ,KAAKZ,MAAMQ,UAAY,GACvBI,KAAKZ,MAAMS,UAAY,IAG3BF,aA1CW,SA0CEY,GACTP,KAAKZ,MAAMO,aAAeY,GAG9BC,YA9CW,SA8CCjF,GAKRyE,KAAKM,UACD,eAAgB/E,IAAGyE,KAAKZ,MAAMM,WAAanE,EAAEmE,YAC7C,cAAenE,GAAKA,EAAEkD,YAAWuB,KAAKZ,MAAMX,UAAYlD,EAAEkD,YAGlEgC,uBAxDW,SAwDYlB,GACnBS,KAAKZ,MAAMI,oBAAsBD,GAGrCmB,aA5DW,SA4DEC,GACTX,KAAKZ,MAAMQ,UAAYe,GAG3BC,aAhEW,SAgEED,GACTX,KAAKZ,MAAMS,UAAYc,GAG3BE,gBApEW,SAoEKtB,GAAe,WACrBuB,EAAsB,GAuF5B,OArFAvB,EAAWwB,SAAQ,SAACjC,GAChB,IAAMkC,EAAY,IAAIC,KAAmB,IAAdnC,EAAEoC,WAE1BF,EAAUG,WAAa,EAAK/B,MAAMM,YAEjCsB,EAAUI,QAAQJ,EAAUK,UAAY,GAG5C,IAWIC,EAXEC,EAAmC,CACrCnG,EAAG4F,EAAUK,UACbnG,EAAG8F,EAAUQ,WAAa,EAC1BxC,EAAGgC,EAAUS,cACbC,QAASzC,EAAS+B,EAAUW,UAC5BC,KAAMZ,EAAUa,WAIhBC,EAAW,EACXC,EAAW,EAGf,OAAOjD,EAAEkD,QACL,IAAK,kBACL,IAAK,oBACDV,EAAQxC,EAAEmD,SAASC,MAAM,OAErBJ,EADe,GAAhBR,EAAM7H,OACM0I,SAASb,EAAM,IAAMa,SAASb,EAAM,IAAM,EAEzC,EAChB,MACJ,IAAK,eACL,IAAK,iBACDA,EAAQxC,EAAEmD,SAASC,MAAM,OAErBH,EADe,GAAhBT,EAAM7H,OACM0I,SAASb,EAAM,IAAMa,SAASb,EAAM,IAAM,EAEzC,EAChB,MACJ,IAAK,YACkB,SAAhBxC,EAAEb,MAAMM,KAAiBuD,EAAW,EAClCC,EAAW,EAChB,MACJ,QACI,OAIR,IAAM9D,EAAuB,CACzBD,GAAIc,EAAEb,MAAMD,GACZO,KAAMO,EAAEb,MAAMM,KACd6D,MAAOtD,EAAEb,MAAMmE,MAAMC,OACrBC,MAAOxD,EAAEb,MAAMsE,WAAWrC,OAC1B4B,SAAWA,GAAsBC,GAI/BS,EAAmC1B,EAAK2B,MAAK,SAAAC,GAAC,OAAI7D,EAAa6D,EAAEC,IAAKpB,MAG5E,GAAGiB,EAAS,CACRA,EAAQV,UAAYA,EACpBU,EAAQT,UAAYA,EAGpB,IAAMa,EAAcJ,EAAQvE,MAAMwE,MAAK,SAAAC,GAAC,OAAIA,EAAE1E,IAAMC,EAAMD,IAAM0E,EAAEnE,MAAQN,EAAMM,QAC7EqE,EACwB,SAApBA,EAAYrE,KACXqE,EAAYd,UAAYA,EAExBc,EAAYd,UAAYC,EAG5BS,EAAQvE,MAAMlE,KAAKkE,QAIvB6C,EAAK/G,KAAK,CACN4I,IAAKpB,EACLO,WACAC,WACA9D,MAAQA,EAAQ,CAACA,GAAS,QAK/B6C,IChKT+B,G,yCAAY,IAAIC,KAAKC,gBAAiBC,cAAc,IAAI/B,OAExDgC,EAAaJ,EAAUK,KAAI,SAAAnD,GAC7B,OAAQA,EAAIxB,MACR,IAAK,MACD,MAAO,KACX,IAAK,QACD,MAAO,KACX,IAAK,OACD,MAAO,OACX,QACI,OAAOwB,EAAIjE,UAEpBqH,KAAK,IAEF,SAAUC,EAAWC,GACvB,OAAgB,GAAbA,EAAKzB,KAAkB,UACnBqB,EAAWK,QAAQ,KAAMC,OAAOF,EAAKjI,IAAIkI,QAAQ,KAAOD,EAAKnI,GAAK,GAAKqI,OAAOF,EAAKnI,GAAK,IAAIqI,OAAOF,EAAKnI,IAAMoI,QAAQ,OAAQC,OAAOF,EAAKrE,IAG/I,SAAUwE,EAAgBxC,GAC5B,IAAMyC,EAAa,IAAIxC,KAAKD,GAE5B,MAAO,CACH5F,EAAGqI,EAAWpC,UACdnG,EAAGuI,EAAWjC,WAAa,EAC3BxC,EAAGyE,EAAWhC,cACdC,QAASzC,EAASwE,EAAW9B,UAC7BC,KAAM6B,EAAW5B,WAInB,SAAU6B,EAAcC,GAC1B,IAAMC,EAAOD,EAAKlB,MAAK,SAACoB,GAAD,OAAcA,EAAI7B,OAAO8B,WAAW,YAC3D,GAAIF,EACC,CACD,IAAM5C,EAAY,IAAIC,KAAsB,IAAjB2C,EAAK1C,WAE1BK,EAAmC,CACrCnG,EAAG4F,EAAUK,UACbnG,EAAG8F,EAAUQ,WAAa,EAC1BxC,EAAGgC,EAAUS,cACbC,QAASzC,EAAS+B,EAAUW,UAC5BC,KAAMZ,EAAUa,WAEpB,OAAQ+B,EAAOR,EAAW7B,GAAsB,UAX1C,MAAO,UAgBf,SAAU,IACTwC,SAASvG,KAAKwG,UAAUC,SAAS,qBAChCF,SAASvG,KAAKwG,UAAUE,OAAO,oBAC/BvH,OAAOwH,aAAaC,QAAQ,QAAS,UAGrCL,SAASvG,KAAKwG,UAAUK,IAAI,oBAE5B1H,OAAOwH,aAAaC,QAAQ,QAAS,UCxD9B,qBAAgB,CAC3BnL,KAD2B,WAEvB,MAAO,CACHmG,MAAOkF,EAAMlF,QAIrBmF,QAP2B,WASzB,IAAM7E,EAAayE,aAAaK,QAAQ,cAClC/F,EAAY0F,aAAaK,QAAQ,aAEnC9E,GAAcjB,IAChB6F,EAAM3E,cAAa,GACnB2E,EAAM9D,YAAY,CAChBd,WAAY+E,OAAO/E,GACnBjB,eAIJ,IAAMiG,EAAQP,aAAaK,QAAQ,SACvB,SAATE,GACD,KAIJC,QA1B2B,WA2BzB3E,KAAK4E,YAAYC,MAAK,kB,UC3B5B,EAAOC,OAAS,EAED,Q,yFCNRC,MAAM,a,EAET,eAA4N,QAAtNA,MAAM,WAAS,C,eAAC,2BAAuB,eAAuD,QAAjDC,MAAA,kCAAsC,Q,eAAW,+DAA2D,eAAqD,KAAlDC,KAAK,sCAAqC,Q,eAAQ,O,YAE5MF,MAAM,S,GAETA,MAAM,S,GACJA,MAAM,0B,iBACkC,Y,GAGxCA,MAAM,0B,iBACkC,Y,GAG1CA,MAAM,kB,GACJA,MAAM,kB,iBACkC,Y,GAExCA,MAAM,kB,iBACkC,Y,GAG1CA,MAAM,Y,uLAvBb,eA+BM,MA/BN,EA+BM,CA9BJ,eAAwB,GAAlBG,KAAK,QACX,EACA,eAEa,QAFD7J,KAAK,aAAW,C,WAC1B,iBAA8D,CAApC,EAAA8J,MAAM1L,OAAM,G,iBAAtC,eAA8D,OAA9D,EAA8D,eAAf,EAAA0L,OAAK,I,gCAEtD,eAQM,MARN,EAQM,CAPJ,eAEM,MAFN,EAEM,CADJ,eAA4D,GAApDC,KAAK,MAAO,QAAO,EAAAC,gB,YAAgB,iBAAQ,C,2CAErD,eAAuK,SAAhKN,MAAK,CAAC,WAAU,eAA0B,EAAAI,MAAM1L,OAAM,QAAa,EAAA6L,UAAWC,YAAY,iBAAiBhH,KAAK,O,qDAAgB,EAAAT,SAAQ,IAAG,QAAK,8CAAQ,EAAA0H,MAAA,EAAAA,KAAA,qBAAI,a,kBAA5B,EAAA1H,YACvI,eAEM,MAFN,EAEM,CADJ,eAA4D,GAAnD,QAAO,EAAA0H,KAAMJ,KAAK,iB,YAAgB,iBAAQ,C,8BAGvD,eAOM,MAPN,EAOM,CANJ,eAEM,MAFN,EAEM,CADJ,eAA4D,GAApDA,KAAK,MAAO,QAAO,EAAAC,gB,YAAgB,iBAAQ,C,4BAErD,eAEM,MAFN,EAEM,CADJ,eAA4D,GAAnD,QAAO,EAAAG,KAAMJ,KAAK,iB,YAAgB,iBAAQ,C,8BAGvD,eAIM,MAJN,EAIM,CAHJ,eAEa,QAFD/J,KAAK,WAAWW,KAAK,U,YAC/B,iBAAqC,CAArB,EAAAyJ,U,iBAAhB,eAAqC,Y,kCAGzC,eAES,eADP,eAAe,U,4GC5Bb,eAA6B,QAAvBV,MAAM,QAAO,OAAG,G,EACtB,eAAkB,YAAZ,SAAK,G,wEAFf,eAGM,OAHDA,MAAM,OAAQC,MAAK,UAAc,EAAAE,O,CAClC,EACA,G,MCAO,iBAAgB,CAC3BQ,MAAO,CACHR,KAAM3B,U,UCAd,EAAOuB,OAAS,EAChB,EAAOa,UAAY,kBAEJ,S,+ECPHZ,MAAM,O,oHAAd,eAGS,SAHT,GAGS,CAFoB,EAAAK,M,iBAAzB,eAAoE,G,MAApCA,KAAM,EAAAA,KAAMF,KAAK,KAAKU,cAAA,I,wCACtD,eAA0B,aAApB,eAAa,wCCAZ,kBAAgB,CAC3BF,MAAO,CACHN,KAAM7B,OACNsC,MAAOtC,U,UCDf,GAAOuB,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,+ECPNZ,MAAM,Y,IACFA,MAAM,W,IAEEA,MAAM,kB,IACFA,MAAM,gB,IACNA,MAAM,gB,IAEVA,MAAM,kB,kBAMsD,iC,8IAb7E,eAcM,MAdN,GAcM,CAbF,eAUM,MAVN,GAUM,E,mBATF,eAQM,2BARsC,EAAAU,UAAQ,SAAvBK,EAASvM,G,wBAAtC,eAQM,OARDwL,MAAM,UAA4C3I,IAAK7C,G,CACxD,eAGM,MAHN,GAGM,CAFF,eAAkD,MAAlD,GAAkD,eAArBuM,EAAQzK,MAAI,GACzC,eAAkD,MAAlD,GAAkD,eAArByK,EAAQC,MAAI,KAE7C,eAEM,MAFN,GAEM,CADF,eAAgI,GAA7GC,QAASF,EAAQE,QAAUC,QAASH,EAAQG,QAAU,YAAS,mBAAE,EAAAC,aAAaC,EAAQ5M,K,2DAKrH,eAA+G,GAAvG8B,KAAK,OAAQ+K,cAAa,EAAAC,KAAO,sBAAoB,EAAAC,Y,aAAY,iBAA6B,C,qJCbrGvB,MAAM,Y,0EAAX,eAEM,MAFN,GAEM,E,mBADF,eAA0J,2BAAhH,EAAAiB,SAAO,SAArBO,EAAQhN,G,wBAApC,eAA0J,OAArJwL,MAAK,CAAC,SAAQ,UAA6DwB,GAAU,EAAAC,SAAtCpK,IAAK7C,EAA4C,QAAK,mBAAE,EAAAkN,OAAOF,K,eAAY,EAAAG,WAAWH,IAAM,mB,WCCzI,kBAAgB,CAC3Bb,MAAO,CACHM,QAASW,MACTV,QAAS1C,QAGbtK,KAN2B,WAOvB,MAAO,CACH2N,IAAK,GACLJ,OAAQ,KAIhB7B,QAb2B,WAcvB3E,KAAKwG,OAASxG,KAAKiG,SAGvBY,QAAS,CACLH,WADK,SACMH,GACP,OAAOA,EAAO,GAAGO,cAAgBP,EAAO1J,MAAM,IAGlD4J,OALK,SAKEF,GACHvG,KAAKwG,OAASD,EACdvG,KAAK+G,MAAM,YAAaR,O,UCtBpC,GAAOzB,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,0FCPX,eAKM,YAJF,eAGM,YAFF,eAA0I,SAAnIpH,KAAK,WAAYyI,QAAS,EAAAC,WAAa,QAAK,+BAAE,EAAAF,MAAK,oBAAsBZ,EAAOe,OAAOF,WAAWhJ,GAAI,EAAA3C,KAAM0J,MAAM,gB,0BACzH,eAA6D,SAArDoC,IAAK,EAAA9L,KAAM0J,MAAM,gB,CAAe,eAAa,kC,kBCDlD,kBAAgB,CAC3BW,MAAO,CACHuB,WAAYG,QACZ/L,KAAMkI,QAEV8D,MAAO,CAAC,uB,UCHZ,GAAOvC,OAAS,GAChB,GAAOa,UAAY,kBAEJ,UCDA,kBAAgB,CAC3B2B,WAAY,CAAEC,oBAAkBC,WAEhCvO,KAH2B,WAIvB,MAAO,CACHmG,MAAOkF,EAAMlF,MACbiH,MAAM,EACNZ,SAAU,CACN,CACIpK,KAAM,aACN0K,KAAM,uDACNC,QAAS,CAAC,OAAQ,QAAS,UAE/B,CACI3K,KAAM,yBACN0K,KAAM,sDACNC,QAAS,CAAC,OAAQ,MAAO,MAAO,MAAO,MAAO,WAM9DzB,QAtB2B,WAuBvBvE,KAAKyF,SAAS,GAAGQ,QAAUjG,KAAKZ,MAAMX,UACtCuB,KAAKyF,SAAS,GAAGQ,QAAmC,GAAzBjG,KAAKZ,MAAMM,WAAkB,OAASM,KAAKZ,MAAMM,WAAW,KAEvFM,KAAKqG,KAAOrG,KAAKZ,MAAMO,cAG3BkH,QAAS,CACLX,aADK,SACQ3F,EAAWhH,GACpB,IAAIkO,EAAMlH,EAAEmH,cACJ,GAALnO,EACC+K,EAAM9D,YAAY,CAAE/B,UAAWgJ,IACnB,GAALlO,IACE,QAALgH,EAAa+D,EAAM9D,YAAY,CAAEd,WAAY,IAC5C4E,EAAM9D,YAAY,CAAEd,WAAY+E,OAAOlE,EAAE1D,MAAM,GAAI,QAIhEyJ,WAXK,SAWM/F,GACPP,KAAKqG,KAAO9F,EACZ+D,EAAM3E,aAAaY,O,UC5C/B,GAAOuE,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,+ECPNZ,MAAM,kB,IACFA,MAAM,a,IACNA,MAAM,U,kBAEwC,S,kBACD,Q,8GALtD,eAOM,MAPN,GAOM,CANF,eAA0D,MAA1D,GAAuB,YAAS,eAAG,EAAA4C,gBAAc,GACjD,eAIM,MAJN,GAIM,CAHF,eAAgE,QAA1D5C,MAAM,cAAe,QAAK,8BAAE,EAAA6C,WAAA,EAAAA,UAAA,sBAAW,gBAC7C,eAAkE,GAArD7C,MAAM,cAAcpG,GAAG,Y,aAAW,iBAAK,C,aACpD,eAAgE,GAAnDoG,MAAM,cAAcpG,GAAG,W,aAAU,iBAAI,C,oBCF/C,kBAAgB,CAC3BkJ,SAAU,CACNF,eADM,WAEF,OAAO5D,SAAS+D,gBAAgBC,QAAQJ,iBAIhDd,QAAS,CACLe,UADK,WAED,Q,UCRZ,GAAO9C,OAAS,GAChB,GAAOa,UAAY,kBAEJ,UCGA,kBAAgB,CAC7B2B,WAAY,CAAEU,QAAMC,UAAQC,YAAUC,UAEtClP,KAH6B,WAI3B,MAAO,CACLmP,MAAM,EACN9C,SAAS,EACTG,UAAU,EAEV3H,SAAU,GACVqH,MAAO,GACP/F,MAAOkF,EAAMlF,QAIjBuF,QAf6B,WAgBG,KAA3B3E,KAAKqI,OAAOlL,MAAMgI,OACnBnF,KAAKsI,UAAU,2CAInBzB,QAAS,CAEPrB,KAFO,WAGL,GAAGxF,KAAKlC,SAASrE,OAAS,EACxB,OAAOuG,KAAKsI,UAAU,oCAGxB,GAAGtI,KAAKlC,SAASgG,WAAW,sBAC1B,IACE,IAAIyE,EAAM,IAAIC,IAAIxI,KAAKlC,UACvB,IAAGyK,EAAIE,SAAS3E,WAAW,UAKzB,KAAM,cAHN,IAAIhG,EAAWyK,EAAIE,SAASvG,MAAM,KAAK,GACvClC,KAAK0I,QAAQ5K,GAKjB,MAAOyC,GAELP,KAAKsI,UAAU/H,QAIdP,KAAKZ,MAAMO,cACZwE,aAAaC,QAAQ,aAAcb,OAAOvD,KAAKZ,MAAMM,aACrDyE,aAAaC,QAAQ,YAAapE,KAAKZ,MAAMX,aAE7C0F,aAAawE,WAAW,cACxBxE,aAAawE,WAAW,cAG1B3I,KAAKsF,SAAU,EACftF,KAAK0I,QAAQ1I,KAAKlC,WAItB4K,QArCO,SAqCC5K,GAAgB,WAEnBkC,KAAKZ,MAAMC,SAASvB,UAAYA,GAAYkC,KAAKZ,MAAMG,WAAW9F,OAAS,GAC5EmP,QAAQC,IAAI,YACZ7I,KAAK8I,QAAQ/O,KAAK,IAAI+D,IAEtBD,EAAcC,GACb+G,MAAK,SAAAkE,GACJzE,EAAMhE,UACNgE,EAAMxE,YAAYiJ,GAClB,EAAKD,QAAQ/O,KAAK,IAAI+D,MAEvBkL,OAAM,WACL,EAAKV,UAAU,gDAKrBA,UAvDO,SAuDG/H,GAAS,WACjBP,KAAKsF,SAAU,EACftF,KAAKmF,MAAQ5E,EACb0I,YAAW,WACT,EAAK9D,MAAQ,KACZ,MAGLE,eA/DO,WAgELrF,KAAKyF,UAAYzF,KAAKyF,a,UC3F5B,GAAOX,OAAS,EAChB,GAAOa,UAAY,kBAEJ,U,+ECPNZ,MAAM,a,IAEFA,MAAM,W,iMAFf,eASM,MATN,GASM,CARF,eAA0D,GAA7CpG,GAAG,KAAG,C,YAAC,iBAAwB,CAAxB,eAAwB,GAAlBuG,KAAK,Y,MAC/B,eAEM,MAFN,GAEM,CADF,eAA2B,KAG/B,eAES,eADL,eAAe,UCHZ,kBAAgB,CAC3BoC,WAAY,CAAEU,QAAMG,Y,UCDxB,GAAOrD,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,qFCNNZ,MAAM,Q,IAKFA,MAAM,W,IACFA,MAAM,iB,oPAPJ,EAAAO,S,iBAAf,eAAkC,a,iBAClC,eAcM,MAdN,GAcM,CAbF,eAGM,OAHDP,MAAK,CAAC,kBAAiB,wBAAmC,EAAAmE,e,CAC3D,eAA2C,GAAjC,SAAQ,EAAAC,eAAa,sB,GAGnC,eAQM,MARN,GAQM,CAPF,eAKM,MALN,GAKM,CAJF,eAEM,OAFDpE,MAAM,cAAe,QAAK,8BAAE,EAAAoE,eAAA,EAAAA,cAAA,sB,CAC7B,eAA2C,GAAxB/D,KAAK,OAAOF,KAAK,SAExC,eAAsE,GAAzDH,MAAM,IAAIpG,GAAG,K,aAAI,iBAA0B,CAA1B,eAA0B,GAApBuG,KAAK,c,QAE7C,eAAgE,GAAlD,cAAa,EAAAkE,uBAAqB,kC,qGCbnDrE,MAAM,a,GAEP,eAAqC,OAAhCA,MAAM,WAAU,cAAU,G,uGAFnC,eAGM,MAHN,GAGM,CAFF,eAAwB,GAAlBG,KAAK,QACX,QCCO,kBAAgB,CAC3BoC,WAAY,CAAEU,W,UCAlB,GAAOlD,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,+ECPNZ,MAAM,W,IACFA,MAAM,U,kBAM4C,Y,UAClDA,MAAM,Y,GACP,eAA0C,QAApCA,MAAM,mBAAkB,SAAK,G,kBACwB,Q,kBACM,W,UAEhEA,MAAM,Y,GACP,eAA0C,QAApCA,MAAM,mBAAkB,SAAK,G,kBAC6B,Q,kBACC,W,IAEhEA,MAAM,2B,kBAEsC,Q,kBACC,S,0MArBtD,eAuBM,MAvBN,GAuBM,CAtBF,eAIM,MAJN,GAIM,CAHF,eAEM,OAFDA,MAAM,cAAe,QAAK,8BAAE,EAAAsE,YAAA,EAAAA,WAAA,sB,CAC7B,eAA2C,GAAxBjE,KAAK,OAAOF,KAAK,WAG5C,eAAoE,GAAvDH,MAAM,IAAIpG,GAAG,K,aAAI,iBAAwB,CAAxB,eAAwB,GAAlBuG,KAAK,Y,MACzC,eAA0E,GAA/D,QAAO,EAAAmE,WAAYjE,KAAK,cAAczG,GAAG,I,aAAG,iBAAQ,C,2BACpB,SAAf,EAAAS,MAAMX,W,iBAAlC,eAIM,MAJN,GAIM,CAHF,GACA,eAA0E,GAA/D,QAAO,EAAA4K,WAAYjE,KAAK,OAAOzG,GAAG,e,aAAc,iBAAI,C,2BAC/D,eAAmF,GAAxE,QAAO,EAAA0K,WAAYjE,KAAK,UAAUzG,GAAG,kB,aAAiB,iBAAO,C,oDAEjC,SAAf,EAAAS,MAAMX,W,iBAAlC,eAIM,MAJN,GAIM,CAHF,GACA,eAA+E,GAApE,QAAO,EAAA4K,WAAYjE,KAAK,YAAYzG,GAAG,e,aAAc,iBAAI,C,2BACpE,eAAmF,GAAxE,QAAO,EAAA0K,WAAYjE,KAAK,UAAUzG,GAAG,kB,aAAiB,iBAAO,C,oDAE5E,eAIM,MAJN,GAIM,CAHF,eAAiE,QAA1D,QAAK,8BAAE,EAAA2K,aAAA,EAAAA,YAAA,qBAAavE,MAAM,cAAa,gBAC9C,eAA+D,GAAlDpG,GAAG,UAAUoG,MAAM,c,aAAa,iBAAI,C,aACjD,eAAiE,GAApDpG,GAAG,WAAWoG,MAAM,c,aAAa,iBAAK,C,mGCnB7CA,MAAM,S,oJAFpB,eAKc,GALApG,GAAE,IAAM,EAAA0J,OAAOkB,OAAOC,KAAK,EAAA7K,GAAIoG,MAAM,Y,aAC3C,iBAAwD,CAAxD,eAAwD,GAApCK,KAAM,EAAAA,KAAMF,KAAK,KAAKU,cAAA,I,iBAC1C,eAEO,OAFP,GAEO,CADH,eAAa,uC,kBCDd,kBAAgB,CAC3BF,MAAO,CACH/G,GAAI4E,OACJ6B,KAAM7B,U,UCDd,GAAOuB,OAAS,GAChB,GAAOa,UAAY,kBAEJ,UCAA,kBAAgB,CAC3B2B,WAAY,CAAEU,QAAMyB,aAEpBxQ,KAH2B,WAIvB,MAAO,CACHmG,MAAOkF,EAAMlF,QAIrByH,QAAS,CACLwC,WADK,WAEDrJ,KAAK+G,MAAM,WAGfuC,YALK,WAMD,Q,UClBZ,GAAOxE,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,aCGA,mBAAgB,CAC3B2B,WAAY,CAAEoC,WAASC,WAAS3B,SAEhC/O,KAH2B,WAIvB,MAAO,CACHqM,SAAS,EACTsE,MAAM,EACNC,SAAU,EACVzK,MAAOkF,EAAMlF,MAEb8J,aAAa,EAEb1J,oBAAqB,KAI7BmF,QAhB2B,WAgBpB,WAIC3E,KAAKZ,MAAMC,SAASrB,GASmB,GAAhCgC,KAAKZ,MAAMG,WAAW9F,OAC7BuG,KAAK8J,gBAEL9J,KAAKsF,SAAU,EAXfzH,EAAcmC,KAAKqI,OAAOkB,OAAOC,MAChC3E,MAAK,SAAAkE,GACFzE,EAAMxE,YAAYiJ,GAClB,EAAKe,mBAERd,OAAM,WACH,EAAKF,QAAQ/O,KAAK,CAAEgQ,KAAM,IAAK5M,MAAO,CAAEgI,MAAO,SAS3D0B,QAAS,CAELiD,cAFK,WAEQ,WACTtL,EAAcwB,KAAKZ,MAAMC,SAASrB,GAAIgC,KAAKZ,MAAMK,YAAaO,KAAKZ,MAAMX,WACxEoG,MAAK,SAAAkE,GACF,EAAKc,SAAWd,EAAK9P,KAAK+Q,KAAKC,SAASJ,SACxC,IAAMtK,EAAa+E,EAAMzD,gBAAgBkI,EAAK9P,KAAK+Q,KAAKzK,YAExD,GAAwB,GAArBA,EAAW9F,OACV,OAAO,EAAKqP,QAAQ/O,KAAK,CAAEgQ,KAAM,IAAK5M,MAAO,CAAEgI,MAAO,KAI1D,EAAK+E,iBAAiB3K,GACrBsF,MAAK,SAAAsF,GACF7F,EAAM7D,uBAAuB0J,GAE7B7F,EAAMlE,iBAAiBb,GACvB,EAAK+F,SAAU,SAM3B8D,sBAxBK,WAwBgB,WAEjB,IAAGpJ,KAAK4J,KAAR,CACA5J,KAAK4J,MAAO,EACZtF,EAAMnE,uBAEN,IAAMZ,EAAa+E,EAAMlE,iBAAiBJ,KAAKZ,MAAMI,qBACrDQ,KAAKkK,iBAAiB3K,GACrBsF,MAAK,SAAAsF,GACF7F,EAAM7D,uBAAuB0J,GAE7B,EAAKP,MAAO,OAKdM,iBAxCD,SAwCkB3K,GAAyB,qKACzC,EAAKH,MAAMK,aAAe,EAAKoK,SADU,yCACO,IADP,uBAGrBrL,EAAc,EAAKY,MAAMC,SAASrB,GAAI,EAAKoB,MAAMK,YAAc,EAAG,EAAKL,MAAMX,WAHxD,cAGtC2L,EAHsC,OAItC5K,EAAsB8E,EAAMzD,gBAAgBuJ,EAASnR,KAAK+Q,KAAKzK,YAK/D8K,EAAa7K,EAAoB8K,QAAO,SAAA5H,GAAC,OAAI7D,EAAa6D,EAAEC,IAAKpD,EAAWA,EAAW9F,OAAS,GAAGkJ,QACzG0H,EAAWtJ,SAAQ,SAAAwJ,GAEf,IAAMC,EAAgBhL,EAAoBiL,QAAQF,GAClD/K,EAAoB7E,OAAO6P,EAAe,GAI1C,IAAME,EAAMnL,EAAWA,EAAW9F,OAAS,GAC3CiR,EAAIzM,MAAQyM,EAAIzM,MAAMoC,OAAOkK,EAAItM,OACjCyM,EAAI5I,UAAYyI,EAAIzI,SACpB4I,EAAI3I,UAAYwI,EAAIxI,YApBoB,kBAuBrCvC,GAvBqC,8CA0BhD2J,cAlEK,WAmEDnJ,KAAKkJ,aAAelJ,KAAKkJ,gB,UC7GrC,GAAOpE,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,uGCPNZ,MAAM,Q,GACP,eAA0B,UAAtB,qBAAiB,G,kBAAK,6O,GAE1B,eAA6B,UAAzB,wBAAoB,G,GACxB,eAA4B,UAAxB,uBAAmB,G,GACvB,eAA8B,OAAzB4F,IAAA,MAAwB,S,GAC7B,eAAI,mB,GACJ,eAAyE,SAAtE,sEAAkE,G,kBAAI,iE,GAA6D,eAA6B,SAA1B,0BAAsB,G,kBAAI,sF,GAAkF,eAA+C,SAA5C,4CAAwC,G,GAChS,eAAI,mB,kBAAA,yD,GAEJ,eAAI,mB,GAAA,eAAI,mB,kBAAA,gJ,GAER,eAAI,mB,kBAAA,gQ,GAEwK,eAAU,SAAP,OAAG,G,kBAAI,c,GACtL,eAAI,mB,kBAAA,sJ,0EAfR,eAiBM,MAjBN,GAiBM,CAhBF,G,GAEA,GACA,GACA,GACA,GACA,G,GAAsI,G,GAA+G,GACrP,G,GAEA,GAAI,G,GAEJ,G,GAE4K,G,GAC5K,G,QCbO,kBAAgB,I,UCE/B,GAAO7F,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,GCNP,eAAc,UAAV,SAAK,G,GACT,eAAyJ,SAAtJ,sJAAkJ,G,GACrJ,eAAqG,U,eAAlG,0CAAsC,eAAuD,KAApDV,KAAK,wCAAuC,Q,eAAQ,O,oDAHpG,eAIM,YAHF,GACA,GACA,KCDO,sBAAgB,ICA/B,GAAOH,OAAS,GAED,U,+ECJNC,MAAM,Q,IAKFA,MAAM,Q,IAGFA,MAAM,a,UAEqBA,MAAM,W,kBAK8C,oB,kBACA,iB,oOAhB5F,eAmBM,MAnBN,GAmBM,CAlBF,eAEa,QAFD1J,KAAK,kBAAgB,C,YAC7B,iBAA+D,CAAtC,EAAAuP,a,iBAAzB,eAA+D,O,MAA1D7F,MAAM,QAA4B,QAAK,8BAAE,EAAA8F,WAAA,EAAAA,UAAA,wB,gCAGlD,eAYM,MAZN,GAYM,CAXF,eAA2C,GAA/B,cAAa,EAAAC,MAAI,0BAC7B,eAAsF,GAA3E,QAAO,EAAAC,UAAY,QAAO,EAAAzC,UAAY,eAAc,EAAA0C,Y,+CAC/D,eAMM,MANN,GAMM,CALF,eAIa,QAJD3P,KAAK,SAASW,KAAK,U,aAC3B,iBAEM,CAFK,EAAA4O,a,iBAAX,eAEM,MAFN,GAEM,CADF,eAAuF,GAA7EjI,IAAK,EAAAsI,kBAAoB,QAAO,EAAAJ,UAAYvF,QAAS,EAAA4F,c,yEAIJ,SAAf,EAAA9L,MAAMX,W,iBAA9D,eAA4G,G,MAApG0M,OAAQ,IAAKnN,GAAG,WAAWoN,IAAI,Y,aAA6C,iBAAgB,C,oCAC7B,SAAf,EAAAhM,MAAMX,W,iBAA9D,eAAyG,G,MAAjG0M,OAAQ,IAAKnN,GAAG,WAAWoN,IAAI,Y,aAA6C,iBAAa,C,sCAErG,eAAyD,GAAtC,cAAa,EAAAN,MAAI,+B,+EClBnC/F,MAAM,W,GACP,eAEM,OAFDA,MAAM,SAAQ,cAEnB,G,IAESA,MAAM,gB,IACFA,MAAM,c,IACDA,MAAM,W,IACNA,MAAM,Q,GAGhB,eAA6B,QAAvBC,MAAA,YAAe,S,UAChBD,MAAM,Q,IACFA,MAAM,c,GACX,eAAqC,OAAhCA,MAAM,aAAY,YAAQ,G,UAE9BA,MAAM,Q,IACFA,MAAM,c,GACX,eAAqC,OAAhCA,MAAM,aAAY,YAAQ,G,6GAlB/C,eA0BM,MA1BN,GA0BM,CAzBF,I,mBAGA,eAkBM,2BAlBgC,EAAA3F,MAAMG,YAAU,SAA3BoD,EAAKpJ,G,wBAAhC,eAkBM,OAlBDwL,MAAM,QAA8C3I,IAAK7C,G,CAC1D,eAeM,MAfN,GAeM,CAdF,eAGM,MAHN,GAGM,CAFF,eAAkD,OAAlD,GAAkD,eAAzBoJ,EAAIA,IAAIjB,SAAO,GACxC,eAAmD,OAAnD,GAAmD,eAA7B,EAAA0B,WAAWT,EAAIA,MAAG,KAG5C,GACuC,SAAf,EAAAvD,MAAMX,W,iBAA9B,eAGM,MAHN,GAGM,CAFF,eAAgD,MAAhD,GAAgD,eAArBkE,EAAIZ,UAAQ,GACvC,M,sBAEmC,SAAf,EAAA3C,MAAMX,W,iBAA9B,eAGM,MAHN,GAGM,CAFF,eAAgD,MAAhD,GAAgD,eAArBkE,EAAIb,UAAQ,GACvC,M,4CAGR,eAAoH,2BAAnFa,EAAI1E,OAAK,SAAtBA,EAAO1E,G,wBAA3B,eAAoH,GAAvE6C,IAAK7C,EAAI8R,MAAO1I,EAAIA,IAAIvH,EAAC,IAAKuH,EAAIA,IAAIzH,EAAE3B,EAAI0E,MAAOA,G,8CAEpG,eAES,UAFD8G,MAAM,eAAgB,QAAK,+BAAE,EAAAgC,MAAK,kBAAiB,kB,+ECvB1DhC,MAAM,gB,GAIH,eAA8B,QAAxBC,MAAA,YAAgB,S,IACjBD,MAAM,Q,IACDA,MAAM,c,IACNA,MAAM,a,gHAPxB,eAaM,MAbN,GAaM,CAZF,eAQM,OARDA,MAAM,OAAQ,QAAK,8BAAE,EAAAuG,eAAA,EAAAA,cAAA,sB,CACtB,eAA2E,OAAtEvG,MAAM,QAASwG,IAAG,kBAAoB,EAAAtN,MAAMmE,MAAQuI,IAAK,EAAA1M,MAAMqE,O,sBACpE,eAAiE,QAA3DyC,MAAM,QAAS3C,MAAO,EAAAnE,MAAMmE,O,eAAU,EAAAnE,MAAMmE,OAAK,aACvD,GACA,eAGM,MAHN,GAGM,CAFF,eAAoD,OAApD,GAAoD,eAAxB,EAAAnE,MAAM6D,UAAQ,GAC1C,eAAqF,OAArF,GAAqF,eAAhD,UAAV,EAAA7D,MAAMM,KAAI,8BAG7C,eAEa,QAFDlD,KAAK,WAAS,C,YACtB,iBAAqF,CAAhE,EAAAmQ,UAAY,EAAAC,M,iBAAjC,eAAqF,G,MAA7CJ,MAAO,EAAAA,MAAQpN,MAAO,EAAAA,O,gKCRjE8G,MAAM,W,IACFA,MAAM,U,GACP,eAEM,OAFDA,MAAM,YAAW,mBAEtB,G,IACKA,MAAM,a,gIARR,EAAAO,S,iBAAX,eAEM,UADF,eAA6B,O,iBAEjC,eAoBM,MApBN,GAoBM,CAnBF,eAOM,MAPN,GAOM,CANF,GAGA,eAEM,MAFN,GAEM,eADC,EAAAoG,OAAK,KAGhB,eAAqJ,GAArIP,OAAQ,IAAMnN,GAAI,EAAAC,MAAMD,GAAE,GAAI,EAAAqN,MAAQD,IAAe,SAAV,EAAAnN,MAAMM,KAAI,sBAAwCgB,WAAY,EAAAA,Y,uHCZxHwF,MAAM,W,0EAAX,eAEM,MAFN,GAAqB,mBCEV,kBAAgB,I,UCE/B,GAAOD,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,+ECLEZ,MAAM,Q,IAEGA,MAAM,a,IACNA,MAAM,gB,0EALxB,eAQM,OARDA,MAAM,QAAQ4G,IAAI,QAAS,YAAS,8BAAE,EAAAC,WAAA,EAAAA,UAAA,qBAAY,UAAO,8BAAE,EAAAC,SAAA,EAAAA,QAAA,qBAAU,YAAS,8BAAE,EAAAC,WAAA,EAAAA,UAAA,qBAAY,aAAU,8BAAE,EAAAC,YAAA,EAAAA,WAAA,sB,CACzG,eAAuC,OAAjC/N,GAAE,QAAU,EAAAA,GAAI2N,IAAI,Q,eAC1B,eAKM,MALN,GAKM,E,mBAJF,eAGM,2BAHgC,EAAApM,YAAU,SAArBoD,EAAKpJ,G,wBAAhC,eAGM,OAHDwL,MAAM,QAAwC3I,IAAK7C,G,CACpD,eAAwD,OAAxD,GAAwD,eAA7B,EAAA6J,WAAWT,EAAIA,MAAG,GAC7C,eAAuD,OAAvD,GAAuD,eAAzBA,EAAIA,IAAIjB,SAAO,Q,8BCGlD,kBAAgB,CAC3BgE,MAAO,CACHnG,WAAY,CACRhB,KAAMoI,MACNqF,UAAU,GAEdZ,IAAK,CACD7M,KAAMgF,OACNyI,UAAU,GAEdhO,GAAIuF,OACJ4H,OAAQ,CACJ5M,KAAMkG,OACNuH,UAAU,IAIlB/S,KAjB2B,WAkBvB,MAAO,CACHmG,MAAOkF,EAAMlF,MACbgE,aAEA6I,OAAQ,CAAEC,IAAK,GAAIC,OAAQ,IAE3BC,UAAU,EACVC,OAAQ,EACRC,WAAY,IAIpBC,MAAO,CACHhN,WAAY,WACRS,KAAKwM,QACLxM,KAAK8E,WAIbH,QArC2B,WAsCvB3E,KAAK8E,UAIT+B,QAAS,CACL2F,MADK,WAED,IAAMC,EAAQzM,KAAK0M,MAAMC,KACzB,MAAMF,EAAKG,UACPH,EAAKI,YAAYJ,EAAKG,YAG9B9H,OAPK,WAOC,WACF8D,QAAQkE,IAAI9M,KAAKT,YAEjB,IAAMwN,EAAc,IACdC,EAAQhN,KAAKT,WAAW9F,OAASsT,EAEjCE,EAAM,QAAU,SAASjN,KAAKhC,IACnCkP,OAAO,OACPC,KAAK,QAASH,GACdG,KAAK,SAAUnN,KAAKmL,OAASnL,KAAKiM,OAAOC,IAAMlM,KAAKiM,OAAOE,QAC3De,OAAO,KACPC,KAAK,YALM,uBAKuBnN,KAAKiM,OAAOC,IALnC,MAQNxJ,EAAI,UACT0K,OAAOpN,KAAKT,WAAW2D,KAAI,SAAAR,GAAC,OAAIU,EAAWV,EAAEC,SAC7CrB,MAAM,CAAC,EAAG0L,IAELK,EAAarN,KAAKT,WAAW2D,KAAI,SAACR,GAAD,OAAYA,EAAE,EAAK0I,QAEpDpM,EAAI,UACToO,OAAO,CAAC,QAAOC,GAAa,QAAOA,KACnC/L,MAAM,CAACtB,KAAKmL,OAAQ,IAEfmC,EAAO,UACZ5K,GAAE,SAACtH,GACA,OAAOsH,EAAEU,EAAWhI,EAAEuH,MAAkBoK,EAAY,KAEvD/N,GAAE,SAAC5D,GAAD,OAAY4D,EAAE5D,EAAE,EAAKgQ,SACvBmC,MAAM,SAGPN,EAAIC,OAAO,QACVM,MAAMxN,KAAKT,YACX4N,KAAK,OAAQ,QACbA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,IAAKG,GAGXL,EAAIQ,UAAU,UACbxU,KAAK+G,KAAKT,YACV4D,KAAK,QACLuK,MAAK,SAACtS,GAAD,OAAYA,EAAE,EAAKgQ,QACxB+B,KAAK,QAAS,eACdA,KAAK,cAAe,UACpBA,KAAK,cAAe,OACpBA,KAAK,KAAK,SAAA/R,GAAC,OAAIsH,EAAEU,EAAWhI,EAAEuH,MAAkBoK,EAAY,KAC5DI,KAAK,KAAK,SAAC/R,GAAD,OAAY4D,EAAE5D,EAAE,EAAKgQ,MAAQ,MAGxC6B,EAAIQ,UAAU,WACbxU,KAAK+G,KAAKT,YACV4D,KAAK,UACLgK,KAAK,OAAQ,WACbA,KAAK,SAAU,QACfA,KAAK,eAAgB,OACrBA,KAAK,IAAK,GACVA,KAAK,MAAM,SAAA/R,GAAC,OAAIsH,EAAEU,EAAWhI,EAAEuH,MAAkBoK,EAAY,KAC7DI,KAAK,MAAM,SAAC/R,GAAD,OAAY4D,EAAE5D,EAAE,EAAKgQ,UAIrCQ,UAtEK,SAsEKrL,GACNP,KAAKoM,UAAW,EAChBpM,KAAKqM,OAAS9L,EAAEoN,MAAS3N,KAAK0M,MAAMkB,MAAyBC,WAC7D7N,KAAKsM,WAActM,KAAK0M,MAAMkB,MAAyBtB,YAG3DT,QA5EK,WA6ED7L,KAAKoM,UAAW,GAGpBN,UAhFK,SAgFKvL,GACN,GAAIP,KAAKoM,SAAT,CACA,IAAM1J,EAAInC,EAAEoN,MAAS3N,KAAK0M,MAAMkB,MAAyBC,WACnDC,EAA2B,KAAnBpL,EAAI1C,KAAKqM,QACtBrM,KAAK0M,MAAMkB,MAAyBtB,WAAatM,KAAKsM,WAAawB,IAGxE/B,WAvFK,WAwFD/L,KAAKoM,UAAW,M,oBCrI5B,GAAOtH,OAAS,GAChB,GAAOa,UAAY,kBAEJ,UCGA,kBAAgB,CAC3BD,MAAO,CACHzH,MAAO,GACPoN,MAAO9H,QAGX+D,WAAY,CAAEyG,gBAAcC,kBAE5B/U,KAR2B,WASvB,MAAO,CACHmG,MAAOkF,EAAMlF,MACbgE,aAEA7D,WAAY,GACZmM,MAAO,UAEPpG,SAAS,IAIjBX,QApB2B,WAoBpB,WACH5G,EAAWiC,KAAKZ,MAAMC,SAASrB,GAAIgC,KAAK/B,MAAMD,IAC7C6G,MAAK,SAAAkE,GACF,IAAMkF,EAAgBlF,EAAK9P,KAAK+Q,KAAKzK,WACrC,EAAKA,WAAa+E,EAAMzD,gBAAgBoN,GAAeC,UAEzB,oBAApB,EAAKjQ,MAAMyN,MACjB,EAAKA,MAAQhI,EAAcuK,GAE3B,EAAKvC,MAAkC,GAAzB,EAAKzN,MAAMyN,MAAM9J,KAAY,UAAYwB,EAAW,EAAKnF,MAAMyN,OAGjF,EAAKpG,SAAU,Q,UCvC3B,GAAOR,OAAS,GAChB,GAAOa,UAAY,kBAEJ,UCJA,kBAAgB,CAC3BD,MAAO,CACHzH,MAAOvE,OACP+R,KAAMrE,QACNiE,MAAO9H,QAGX+D,WAAY,CAAE6G,kBAEdlV,KAT2B,WAUvB,MAAO,CACHuS,SAAS,IAIjBe,MAAO,CACHd,KAAM,SAAShE,GACXzH,KAAKwL,SAAW/D,IAIxBZ,QAAS,CACLyE,cADK,WAEDtL,KAAK+G,MAAM,UACX/G,KAAKwL,SAAWxL,KAAKwL,Y,UCvBjC,GAAO1G,OAAS,GAChB,GAAOa,UAAY,kBAEJ,UCAA,kBAAgB,CAC3B2B,WAAY,CAAE8G,eAEdnV,KAH2B,WAIvB,MAAO,CACHmG,MAAOkF,EAAMlF,MACbgE,iB,UCTZ,GAAO0B,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,+ECPNZ,MAAM,Y,IACFA,MAAM,U,GACP,eAAwC,OAAnCA,MAAM,gBAAe,YAAQ,G,GAClC,eAA8B,QAAxBC,MAAA,YAAgB,S,IACjBD,MAAM,gB,IACDA,MAAM,oB,GACZ,eAAsB,2BAAb,MAAG,G,UAUfA,MAAM,U,IAGNA,MAAM,W,0YAUFA,MAAM,Q,4GA7BnB,eAwCM,MAxCN,GAwCM,CAvCF,eAcM,MAdN,GAcM,CAbF,GACA,GACA,eAIM,MAJN,GAIM,CAHF,eAAwD,OAAxD,GAAwD,eAAtB,EAAAsJ,cAAY,GAC9C,GACA,eAAsG,QAAhGtJ,MAAM,cAAe,QAAK,+BAAE,EAAAuJ,qBAAoBlM,MAAM,6B,eAA+B,EAAApD,GAAC,KAEhG,eAEM,OAFD+F,MAAM,iBAAkB,QAAK,+BAAE,EAAAwJ,QAAM,M,CACtC,eAA2D,GAAxCnJ,KAAK,mBAE5B,eAEM,OAFDL,MAAM,iBAAkB,QAAK,+BAAE,EAAAwJ,OAAM,M,CACtC,eAA4D,GAAzCnJ,KAAK,sBAGN,EAAAoJ,gB,iBAA1B,eAEM,MAFN,GAEM,E,mBADF,eAA8I,2BAAxG,EAAAC,aAAW,SAAnBC,G,wBAA9B,eAA8I,OAAzI3J,MAAK,CAAC,YAAW,UAA6D2J,GAAQ,EAAA1P,IAAvC5C,IAAKsS,EAAwC,QAAK,mBAAE,EAAAC,UAAU,EAAAzT,EAAC,EAAIwT,K,eAAUA,GAAI,mB,+BAEzI,eAoBM,MApBN,GAoBM,CAnBF,GASA,eASM,MATN,GASM,E,mBARF,eAOM,2BANiB,EAAA5N,MAAI,SAAf6B,EAAKpJ,G,wBADjB,eAOM,OAPDwL,MAAM,MACmB3I,IAAK7C,EAC9ByL,MAAa,GAALrC,EAAIrG,EAAC,YAAsB,EAAAsS,aAAY,MAC/C,QAAK,mBAAE,EAAAC,YAAY1I,EAAQxD,IAC3BP,MAAK,UAAK,EAAAiM,aAAL,YAAqB1L,EAAIrG,EAAzB,aAA+B,EAAA0C,EAA/B,iDAAyE2D,EAAImM,WAAanM,EAAIoM,eAAc,qG,CAClH,eAAyE,OAApEhK,MAAM,SAAUC,MAAK,SAAa,EAAAgK,WAAWrM,EAAIb,Y,QACtD,eAAkH,OAA7GiD,MAAM,YAAaC,MAAK,SAAcrC,EAAImM,WAAanM,EAAIoM,eAAc,W,eAAsBpM,EAAIrG,GAAC,I,0CChC9G,kBAAgB,CAC3BrD,KAD2B,WAEvB,MAAO,CACHmG,MAAOkF,EAAMlF,MACb0B,KAAM,GAEN9B,EAAG,KACH9D,EAAG,EAEHmT,aAAe,GACfO,aAAe,EACfK,IAAK,EAELT,gBAAgB,EAChBC,YAAa,KAIrB9J,QAAS,WACL,IAAMuK,EAAM,IAAIjO,KAEhBjB,KAAK9E,EAAIgU,EAAI1N,WACbxB,KAAKhB,EAAIkQ,EAAIzN,cAEbzB,KAAKmP,iBACLnP,KAAK2O,UAAU3O,KAAK9E,EAAG8E,KAAKhB,IAGhC6I,SAAU,CACNtI,WADM,WAEF,OAAOS,KAAKZ,MAAMG,aAI1BgN,MAAO,CACHhN,WADG,WAECS,KAAK2O,UAAU3O,KAAK9E,EAAI,EAAG8E,KAAKhB,KAIxC6H,QAAS,CACL8H,UADK,SACKzT,EAAW8D,GAAS,WAE1BgB,KAAKc,KAAKrH,OAAS,EAGnB,IAAI2V,EAAW,IAAInO,KAAKjC,EAAG9D,EAAG,GAG9B8E,KAAK4O,aAAeQ,EAASzN,SAG7B,IAAM0N,EAAQrP,KAAKsP,YAAYpU,EAAG8D,GAGlCgB,KAAKiP,IAAMM,KAAKN,IAAI7U,MAAMmV,KAAMvP,KAAKZ,MAAMG,WAAW2D,KAAI,SAAAR,GAAC,OAAIA,EAAEZ,SAAWY,EAAEX,aAE9E,IAAMyN,EAAiBxP,KAAKZ,MAAMG,WAAW,GACzCkQ,EAAoB,GAElBC,EAAe1P,KAAKZ,MAAMG,WAAWS,KAAKZ,MAAMG,WAAW9F,OAAS,GACtEkW,EAAkB,EAEnBD,EAAa/M,IAAIzH,GAAKA,EAAE,GAAKwU,EAAa/M,IAAI3D,GAAKA,EAClD2Q,EAAUD,EAAa/M,IAAIvH,GACpBsU,EAAa/M,IAAIzH,EAAIA,EAAE,GAAKwU,EAAa/M,IAAI3D,GAAKA,GAElD0Q,EAAa/M,IAAI3D,EAAIA,KAD5B2Q,EAAU,IAKXH,EAAe7M,IAAIzH,GAAKA,EAAE,GAAKsU,EAAe7M,IAAI3D,GAAKA,EACtDyQ,EAAYD,EAAe7M,IAAIvH,GACxBoU,EAAe7M,IAAIzH,EAAIA,EAAE,GAAKsU,EAAe7M,IAAI3D,GAAKA,GAEtDwQ,EAAe7M,IAAI3D,EAAIA,KAD9ByQ,EAAY,GAKhB,IAtC0B,eAsCjBlW,GACL,IAAMgG,EAAa,EAAKH,MAAMG,WAAWkD,MAAK,SAAAC,GAAC,OAAIA,EAAEC,IAAIvH,GAAK7B,GAAKmJ,EAAEC,IAAIzH,GAAKA,EAAE,GAAKwH,EAAEC,IAAI3D,GAAKA,KAChG,EAAK8B,KAAK/G,KAAK,CACXuC,EAAG/C,EACHgG,aACAuP,WAAYvP,GAAchG,EAAIoW,EAC9BZ,eAAgBxV,EAAIkW,EAEpB3N,SAAWvC,EAAaA,EAAWuC,SAAWvC,EAAWwC,SAAW,KARnExI,EAAI,EAAGA,GAAK8V,EAAO9V,IAAK,EAAxBA,GAaTyG,KAAK9E,EAAIA,EAAE,EACX8E,KAAKhB,EAAIA,EACTgB,KAAKqO,aAAe,IAAIvL,KAAKC,eAAe,UAAW,CAAE6M,MAAO,SAAUC,OAAOT,IAIrFP,YA1DK,SA0DOiB,EAAmBnN,GACxBA,EAAIpD,WACHS,KAAK+G,MAAM,QAAS,CAChB+I,QACAvQ,WAAYoD,EAAIpD,aAEZoD,EAAIpD,YAAeoD,EAAImM,UAEvBnM,EAAIoM,gBACZ/O,KAAK+G,MAAM,eAAgB,CACvB+I,QACA1U,EAAGuH,EAAIrG,EACPpB,EAAG8E,KAAK9E,EACR8D,EAAGgB,KAAKhB,IANZgB,KAAK+G,MAAM,QAAS,iDAW5BwH,OA5EK,SA4EEwB,GACAA,EAAS,EACJ/P,KAAK9E,EAAI,EAAI,IACb8E,KAAKhB,IACLgB,KAAK2O,UAAU,EAAG3O,KAAKhB,IAEvBgB,KAAK2O,UAAU3O,KAAK9E,EAAG8E,KAAKhB,GAG5BgB,KAAK9E,EAAI,EAAI,GACb8E,KAAKhB,IACLgB,KAAK2O,UAAU,GAAI3O,KAAKhB,IAExBgB,KAAK2O,UAAU3O,KAAK9E,EAAE,EAAG8E,KAAKhB,IAK1CsP,iBA9FK,WA+FDtO,KAAKwO,gBAAkBxO,KAAKwO,gBAGhCW,eAlGK,WAoGDnP,KAAKyO,YAAc,CAACzO,KAAKhB,EAAE,EAAGgB,KAAKhB,EAAE,EAAGgB,KAAKhB,EAAE,EAAGgB,KAAKhB,IAG3DsQ,YAvGK,SAuGOpU,EAAW8D,GACnB,OAAQ9D,GACJ,KAAK,EACD,OAAQ8D,EAAI,GAAK,GAAKA,EAAI,KAAQA,EAAI,KAAO,EAAI,GAAK,GAC1D,KAAK,EAAI,KAAK,EAAI,KAAK,EAAI,KAAK,GAC5B,OAAO,GACX,QACI,OAAO,KAInBgQ,WAlHK,SAkHMK,GACP,IAAMW,EAAQX,EAAQrP,KAAKiP,IAE3B,OAAa,GAATe,EAAmB,EACdA,EAAQ,IAAa,IAClBA,M,UC/JxB,GAAOlL,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,+ECPNZ,MAAM,a,GACP,eAA0C,OAArCA,MAAM,gBAAe,cAAU,G,GACpC,eAA8B,QAAxBC,MAAA,YAAgB,S,GAGlB,eAA2C,QAArCD,MAAM,gBAAe,aAAS,G,GAExC,eAA6B,QAAvBA,MAAM,WAAS,S,IACfA,MAAM,gB,oHARhB,eAaI,MAbJ,GAaI,CAZA,GACA,GACA,eAGM,OAHDA,MAAM,gBAAiB,QAAK,+BAAE,EAAAgC,MAAK,kB,CACpC,eAAuD,GAApC3B,KAAK,aACxB,KAEJ,GACA,eAA6D,OAA7D,GAA6D,eAA/B,EAAA6K,eAAgB,WAAQ,QCJ/C,kBAAgB,CAC3BhX,KAD2B,WAEvB,MAAO,CACHmG,MAAOkF,EAAMlF,QAIrByI,SAAU,CACNoI,cADM,WAEF,OAAO7M,EAAWpD,KAAKZ,MAAMG,WAAWS,KAAKZ,MAAMG,WAAW9F,OAAO,GAAGkJ,S,UCTpF,GAAOmC,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,+ECPNZ,MAAM,W,0BAKEA,MAAM,U,IACFA,MAAM,gB,GACX,eAA6B,QAAvBC,MAAA,YAAe,S,UAChBD,MAAM,Q,IACFA,MAAM,c,GACX,eAAsD,OAAjDA,MAAM,YAAY3C,MAAM,YAAW,YAAQ,G,UAE/C2C,MAAM,Q,IACFA,MAAM,c,GACX,eAAsD,OAAjDA,MAAM,YAAY3C,MAAM,YAAW,YAAQ,G,IAMnD2C,MAAM,W,oLApBnB,eAwBM,MAxBN,GAwBM,CAvBS,EAAAO,S,iBAAX,eAEM,UADF,eAA6B,O,iBAEjC,eAmBM,UAlBF,eAcM,MAdN,GAcM,CAbF,eAAyD,MAAzD,GAAyD,eAA5B,EAAAlC,WAAW,EAAAT,IAAIA,MAAG,GAC/C,GACwB,EAAAA,IAAIZ,SAAQ,G,iBAApC,eAGM,MAHN,GAGM,CAFF,eAAgD,MAAhD,GAAgD,eAArB,EAAAY,IAAIZ,UAAQ,GACvC,M,sBAEoB,EAAAY,IAAIb,SAAQ,G,iBAApC,eAGM,MAHN,GAGM,CAFF,eAAgD,MAAhD,GAAgD,eAArB,EAAAa,IAAIb,UAAQ,GACvC,M,sBAEJ,eAEM,OAFDiD,MAAM,iBAAkB,QAAK,8BAAE,EAAAmL,OAAA,EAAAA,MAAA,sB,CAChC,eAAoD,GAAjC9K,KAAK,cAGhC,eAEM,MAFN,GAEM,E,mBADF,eAAgI,2BAA/F,EAAAzC,IAAI1E,OAAK,SAAtBA,EAAO1E,G,wBAA3B,eAAgI,GAAnF6C,IAAK7C,EAAI0E,MAAOA,EAAQ,SAAM,mBAAE,EAAA4Q,YAAYtV,IAAKkS,KAAM,EAAA0E,UAAY5W,G,uDCfjH,kBAAgB,CAC3BmM,MAAO,CACH/C,IAAK,GACL2C,QAAS8B,SAGbE,WAAY,CAAE8G,cAAYL,iBAE1B9U,KAR2B,WASvB,MAAO,CACHmK,aAEA+M,UAAW,IAInBtJ,QAAS,CACLqJ,MADK,WAEDlQ,KAAK+G,MAAM,UAGf8H,YALK,SAKOtV,GACLyG,KAAKmQ,UAAY5W,EAAGyG,KAAKmQ,UAAY,EACnCnQ,KAAKmQ,SAAW5W,M,UCzBjC,GAAOuL,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,+ECPNZ,MAAM,mB,IACFA,MAAM,U,IACFA,MAAM,gB,gHAFnB,eAKM,MALN,GAKM,CAJF,eAEM,MAFN,GAEM,CADF,eAA6C,MAA7C,GAA6C,CAAnB,eAAa,qCAE3C,eAAmG,GAAnFoG,OAAQ,EAAAA,OAASC,IAAK,EAAAA,IAAMpN,GAAI,EAAAA,GAAKuB,WAAY,EAAAH,MAAMG,Y,gDCChE,mBAAgB,CAC3B+H,WAAY,CAAE0G,kBACdtI,MAAO,CACH0F,IAAK7H,OACLvF,GAAIuF,OACJ4H,OAAQ1G,QAEZxL,KAP2B,WAQvB,MAAO,CACHmG,MAAOkF,EAAMlF,U,UCVzB,GAAO0F,OAAS,GAChB,GAAOa,UAAY,kBAEJ,UCMA,kBAAgB,CAC3B2B,WAAY,CAAE8I,oBAAkBC,YAAUC,WAASC,aAAWC,UAE9DvX,KAH2B,WAIvB,MAAO,CACHmG,MAAOkF,EAAMlF,MAEbwL,aAAa,EACbK,kBAAmB,GAEnBC,cAAc,IAItBrE,QAAS,CACLiE,KADK,WAED9K,KAAK+G,MAAM,gBAIfgE,UANK,SAMKxK,GACNP,KAAK4K,aAAc,EACnB5K,KAAKiL,kBAAoB1K,EAAEhB,WAE3BS,KAAK4K,aAAc,GAIvBI,WAdK,SAcMzK,GAAwD,WAC/DP,KAAKkL,cAAe,EACpBlL,KAAK4K,aAAc,EACnB,IAAIvH,EAAO,IAAIpC,KAAKV,EAAEvB,EAAGuB,EAAErF,EAAE,EAAGqF,EAAEnF,GAI5BqV,EAASpN,EAAKxB,UAAU,IAA4B,KAAtB7B,KAAKZ,MAAMM,WACzCgR,EAAMD,EAAM,MAElBjS,EAAcwB,KAAKZ,MAAMC,SAASrB,GAAI,EAAGgC,KAAKZ,MAAMX,UAAWgS,EAAOC,GACrE7L,MAAK,SAAAkE,GACF,IAAMxJ,EAAa+E,EAAMzD,gBAAgBkI,EAAK9P,KAAK+Q,KAAKzK,YACxD,EAAK0L,kBAAoB1L,EAAW,GAEZ,GAArBA,EAAW9F,OAAa,EAAKmR,aAAc,EACzC,EAAKM,cAAe,MAIjC5C,UAlCK,SAkCK/H,GACNqI,QAAQC,IAAItI,IAGhBsK,UAtCK,WAuCD7K,KAAK4K,aAAc,M,UC9D/B,GAAO9F,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,+ECPNZ,MAAM,Q,IAQFA,MAAM,Y,IACFA,MAAM,mB,IAIDA,MAAM,e,IAKb4L,YAAY,K,GACf,eASQ,cARJ,eAOK,WAND,eAAoD,MAAhD5L,MAAM,iCAAgC,SAC1C,eAAqD,MAAjDA,MAAM,mCAAkC,QAC5C,eAAuE,MAAnEA,MAAM,oDAAmD,SAC7D,eAA2E,MAAvEA,MAAM,oDAAmD,aAC7D,eAAyE,MAArEA,MAAM,qDAAoD,UAC9D,eAA6B,MAAzBA,MAAM,oB,aAGbA,MAAM,W,eAKCA,MAAM,6B,IAINA,MAAM,+B,IACNA,MAAM,gD,IACNA,MAAM,gD,IACNA,MAAM,iD,IACNA,MAAM,4B,UAMTA,MAAM,W,0MAhDvB,eAsDM,MAtDN,GAsDM,CArDF,eAMa,QAND1J,KAAK,kBAAgB,C,YAC7B,iBAIM,CAJ4B,EAAA0P,W,iBAAlC,eAIM,O,MAJDhG,MAAM,iBAAmC,QAAK,8BAAE,EAAA8F,WAAA,EAAAA,UAAA,sB,CACjD,eAEa,QAFD+F,OAAA,GAAOvV,KAAK,S,aACpB,iBAAsD,CAAtD,eAAsD,GAA9C4C,MAAO,EAAA4S,WAAa,QAAO,EAAAhG,W,yEAI/C,eAQM,MARN,GAQM,CAPF,eAEM,MAFN,GAEM,C,eADF,eAAoF,SAA7E9F,MAAM,iBAAiBxG,KAAK,O,qDAAgB,EAAApB,MAAK,IAAEoI,YAAY,a,mBAAnB,EAAApI,Y,mBAEvD,eAGM,2BAHkD,EAAA2T,iBAAe,SAA7BxG,EAAQ/Q,G,wBAAlD,eAGM,OAHDwL,MAAM,uBAA+D3I,IAAK7C,G,CAC3E,eAAoD,OAApD,GAAoD,eAAvB+Q,EAAOjP,MAAO,KAAE,I,mBAC7C,eAAqU,2BAA5LiP,EAAOyG,QAAM,SAA1BjV,EAAOrB,G,wBAAnI,eAAqU,UAA7TsK,MAAK,CAAC,gBAAe,UAA6CuF,EAAOtD,QAAQyD,QAAQ3O,EAAMM,MAAG,IAA5EgG,MAAM,kBAAqHhG,IAAK3B,EAAI,QAAK,mBAAE,EAAAuW,aAAazX,EAAGuC,EAAMM,O,eAA0B,qBAAVN,EAAMT,KAAmC,aAAX,EAAAgN,OAAOhN,KAAsBS,EAAMmV,UAAYnV,EAAMoV,UAAapV,EAAMT,MAAI,mB,mBAG/S,EAAA8V,WAAU,G,iBAA5B,eAAwG,G,MAArE,MAAK,EAAAC,SAAWnC,IAAK,EAAAkC,WAAaE,QAAS,EAAA5R,a,yDAC9E,eAkCQ,QAlCR,GAkCQ,CAjCJ,GAU2B,EAAA6F,S,iBAA3B,eAEM,MAFN,GAAoC,kB,iBAGpC,eAmBQ,a,mBAlBJ,eAcK,2BAde,EAAAgM,eAAa,SAAtBrT,G,wBAAX,eAcK,MAd+B7B,IAAK6B,EAAMD,GAAI+G,MAAM,WAAY,QAAK,mBAAE,EAAAwM,UAAUtT,K,CAClF,eAGK,KAHL,GAGK,C,eAFD,eAAwG,OAAxF8G,MAAM,kBAAmByM,WAAUvT,EAAMqE,MAAO0K,MAAM,KAAK7B,OAAO,KAAK7F,QAAQ,Q,4BAC/F,eAA8B,2BAArBrH,EAAMmE,OAAK,KAExB,eAA6E,KAA7E,GAA6E,eAAlC,EAAAqP,aAAaxT,EAAM4R,SAAM,GACpE,eAA2F,KAA3F,GAA2F,eAA/B,EAAAzM,WAAWnF,EAAMyN,QAAK,GAClF,eAA+F,KAA/F,GAA+F,eAAnC,EAAAtI,WAAWnF,EAAMyT,YAAS,GACtF,eAA+F,KAA/F,GAA+F,eAAlC,EAAAC,aAAa1T,EAAM+D,SAAM,GACtF,eAIK,KAJL,GAIK,CAHD,eAEM,OAFD+C,MAAM,wBAAyBC,MAAK,OAAW,EAAA4M,aAAa3T,EAAM+D,U,CACnE,eAAmE,GAA/CoD,KAAM,EAAAyM,YAAY5T,EAAM+D,QAAS4D,cAAA,I,gDAI3B,GAAX,EAAAjF,KAAKlH,Q,iBAAhC,eAEM,MAFN,GAA6C,wD,2BAKnC,EAAA0X,WAAU,G,iBAA5B,eAAwG,G,MAArE,MAAK,EAAAC,SAAWnC,IAAK,EAAAkC,WAAaE,QAAS,EAAA5R,a,+FCjD/E,SAAeqS,GAAtB,mC,gEAAO,WAA8BvT,GAA9B,6GACaD,EAAUgG,EAAMlF,MAAMC,SAASrB,GAAIO,GADhD,cACG5C,EADH,OAEGgF,EAAOhF,EAAE1C,KAAK8Y,oBAAoBC,MAGlCC,EAAYtR,EAAK2J,QAAO,SAAC5H,GAAD,OAAaA,EAAEwP,gBAAchP,KAAI,SAACR,GAAD,OAAYA,EAAEyP,WAASC,KAAK,GAErFC,EAAyBJ,EAAU/O,KAAI,SAACR,GAAD,uBAAC,mBACvCA,EAAEzE,OADoC,IAEzCmE,MAAOM,EAAEzE,MAAMmE,MAAMC,OACrB9D,KAAMmE,EAAEzE,MAAMM,KACdyD,OAAQU,EAAEV,OACVM,MAAOI,EAAEzE,MAAMsE,WAAWrC,OAC1BoS,OAAQ5P,EAAEzE,MAAMsU,YAChBtQ,SAAUS,EAAET,SACZuQ,QAASC,GAAS/P,EAAEgQ,WACpBhB,UAAWe,GAAS/P,EAAEiQ,aACtBjH,MAAOlI,EAA4B,IAAZd,EAAExB,gBAE5B0R,MAAK,SAAC9T,EAAkBC,GAAnB,OAAwCD,EAAEsD,MAAMyQ,cAAc9T,EAAEqD,UAnBnE,kBAqBIiQ,GArBJ,2C,yBAyBP,SAASI,GAASzT,GACd,GAAY,MAATA,EAAE2D,IACD,MAAO,CACHvH,EAAG,EACHF,EAAG,EACH8D,EAAG,EACH4C,KAAM,GAId,IAAMyB,EAAO,IAAIpC,KAAKjC,EAAE0P,KAAM1P,EAAE4Q,MAAO5Q,EAAE2D,KAEzC,MAAO,CACHvH,EAAG4D,EAAE2D,IACLzH,EAAG8D,EAAE4Q,MACL5Q,EAAGA,EAAE0P,KACLhN,QAASzC,EAASoE,EAAK1B,UACvBC,KAAMyB,EAAKxB,W,mFC3CoGkD,MAAM,gB,GACjH,eAA6B,QAAvBC,MAAA,YAAe,S,IAKpBD,MAAM,W,sJATf,eAYM,OAZDA,MAAM,QAAS,QAAK,+BAAEoB,EAAO2M,qB,CAC9B,eAOM,OAPD/N,MAAM,SAAUC,MAAK,wBAA4B,EAAA/G,MAAMqU,OAAM,M,CAC9D,eAA6C,OAAxCvN,MAAM,eAAgB4F,IAAK,EAAA1M,MAAMqE,O,gBACtC,eAA2J,KAAvJ2C,KAAI,sBAAwB,EAAAhH,MAAMM,KAAKmJ,cAAW,IAAO,EAAAzJ,MAAMD,GAAIkJ,OAAO,SAAS6L,IAAI,Y,CAAW,eAAiD,MAAjD,GAAiD,eAApB,EAAA9U,MAAMmE,OAAK,I,YAC9I,GACA,eAEM,OAFD2C,MAAM,iBAAkB,QAAK,8BAAE,EAAAmL,OAAA,EAAAA,MAAA,sB,CAChC,eAAoD,GAAjC9K,KAAK,a,GAGhC,eAEM,MAFN,GAEM,CADF,eAA8C,GAA9BnH,MAAO,EAAAA,OAAK,yBCLzB,kBAAgB,CAC3ByH,MAAO,CACHzH,MAAO,IAGXqJ,WAAY,CAAE6G,kBAEdlV,KAP2B,WAQvB,MAAO,CACHmG,MAAOkF,EAAMlF,QAIrByH,QAAS,CACLqJ,MADK,WAEDlQ,KAAK+G,MAAM,a,UChBvB,GAAOjC,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,+ECPNZ,MAAM,S,oHAAX,eAUM,MAVN,GAUM,CATF,eAES,UAFDA,MAAM,2BAA4B,QAAK,+BAAE,EAAAgC,MAAK,MAAQ,EAAAsK,QAAO,M,CACjE,eAA2D,GAAxCjM,KAAK,oB,mBAE5B,eAES,2BAFgC,EAAA6J,KAAG,SAAR1V,G,wBAApC,eAES,UAFDwL,MAAK,CAAC,eAAc,UAA0E,EAAAsM,SAAW9X,EAAC,IAAnE6C,IAAK7C,EAAI,QAAK,mBAAE,EAAAwN,MAAK,MAAQxN,EAAC,K,eACtEA,GAAC,mB,MAER,eAES,UAFDwL,MAAM,2BAA4B,QAAK,+BAAE,EAAAgC,MAAK,MAAQ,EAAAsK,QAAO,M,CACjE,eAA4D,GAAzCjM,KAAK,yBCNrB,kBAAgB,CAC3BM,MAAO,CACH2L,QAAS5M,OACTwK,IAAKxK,U,UCDb,GAAOK,OAAS,GAChB,GAAOa,UAAY,kBAEJ,UCKA,kBAAgB,CAC3B2B,WAAY,CAAE0L,SAAOC,eACrBha,KAF2B,WAGvB,MAAO,CACHmG,MAAOkF,EAAMlF,MACbgE,WAAYA,EAEZkC,SAAS,EACT4N,cAAe,EAEfnI,WAAW,EACX8F,WAAY,GAEZsC,SAAU,IACV1T,YAAa,EACb0R,WAAY,EAEZhU,MAAO,GACPiW,QAAS,CACL,CACI/X,KAAM,SACNe,IAAK,SACLmC,KAAM,OACNwS,OAAQ,CACJ,CACIE,UAAW,WACXC,UAAW,UACX9U,IAAK,WAET,CACI6U,UAAW,aACXC,UAAW,YACX9U,IAAK,aAET,CACIf,KAAM,YACNe,IAAK,aAET,CACIf,KAAM,WACNe,IAAK,YAET,CACIf,KAAM,UACNe,IAAK,WAET,CACIf,KAAM,SACNe,IAAK,WAGb4K,QAAS,CAAC,YAAa,UAAW,cAEtC,CACI3L,KAAM,OACNe,IAAK,SACLmC,KAAM,QACNwS,OAAQ,CACJ,CACI1V,KAAM,KACNe,IAAK,MAET,CACIf,KAAM,WACNe,IAAK,YAET,CACIf,KAAM,QACNe,IAAK,SAET,CACIf,KAAM,UACNe,IAAK,WAET,CACIf,KAAM,MACNe,IAAK,OAET,CACIf,KAAM,MACNe,IAAK,OAET,CACIf,KAAM,QACNe,IAAK,UAGb4K,QAAS,CAAC,KAAM,WAAY,QAAS,UAAW,MAAO,MAAO,UAElE,CACI3L,KAAM,OACNe,IAAK,SACLmC,KAAM,QACNwS,OAAQ,CACJ,CACI1V,KAAM,QACNe,IAAK,SAET,CACIf,KAAM,cACNe,IAAK,SAET,CACIf,KAAM,WACNe,IAAK,aAGb4K,QAAS,CAAC,QAAS,QAAS,gBAM5CzC,QAjH2B,WAkHvBvE,KAAKqT,aAGT9G,MAAO,CACH,OAAU,YACVpP,MAFG,WAGC6C,KAAKP,YAAc,EAGnBO,KAAKmR,WAAa5B,KAAK+D,KAAKtT,KAAKW,KAAKlH,OAASuG,KAAKmT,YAI5DtL,SAAU,CACNlH,KADM,WACF,WACM4S,EAA4C,aAApBvT,KAAKqI,OAAOhN,KAAsB2E,KAAKZ,MAAMQ,UAAYI,KAAKZ,MAAMS,UAI9F2T,EAA4BD,EAAIjJ,QAAO,SAAAmJ,GAAI,OAAIA,EAAKrR,MAAMsF,cAAc+C,QAAQ,EAAKtN,MAAMuK,gBAAkB,KAMjH,OAHA1H,KAAK8Q,gBAAgB/P,SAAQ,SAAAuJ,GACzBkJ,EAAWA,EAASlJ,QAAO,SAAC5H,GAAD,OAAY4H,EAAOtD,QAAQyD,QAAQ/H,EAAE4H,EAAOlO,OAAS,QAE7EoX,GAEXlC,cAdM,WAeF,OAAOtR,KAAKW,KAAK9D,MAAMmD,KAAKP,YAAcO,KAAKmT,UAAWnT,KAAKP,YAAc,GAAKO,KAAKmT,WAE3FrC,gBAjBM,WAiBS,WACX,OAAO9Q,KAAKoT,QAAQ9I,QAAO,SAAAA,GACvB,OAAuB,aAApB,EAAKjC,OAAOhN,MAAsC,SAAfiP,EAAO/L,QACjB,aAApB,EAAK8J,OAAOhN,MAAsC,SAAfiP,EAAO/L,WAM9DmV,WAAY,CACRC,SAAU,CACNhP,QADM,SACEiP,GACJA,EAAGjJ,IAAMiJ,EAAG7L,QAAQ4C,OAKhC9D,QAAS,CACLwM,UADK,WACI,WAGLrT,KAAKsF,SAAU,EACftF,KAAKP,YAAc,EACnBO,KAAKmR,WAAa,EAClBlI,YAAW,WACgB,aAApB,EAAKZ,OAAOhN,KACuB,GAA/B,EAAK+D,MAAMQ,UAAUnG,OACpBqY,GAAe,SACdjN,MAAK,SAAAlE,GACF2D,EAAM5D,aAAaC,GACnB,EAAKwQ,WAAa5B,KAAK+D,KAAK,EAAK3S,KAAKlH,OAAS,EAAK0Z,UACpD,EAAK7N,SAAU,MAGnB,EAAK6L,WAAa5B,KAAK+D,KAAK,EAAK3S,KAAKlH,OAAS,EAAK0Z,UACpD,EAAK7N,SAAU,GAEQ,aAApB,EAAK+C,OAAOhN,OACe,GAA/B,EAAK+D,MAAMS,UAAUpG,OACpBqY,GAAe,SACdjN,MAAK,SAAAlE,GACF2D,EAAM1D,aAAaD,GACnB,EAAKwQ,WAAa5B,KAAK+D,KAAK,EAAK3S,KAAKlH,OAAS,EAAK0Z,UACpD,EAAK7N,SAAU,MAInB,EAAK6L,WAAa5B,KAAK+D,KAAK,EAAK3S,KAAKlH,OAAS,EAAK0Z,UACpD,EAAK7N,SAAU,MAGxB,MAGPiM,UArCK,SAqCKtT,GACN+B,KAAK+K,WAAY,EACjB/K,KAAK6Q,WAAa5S,GAEtB4M,UAzCK,WA0CD7K,KAAK+K,WAAY,GAErBiG,aA5CK,SA4CQ6C,EAAezX,GAExB4D,KAAKP,YAAc,EAEnB,IAAMqU,EAAU9T,KAAK8Q,gBAAgB+C,GAAO7M,QAAQyD,QAAQrO,GACzD0X,GAAW,EACV9T,KAAK8Q,gBAAgB+C,GAAO7M,QAAQrM,OAAOmZ,EAAS,GAEpD9T,KAAK8Q,gBAAgB+C,GAAO7M,QAAQjN,KAAKqC,GAI7C4D,KAAKmR,WAAa5B,KAAK+D,KAAKtT,KAAKW,KAAKlH,OAASuG,KAAKmT,WAExD/B,SA1DK,SA0DI2C,GACFA,EAAM,GACNA,GAAO/T,KAAKmR,aACfnR,KAAKP,YAAcsU,IAEvBtC,aA/DK,SA+DQ5B,GACT,OAAIA,EACc,YAAVA,EAA6B,WAC7B,CAAC,KAAM,MAAO,OAAOpF,QAAQoF,IAAW,EAAUA,EAC9CA,EAAO,GAAKA,EAAOhT,MAAM,GAAGyG,QAAQ,IAAK,KAAKoE,cAHvC,IAKvBiK,aArEK,SAqEQ3P,GACT,OAAOA,EAAO,GAAKA,EAAOnF,MAAM,GAAG6K,eAEvCmK,YAxEK,SAwEO7P,GACR,OAAOA,GACH,IAAK,UACL,IAAK,YACD,MAAO,OACX,IAAK,UACD,MAAO,OACX,IAAK,SACD,MAAO,QACX,IAAK,YACD,MAAO,QACX,QACI,MAAO,UAGnB4P,aAvFK,SAuFQ5P,GACT,OAAOA,GACH,IAAK,UACD,MAAO,UACX,IAAK,UACD,MAAO,UACX,IAAK,SACD,MAAO,UACX,IAAK,YACD,MAAO,UACX,QACI,MAAO,e,UC3Q3B,GAAO8C,OAAS,GAChB,GAAOa,UAAY,kBAEJ,U,+ECPNZ,MAAM,W,UAQFA,MAAM,W,ypBAmBFA,MAAM,wB,GACP,eAAyB,OAApBA,MAAM,SAAO,S,IAIbA,MAAM,Y,IAGFA,MAAM,a,UAGdA,MAAM,W,IACNA,MAAM,W,UACFA,MAAM,mB,IACFA,MAAM,iB,IACNA,MAAM,gB,IAGEA,MAAM,e,mHA7CnC,eAwDM,MAxDN,GAwDM,CAvDF,eAMa,QAND1J,KAAK,kBAAgB,C,YAC7B,iBAIM,CAJ4B,EAAA0P,W,iBAAlC,eAIM,O,MAJDhG,MAAM,iBAAmC,QAAK,8BAAE,EAAA8F,WAAA,EAAAA,UAAA,sB,CACjD,eAEa,QAFD+F,OAAA,GAAOvV,KAAK,S,aACpB,iBAAsD,CAAtD,eAAsD,GAA9C4C,MAAO,EAAA4S,WAAa,QAAO,EAAAhG,W,yEAIpB,EAAAvF,S,iBAA3B,eAEM,MAFN,GAAoC,kB,iBAGpC,eA4CM,UA3CF,GAeA,eAGM,MAHN,GAGM,CAFF,I,iBACA,eAAyD,2BAA1B,IAAE,SAAP/L,G,OAA1B,eAAyD,OAApDwL,MAAM,QAAyB3I,IAAK7C,G,eAAMA,GAAC,M,2BAEpD,eAMM,2BAN0B,EAAAya,OAAK,SAAbtF,G,wBAAxB,eAMM,OAND3J,MAAM,MAA6B3I,IAAKsS,G,CACzC,eAA2C,MAA3C,GAA2C,eAAlBA,EAAKA,MAAI,I,iBAClC,eAGM,2BAHgC,IAAE,SAAfkB,EAAOrW,G,OAAhC,eAGM,OAHDwL,MAAM,MAAgC3I,IAAK7C,EAAI,QAAK,mBAAE,EAAAuR,KAAK8E,EAAOlB,EAAKA,Q,CACxE,eAAsG,OAAjG3J,MAAM,SAAUC,MAAK,SAAa0J,EAAKuF,OAAO1a,GAAK,EAAAyV,WAAWN,EAAKuF,OAAO1a,GAAG8V,OAAK,I,QACvF,eAA4E,MAA5E,GAA4E,eAAlDX,EAAKuF,OAAO1a,GAAKmV,EAAKuF,OAAO1a,GAAG8V,MAAK,O,kCAG5C,EAAA6E,c,iBAA3B,eAA+G,MAA/G,GAAyC,aAAU,eAAG,EAAAA,cAAe,uCAAoC,I,sBACzG,eAeM,MAfN,GAeM,CAdiC,EAAAC,eAAiB,EAAAC,c,iBAApD,eAUM,MAVN,GAUM,CATF,eAAqL,MAArL,GAAqL,eAA5I,gBAAX,EAAA/L,OAAOhN,KAAI,iBAAyC,iBAAc,eAAG,EAAA6D,WAAW,EAAAiV,cAAa,IAAM,OAAI,eAAG,EAAAC,cAAe,KAAE,eAAG,EAAAjE,SAAS1W,QAAS,IAAC,GAC/K,eAOM,MAPN,GAOM,E,mBANF,eAKM,2BALqC,EAAA0W,UAAQ,SAAjBkE,G,wBAAlC,eAKM,OALDtP,MAAM,gBAA2C3I,IAAKiY,EAAMrW,GAAK,QAAK,mBAAE,EAAAuT,UAAU8C,K,CACnF,eAA4C,OAAvCtP,MAAM,cAAe4F,IAAK0J,EAAM/R,O,gBACrC,eAEM,MAFN,GAEM,eADC+R,EAAMjS,OAAK,I,+CAK9B,eAEM,SAFM,2DCrCb,kBAAgB,CAC3BkF,WAAY,CAAE0L,UACd/Z,KAF2B,WAGvB,MAAO,CACHmG,MAAOkF,EAAMlF,MACbkG,SAAS,EACTpG,aAEA8U,MAAO,GACPE,aAAc,EACdjF,IAAK,EAELlE,WAAW,EACX8F,WAAY,GAEZV,SAAU,GACVgE,cAAe,EACfC,aAAc,IAItB7P,QArB2B,WAsBvBvE,KAAKqT,aAGT9G,MAAO,CACH,OAAU,aAGd1E,SAAU,CACNlH,KADM,WAEF,IAAM6S,EAAiD,gBAApBxT,KAAKqI,OAAOhN,KAAyB2E,KAAKZ,MAAMQ,UAAYI,KAAKZ,MAAMS,UAE1G,OAAO2T,IAIf3M,QAAS,CACLwM,UADK,WACI,WACLrT,KAAKsU,QACLtU,KAAKsF,SAAU,EACQ,gBAApBtF,KAAKqI,OAAOhN,KACuB,GAA/B2E,KAAKZ,MAAMQ,UAAUnG,OACpBqY,GAAe,SACdjN,MAAK,SAAAlE,GACF2D,EAAM5D,aAAaC,GACnB,EAAK4T,eAGTvU,KAAKuU,YAEkB,gBAApBvU,KAAKqI,OAAOhN,OACe,GAA/B2E,KAAKZ,MAAMS,UAAUpG,OACpBqY,GAAe,SACdjN,MAAK,SAAAlE,GACF2D,EAAM1D,aAAaD,GACnB,EAAK4T,eAGTvU,KAAKuU,cAKjBA,UA3BK,WA4BD,IAAIC,GAAc,IAAIvT,MAAOQ,cAEzBQ,GAAW,EAEf,MAAMA,EAAU,CACZ,IAAMwS,EAAQzU,KAAK0U,UAAUF,GAC7B,GAAGC,EAAQ,GACPD,QACG,CACH,IAAMG,EAAS3U,KAAKW,KAAK2J,QAAO,SAAA5H,GAAC,eAAIA,EAAEgP,YAAa,UAAAhP,EAAEgP,iBAAF,eAAa1S,GAAIwV,GAAiC,IAAlB,UAAA9R,EAAEgP,iBAAF,eAAa1S,MAC7E,GAAjB2V,EAAOlb,QACNwI,GAAW,EACXjC,KAAKgU,MAAMY,OAEXJ,IAILA,EAAc,MACbvS,GAAW,GAInBjC,KAAKkU,aAAelU,KAAKW,KAAK2J,QAAO,SAAA5H,GAAC,YAAgB,aAAZA,EAAEV,QAA2C,IAAlB,UAAAU,EAAEgP,iBAAF,eAAa1S,MAAQvF,OAE1FuG,KAAKsF,SAAU,GAGnBoP,UAxDK,SAwDKhG,GAEN,IAFkB,WACdmG,EAAY,EADE,WAETtb,GACL,IAAMub,EAAa,EAAKd,MAAMvR,MAAK,SAAAvH,GAAC,OAAIA,EAAEwT,MAAQA,KAC5C8E,EAAW,EAAK7S,KAAK2J,QAAO,SAAA5H,GAAC,eAAI,UAAAA,EAAEgP,iBAAF,eAAaxW,IAAK3B,IAAK,UAAAmJ,EAAEgP,iBAAF,eAAa1S,IAAK0P,KAIhF,GAFsB,GAAnB8E,EAAS/Z,QAAaob,IACtBrB,EAAS/Z,OAAS,EAAKwV,MAAK,EAAKA,IAAMuE,EAAS/Z,QAChDqb,EACCA,EAAWb,OAAO1a,EAAE,GAAK,CACrB8V,MAAOmE,EAAS/Z,YAEjB,CACH,IAAMsG,EAAY,CACd2O,KAAMA,EACNuF,OAAQ,IAGZlU,EAAIkU,OAAO1a,EAAE,GAAK,CACd8V,MAAOmE,EAAS/Z,QAGpB,EAAKua,MAAMja,KAAKgG,KApBfxG,EAAI,EAAGA,EAAI,GAAIA,IAAK,EAApBA,GAwBT,OAAOsb,GAGXtD,UArFK,SAqFKtT,GACN+B,KAAK+K,WAAY,EACjB/K,KAAK6Q,WAAa5S,GAGtB4M,UA1FK,WA2FD7K,KAAK+K,WAAY,GAGrBD,KA9FK,SA8FA8E,EAAelB,GAChB,IAAMqG,EAAU/U,KAAKW,KAAK2J,QAAO,SAAA+J,GAAK,eAAI,UAAAA,EAAM3C,iBAAN,eAAiBxW,IAAK0U,IAAS,UAAAyE,EAAM3C,iBAAN,eAAiB1S,IAAK0P,KAC/F1O,KAAKmU,cAAgBvE,EACrB5P,KAAKoU,aAAe1F,EACpB1O,KAAKmQ,SAAW4E,GAGpBT,MArGK,WAsGDtU,KAAKgU,MAAQ,GACbhU,KAAKiP,IAAM,EACXjP,KAAKkU,aAAe,EAEpBlU,KAAKmQ,SAAW,GAChBnQ,KAAKmU,cAAgB,EACrBnU,KAAKoU,aAAe,GAGxBpF,WA/GK,SA+GMK,GACP,IAAMW,EAAQX,EAAQrP,KAAKiP,IAE3B,OAAOe,M,UCjKnB,GAAOlL,OAAS,GAChB,GAAOa,UAAY,kBAEJ,UCGTqP,GAAgC,CACpC,CACEjL,KAAM,IACN1O,KAAM,OACN4Z,UAAWC,IAEb,CACEnL,KAAM,KACN1O,KAAM,UACN4Z,UAAWE,GACXC,SAAU,CACR,CACErL,KAAM,OACNkL,UAAWI,IAEb,CACEtL,KAAM,QACNkL,UAAWK,MAIjB,CACEvL,KAAM,SACN1O,KAAM,OACN4Z,UAAWhV,GACXmV,SAAU,CACR,CACErL,KAAM,GACNkL,UAAWM,IAEb,CACExL,KAAM,aACNkL,UAAWO,GACXna,KAAM,YACNqK,MAAO,CACLnH,KAAM,UAGV,CACEwL,KAAM,aACNkL,UAAWO,GACXna,KAAM,YACNqK,MAAO,CACLnH,KAAM,UAGV,CACEwL,KAAM,gBACNkL,UAAWQ,GACXpa,KAAM,gBAER,CACE0O,KAAM,gBACNkL,UAAWQ,GACXpa,KAAM,mBAMRqa,GAAS,eAAa,CAC1BC,QAAS,eAAiB,eAC1BX,YAGa,M,uCCpEf,QAAQ3Q,IAAI,QAAO,QAAe,QAAgB,QAAkB,QAAQ,QAAa,QAAQ,QAAc,QAAY,QAAQ,QAAU,QAAS,QAAW,QAAQ,QAAQ,QAAS,QAAS,QAAS,QAAQ,SAEpN,eAAUuR,GAAKC,IAAI,IAAQZ,UAAU,oBAAqB,SAAiBa,MAAM,S,yDCVjF,W,kCCAA,W,gFCAA,W,uGCAA","file":"js/app.deb8cf02.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/anistats2/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ActivityChart.vue?vue&type=style&index=1&id=535ab013&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Chart.vue?vue&type=style&index=0&id=c136de9e&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Switch.vue?vue&type=style&index=0&id=358459af&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CheapLoading.vue?vue&type=style&index=0&id=b816d2c6&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./User.vue?vue&type=style&index=0&id=bed9e344&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./History.vue?vue&type=style&index=0&id=3294c33b&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SeriesItem.vue?vue&type=style&index=0&id=1740b062&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Tooltip.vue?vue&type=style&index=0&id=d36cfb8a&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Special.vue?vue&type=style&index=0&id=6daf46cc&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Calendar.vue?vue&type=style&index=0&id=4e6c0de4&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Settings.vue?vue&type=style&index=0&id=a25cacc0&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=19a0ebfc&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ActivityChart.vue?vue&type=style&index=0&id=535ab013&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DataRange.vue?vue&type=style&index=0&id=46337ac5&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Pagination.vue?vue&type=style&index=0&id=5120db18&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Sidebar.vue?vue&type=style&index=0&id=36f57121&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SettingsSwitcher.vue?vue&type=style&index=0&id=49c0d509&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Panel.vue?vue&type=style&index=0&id=26b8ded0&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/merge.ca5fa3bb.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Logo.vue?vue&type=style&index=0&id=1ee4ba7e&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Button.vue?vue&type=style&index=0&id=edb20c84&lang=scss&scoped=true\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=2b4b3d31&lang=scss\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SeriesDetails.vue?vue&type=style&index=0&id=d5b22e72&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Main.vue?vue&type=style&index=0&id=aabbaf26&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Help.vue?vue&type=style&index=0&id=59725bf0&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DetailsContainer.vue?vue&type=style&index=0&id=451e4c02&lang=scss&scoped=true\"","<template>\r\n  <router-view/>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\nimport { toggleTheme } from './store/helpers';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n        }\r\n    },\r\n\r\n    created(): void {\r\n      // Load saved settings to state\r\n      const updateHour = localStorage.getItem(\"updateHour\");\r\n      const mediaType = localStorage.getItem(\"mediaType\");\r\n\r\n      if (updateHour && mediaType) {\r\n        store.saveSettings(true);\r\n        store.setSettings({\r\n          updateHour: Number(updateHour),\r\n          mediaType\r\n        })\r\n      }\r\n\r\n      const theme = localStorage.getItem(\"theme\")\r\n      if(theme == \"light\") {\r\n        toggleTheme();\r\n      }\r\n    },\r\n\r\n    mounted(): void {\r\n      this.$nextTick().then(() => {\r\n        //document.body.classList.add('site-theme-light');\r\n      })\r\n    }\r\n})\r\n\r\n</script>\r\n<style lang=\"scss\">\r\n@import url('https://fonts.googleapis.com/css2?family=Jost:wght@400;500&display=swap');\r\n\r\n:root {// DARK MODE (default) COLORS\r\n  --color-background: #272c38;\r\n  --color-background-secondary: #1f232d;\r\n  --color-background-border: #343946;\r\n  --color-background-darker: #2d3340;\r\n  --color-background-day: #188cc6;\r\n  \r\n  --color-selected-background: #2d3340;\r\n  --color-selected-text: #34bbff;\r\n\r\n  --color-text: white;\r\n  --color-text-secondary: #cbd3e3;\r\n  --color-text-blue: #49a5f2;\r\n  --color-text-gray: #d3d3d3;\r\n  --color-text-red: #b33737;\r\n\r\n  --shadow-default: 0 0 10px rgba(0,0,0,.25);\r\n  --radius: 6px;\r\n}\r\n\r\n.site-theme-light {\r\n  --color-background: #edf1f5;\r\n  --color-background-secondary: #cecece;\r\n  --color-background-border: #c7c7c7;\r\n  --color-background-darker: white;\r\n  --color-background-day: #4a9bc4;\r\n\r\n  --color-selected-background: #3391c0;\r\n  --color-selected-text: white;\r\n\r\n  --color-text: #222;\r\n  --color-text-secondary: #333;\r\n  --color-text-blue: #4090d1;\r\n  --color-text-gray: #666;\r\n  --color-text-red: #b33737;\r\n\r\n}\r\n\r\n* {\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n  font-family: 'Jost', sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n\r\n  color: var(--color-text);\r\n  background: var(--color-background);\r\n  margin: 0;\r\n}\r\n\r\na {\r\n    text-decoration: none;\r\n    color: #65a9c4;\r\n}\r\n\r\ninput {\r\n  outline: none;\r\n  border: none;\r\n  background: none;\r\n  font: inherit;\r\n  display: block;\r\n  color: var(--color-text-input);\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n\r\n  max-width: 800px;\r\n  margin: auto;\r\n\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  left: 0;\r\n  right: 0;\r\n}\r\n\r\nfooter {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.prop {\r\n    display: flex;\r\n    align-items: center;\r\n    margin: 0 10px;\r\n}\r\n\r\n.prop-value {\r\n    margin-right: 6.47px;\r\n    font-size: 1.4em;\r\n}\r\n\r\n.prop-desc {\r\n    font-size: .76em;\r\n    color: var(--color-text-secondary);\r\n}\r\n\r\n// TRANSITIONS\r\n.popup-backdrop {\r\n    position: fixed;\r\n    bottom: 0;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n\r\n    z-index: 2;\r\n    background: rgba(0,0,0,.7);\r\n    \r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.popup-backdrop-enter-from, .popup-backdrop-leave-to {\r\n    opacity: 0;\r\n}\r\n\r\n.popup-backdrop-enter-active, .popup-backdrop-leave-active {\r\n    transition: .1s ease-in-out;\r\n}\r\n\r\n.popup-enter-from, .popup-leave-to {\r\n    transform: scale(0.9);\r\n}\r\n\r\n.popup-enter-active, .popup-leave-active {\r\n    transition: .2s ease;\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n    .popup-backdrop {\r\n        align-items: flex-end;\r\n    };\r\n}\r\n\r\n// MEDIA\r\n@media screen and (max-width: 800px) {\r\n  .container {\r\n    padding: 10px;\r\n  }\r\n}\r\n\r\n@keyframes pulse {\r\n  0%, 100% {\r\n     border-bottom-color: var(--color-background-border);\r\n  }\r\n\r\n  50% {\r\n    border-bottom-color: var(--color-text-blue);\r\n  }\r\n}\r\n</style>\r\n","// activityQuery: returns user's activities\r\nexport const activityQuery: string = `query ($userId: Int, $page: Int, $perPage: Int, $type: ActivityType, $from: Int, $to: Int) {\r\n    Page(page: $page, perPage: $perPage) {\r\n      pageInfo {\r\n        total\r\n        currentPage\r\n        lastPage\r\n        hasNextPage\r\n        perPage\r\n      }\r\n      activities(userId: $userId, sort: ID_DESC, type: $type, createdAt_greater: $from, createdAt_lesser: $to) {\r\n        __typename\r\n        ... on ListActivity {\r\n          id\r\n          media {\r\n            id\r\n            type\r\n            title {\r\n              romaji\r\n            }\r\n            coverImage {\r\n              medium\r\n            }\r\n          }\r\n          type\r\n          createdAt\r\n          status\r\n          progress\r\n        }\r\n      }\r\n    }\r\n  }`","// listQuery: returns all user's lists containing anime or manga.\r\nexport const listQuery: string = `query ($userId: Int, $type: MediaType, $chunk: Int) {\r\n    MediaListCollection (userId: $userId, type: $type, chunk: $chunk) {\r\n        lists {\r\n            name\r\n            isCustomList\r\n            entries {\r\n              id\r\n              status\r\n              progress\r\n              createdAt\r\n              startedAt {\r\n                year\r\n                month\r\n                day\r\n              }\r\n              completedAt {\r\n                year\r\n                month\r\n                day\r\n              }\r\n              media {\r\n                id\r\n                type\r\n                bannerImage\r\n                coverImage {\r\n                  medium\r\n                }\r\n                averageScore\r\n                seasonYear\r\n                title {\r\n                  romaji\r\n                }\r\n                format\r\n                episodes\r\n                chapters\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }`;\r\n","// Returns information about one entry (anime/manga), along with user's activities connected with it.\r\nexport const mediaQuery: string = `query ($userId: Int, $mediaId: Int, $page: Int, $perPage: Int) {\r\n    Media(id: $mediaId) {\r\n      id\r\n      title {\r\n        romaji\r\n      }\r\n      coverImage {\r\n        large\r\n      }\r\n      bannerImage\r\n      episodes\r\n    }\r\n    Page(page: $page, perPage: $perPage) {\r\n      pageInfo {\r\n        total\r\n        currentPage\r\n        lastPage\r\n        hasNextPage\r\n        perPage\r\n      }\r\n      activities(sort: ID_DESC, mediaId: $mediaId, userId: $userId) {\r\n        __typename\r\n        ... on ListActivity {\r\n          id\r\n          media {\r\n            id\r\n            type\r\n            title {\r\n              romaji\r\n            }\r\n            coverImage {\r\n              medium\r\n            }\r\n          }\r\n          type\r\n          createdAt\r\n          status\r\n          progress\r\n        }\r\n      }\r\n    }\r\n  }\r\n  `","// Returns more user data based on its name.\r\n// It's necessary, since while you may request user's list using the username, you can't do the same with activities (used in mediaQuery.)\r\n// Along with it, it fetches user's profile picture to display it and make the site prettier, because why not.\r\nexport const userQuery: string = `query ($username: String) {\r\n    User (name: $username) {\r\n      id\r\n      name\r\n      avatar {\r\n        medium\r\n      }\r\n    }\r\n  }`","import { ActivityDate } from \"@/interfaces/activity\";\r\nimport { activityQuery } from \"@/queries/activity\";\r\nimport { listQuery } from \"@/queries/list\";\r\nimport { mediaQuery } from \"@/queries/media\";\r\nimport { userQuery } from \"@/queries/user\";\r\n\r\nexport async function anilistRequest(query: string, variables: any): Promise<any> {\r\n    const response = await fetch(\"https://graphql.anilist.co\", {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json;charset=utf-8'\r\n        },\r\n        body: JSON.stringify({ query, variables })\r\n    });\r\n\r\n    const result = await response.json();\r\n    return result;\r\n}\r\n\r\nexport async function fetchUserData(username: string): Promise<any> {\r\n    return anilistRequest(userQuery, { username });\r\n}\r\n\r\nexport async function fetchMedia(id: number, media: number): Promise<any> {\r\n    const variables = {\r\n        page: 1,\r\n        perPage: 50,\r\n        mediaId: media,\r\n        userId: id  \r\n    }\r\n    \r\n    return anilistRequest(mediaQuery, variables);\r\n}\r\n\r\nexport async function fetchList(id: number, type: string): Promise<any> {\r\n    const variables = {\r\n        userId: id,\r\n        type\r\n    }\r\n\r\n    return anilistRequest(listQuery, variables);\r\n}\r\n\r\nexport async function fetchActivity(id: number, page: number, mediaType: string, from?: number, to?: number): Promise<any> {\r\n    let type = undefined;\r\n    \r\n    if (mediaType == 'anime') {\r\n        type = 'ANIME_LIST';\r\n    } else if (mediaType == 'manga') {\r\n        type = 'MANGA_LIST';\r\n    }\r\n\r\n    const variables = {\r\n        page,\r\n        perPage: 50, // max\r\n        userId: id,\r\n        type,\r\n        from,\r\n        to\r\n    }\r\n\r\n    return anilistRequest(activityQuery, variables);\r\n}\r\n\r\nexport function compareDates(a: ActivityDate, b: ActivityDate): boolean {\r\n    return (a.d == b.d && a.m == b.m && a.y == b.y);\r\n}","import { ActivityDate, ActivityDay, ActivityMedia } from \"@/interfaces/activity\";\r\nimport { reactive } from \"vue\";\r\nimport { compareDates, fetchList } from \"./api\";\r\n\r\nexport const weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\nexport const monthNames = [\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\", \"August\",\"September\",\"October\",\"November\",\"December\"];\r\n\r\nexport default {\r\n    debug: true,\r\n\r\n    state: reactive({\r\n        userData: {\r\n            id: 0,\r\n            username: \"\",\r\n            avatar: \"\"\r\n        },\r\n        activities: [] as ActivityDay[],\r\n        preloadedActivities: [] as ActivityDay[],\r\n        currentPage: 1,\r\n        updateHour: 3,\r\n        mediaType: 'both',\r\n        saveSettings: false,\r\n        animeList: [] as ActivityMedia[],\r\n        mangaList: [] as ActivityMedia[]\r\n    }),\r\n\r\n    setUserdata(obj: any): void {\r\n        this.state.userData.id = obj.data.User.id;\r\n        this.state.userData.username = obj.data.User.name;\r\n        this.state.userData.avatar = obj.data.User.avatar.medium;\r\n    },\r\n\r\n    incrementCurrentPage(): void {\r\n        this.state.currentPage++;\r\n    },\r\n\r\n    appendActivities(activities: ActivityDay[]): ActivityDay[] {\r\n        this.state.activities = this.state.activities.concat(activities);\r\n        return this.state.activities;\r\n    },\r\n\r\n    destroy(): void {\r\n        this.state.currentPage = 1;\r\n        this.state.activities = [];\r\n        this.state.preloadedActivities = [];\r\n        this.state.animeList = [];\r\n        this.state.mangaList = [];\r\n    },\r\n\r\n    saveSettings(e: boolean): void {\r\n        this.state.saveSettings = e;\r\n    },\r\n\r\n    setSettings(o: {\r\n        updateHour?: number,\r\n        mediaType?: string\r\n    }): void {\r\n        // Destroy current state, because in case the user loads their page again without refreshing the site, inconsistencies may appear.\r\n        this.destroy();\r\n        if ('updateHour' in o) this.state.updateHour = o.updateHour as number;\r\n        if ('mediaType' in o && o.mediaType) this.state.mediaType = o.mediaType;\r\n    },\r\n\r\n    setPreloadedActivities(activities: ActivityDay[]): void {\r\n        this.state.preloadedActivities = activities;\r\n    },\r\n\r\n    setAnimeList(list: ActivityMedia[]): void {\r\n        this.state.animeList = list;\r\n    },\r\n\r\n    setMangaList(list: ActivityMedia[]): void {\r\n        this.state.mangaList = list;\r\n    },\r\n\r\n    parseActivities(activities: any): ActivityDay[] {\r\n        const days: ActivityDay[] = [];\r\n\r\n        activities.forEach((a: any) => {\r\n            const timestamp = new Date(a.createdAt * 1000); // Convert AniList time to js time\r\n\r\n            if(timestamp.getHours() < this.state.updateHour) { // Couting late night as previous day (user can choose a specific hour in settings)\r\n                // Make the activity appear the previous day. For example: July 3 => July 2. The setDate function does month conversion and all for us.\r\n                timestamp.setDate(timestamp.getDate() - 1);\r\n            }\r\n\r\n            const activityDateObject: ActivityDate = {\r\n                d: timestamp.getDate(),\r\n                m: timestamp.getMonth() + 1, // converts to human-readable format (January as 1, not 0)\r\n                y: timestamp.getFullYear(),\r\n                weekday: weekdays[timestamp.getDay()],\r\n                time: timestamp.getTime()\r\n            }\r\n\r\n            // Determining watched episodes (or read chapters) count\r\n            let episodes = 0;\r\n            let chapters = 0;\r\n            let range;\r\n            \r\n            switch(a.status) {\r\n                case 'watched episode':\r\n                case 'rewatched episode':\r\n                    range = a.progress.split(' - ');\r\n                    if(range.length == 2) {\r\n                        episodes = parseInt(range[1]) - parseInt(range[0]) + 1;\r\n                    }\r\n                    else episodes = 1;\r\n                    break;\r\n                case 'read chapter':\r\n                case 'reread chapter':\r\n                    range = a.progress.split(' - ');\r\n                    if(range.length == 2) {\r\n                        chapters = parseInt(range[1]) - parseInt(range[0]) + 1;\r\n                    }\r\n                    else chapters = 1;\r\n                    break;\r\n                case 'completed':\r\n                    if(a.media.type == 'ANIME') episodes = 1;\r\n                    else chapters = 1;\r\n                    break;\r\n                default:\r\n                    return;\r\n            }\r\n\r\n            // Parsing media\r\n            const media: ActivityMedia = {\r\n                id: a.media.id,\r\n                type: a.media.type,\r\n                title: a.media.title.romaji,\r\n                cover: a.media.coverImage.medium,\r\n                episodes: (episodes ? episodes : chapters),\r\n            }\r\n\r\n            // Look for other activities in particular day and append our data to it (because one day = one activity object)\r\n            const sameDay: ActivityDay | undefined = days.find(x => compareDates(x.day, activityDateObject)); // is there any more efficient way to do this?\r\n            \r\n            // If it found something\r\n            if(sameDay) {\r\n                sameDay.episodes += episodes; // Append our episode count to the entire day's episode count\r\n                sameDay.chapters += chapters;\r\n\r\n                // Checking if there's another activity for the same anime/manga on this day.\r\n                const mediaObject = sameDay.media.find(x => x.id == media.id && x.type == media.type);\r\n                if(mediaObject) {\r\n                    if(mediaObject.type == 'ANIME') {\r\n                        mediaObject.episodes += episodes;\r\n                    } else {\r\n                        mediaObject.episodes += chapters; // There is no need for distinction between chapters and episodes in a single media object.\r\n                    }\r\n                } else {\r\n                    sameDay.media.push(media);\r\n                }\r\n            }\r\n            else { // We have to create an object for the day here.\r\n                days.push({\r\n                    day: activityDateObject,\r\n                    episodes,\r\n                    chapters,\r\n                    media: (media ? [media] : [])\r\n                })\r\n            }\r\n        })\r\n\r\n        return days;\r\n    }\r\n}","import { ActivityDate } from \"@/interfaces/activity\";\r\nimport { weekdays } from \"./store\";\r\n\r\nconst formatObj = new Intl.DateTimeFormat().formatToParts(new Date());\r\n    \r\nconst dateFormat = formatObj.map(obj => {\r\n    switch (obj.type) {\r\n        case \"day\":\r\n            return \"DD\";\r\n        case \"month\":\r\n            return \"MM\";\r\n        case \"year\":\r\n            return \"YYYY\";\r\n        default:\r\n            return obj.value;\r\n    }\r\n}).join(\"\");\r\n\r\nexport function prettyDate(date: ActivityDate): string {\r\n    if(date.time == 0) return \"Unknown\";\r\n    return dateFormat.replace(\"DD\", String(date.d)).replace(\"MM\", (date.m >= 10 ? String(date.m) : '0'+String(date.m) )).replace(\"YYYY\", String(date.y));\r\n}\r\n\r\nexport function newActivityDate(timestamp: number): ActivityDate {\r\n    const dateObject = new Date(timestamp);\r\n\r\n    return {\r\n        d: dateObject.getDate(),\r\n        m: dateObject.getMonth() + 1,\r\n        y: dateObject.getFullYear(),\r\n        weekday: weekdays[dateObject.getDay()],\r\n        time: dateObject.getTime()\r\n    }\r\n}\r\n\r\nexport function findAddedDate(raws: any): string {\r\n    const plan = raws.find((act: any) => act.status.startsWith(\"plans\"));\r\n    if(!plan) return \"Unknown\";\r\n    else {\r\n        const timestamp = new Date(plan.createdAt * 1000);\r\n\r\n        const activityDateObject: ActivityDate = {\r\n            d: timestamp.getDate(),\r\n            m: timestamp.getMonth() + 1, // converts to human-readable format (January as 1, not 0)\r\n            y: timestamp.getFullYear(),\r\n            weekday: weekdays[timestamp.getDay()],\r\n            time: timestamp.getTime()\r\n        }\r\n        return (plan ? prettyDate(activityDateObject) : 'Unknown')\r\n    }\r\n}\r\n\r\n// you can access DOM from here so why not?\r\nexport function toggleTheme(): void {\r\n    if(document.body.classList.contains('site-theme-light')) {\r\n        document.body.classList.remove('site-theme-light');\r\n        window.localStorage.setItem('theme', 'dark');\r\n        // Modify localstorage\r\n    } else {\r\n        document.body.classList.add('site-theme-light')\r\n        // Modify localstore\r\n        window.localStorage.setItem('theme', 'light');\r\n    }\r\n}","\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\nimport { toggleTheme } from './store/helpers';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n        }\r\n    },\r\n\r\n    created(): void {\r\n      // Load saved settings to state\r\n      const updateHour = localStorage.getItem(\"updateHour\");\r\n      const mediaType = localStorage.getItem(\"mediaType\");\r\n\r\n      if (updateHour && mediaType) {\r\n        store.saveSettings(true);\r\n        store.setSettings({\r\n          updateHour: Number(updateHour),\r\n          mediaType\r\n        })\r\n      }\r\n\r\n      const theme = localStorage.getItem(\"theme\")\r\n      if(theme == \"light\") {\r\n        toggleTheme();\r\n      }\r\n    },\r\n\r\n    mounted(): void {\r\n      this.$nextTick().then(() => {\r\n        //document.body.classList.add('site-theme-light');\r\n      })\r\n    }\r\n})\r\n\r\n","import { render } from \"./App.vue?vue&type=template&id=2b4b3d31\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=2b4b3d31&lang=scss\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"container\">\r\n    <Logo size=\"2em\"></Logo>\r\n    <span class=\"warning\">anistats 2 is still in <span style=\"color: var(--color-text-blue)\">beta</span> and may lack some features. For the previous version look <a href=\"https://pizza61.github.io/anistats\">here</a>.</span>\r\n    <transition name=\"errorfade\">\r\n      <span class=\"error\" v-if=\"error.length > 0\">{{ error }}</span>\r\n    </transition>\r\n    <div class=\"input\">\r\n      <div class=\"button-wrapper desktop\">\r\n        <Button icon=\"cog\" @click=\"toggleSettings\">Settings</Button>\r\n      </div>\r\n      <input class=\"username\" :class=\"{ usernameError: error.length > 0, pulse: loading }\" placeholder=\"Enter username\" type=\"text\" v-model=\"username\" @keyup.enter=\"send\" />\r\n      <div class=\"button-wrapper desktop\">\r\n        <Button @click=\"send\" icon=\"chevron-right\">Continue</Button>\r\n      </div>\r\n    </div>\r\n    <div class=\"buttons mobile\">\r\n      <div class=\"button-wrapper\">\r\n        <Button icon=\"cog\" @click=\"toggleSettings\">Settings</Button>\r\n      </div>\r\n      <div class=\"button-wrapper\">\r\n        <Button @click=\"send\" icon=\"chevron-right\">Continue</Button>\r\n      </div>\r\n    </div>\r\n    <div class=\"settings\">\r\n      <transition name=\"settings\" mode=\"out-in\">\r\n        <Settings v-if=\"settings\"></Settings>\r\n      </transition>\r\n    </div>\r\n    <footer>\r\n      <Panel></Panel>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport Button from '@/components/Button.vue';\r\nimport Settings from '@/components/Home/Settings.vue';\r\nimport Panel from '@/components/Home/Panel.vue';\r\n\r\nimport store from '@/store/store';\r\nimport { fetchUserData } from '@/store/api';\r\n\r\nexport default defineComponent({\r\n  components: { Logo, Button, Settings, Panel },\r\n\r\n  data() {\r\n    return {\r\n      show: true,\r\n      loading: false,\r\n      settings: false,\r\n\r\n      username: \"\",\r\n      error: \"\",\r\n      state: store.state\r\n    }\r\n  },\r\n\r\n  mounted(): void {\r\n    if(this.$route.query.error == \"1\") {\r\n      this.showError(\"Something went wrong. Please try again\");\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // Resolve username/link and redirect to next component for processing.\r\n    send(): void {\r\n      if(this.username.length < 2) {\r\n        return this.showError(\"Hey, I said enter your username.\")\r\n      }\r\n\r\n      if(this.username.startsWith(\"https://anilist.co\")) { // The user entered a profile link.\r\n        try {\r\n          let url = new URL(this.username);\r\n          if(url.pathname.startsWith(\"/user/\")) {\r\n            // If the link was correct, it should return the username. If it wasn't, the next component should return an error.\r\n            let username = url.pathname.split(\"/\")[2];\r\n            this.process(username);\r\n          } else {\r\n            throw 'Invalid URL';\r\n          }\r\n        }\r\n        catch (e)\r\n        {\r\n          this.showError(e);\r\n        }\r\n      } else { // The user entered something different (preferably the username)\r\n        // Saving user settings to localStorage (if user chose to)\r\n        if(this.state.saveSettings) {\r\n          localStorage.setItem(\"updateHour\", String(this.state.updateHour));\r\n          localStorage.setItem(\"mediaType\", this.state.mediaType);\r\n        } else { // clear settings in case they were saved but user opted out of it\r\n          localStorage.removeItem(\"updateHour\");\r\n          localStorage.removeItem(\"mediaType\");\r\n        }\r\n\r\n        this.loading = true;\r\n        this.process(this.username);\r\n      }\r\n    },\r\n\r\n    process(username: string): void {\r\n      // Checking if the user data is already loaded. If it is, it means that the user is revisitng the page so there's no need to fetch anything again\r\n      if(this.state.userData.username == username && this.state.activities.length > 0) {\r\n        console.log(\"directly\")\r\n        this.$router.push('/'+username);\r\n      } else {\r\n        fetchUserData(username)\r\n        .then(resp => {\r\n          store.destroy();\r\n          store.setUserdata(resp);\r\n          this.$router.push('/'+username);\r\n        })\r\n        .catch(() => {\r\n          this.showError(\"Invalid username (or profile is private)\");\r\n        })\r\n      }\r\n    },\r\n\r\n    showError(e: string): void {\r\n      this.loading = false;\r\n      this.error = e;\r\n      setTimeout(() => {\r\n        this.error = \"\";\r\n      }, 5000);\r\n    },\r\n\r\n    toggleSettings(): void {\r\n      this.settings = !this.settings;\r\n    }\r\n  }\r\n\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.input {\r\n  display: flex;\r\n  margin: 10px 0;\r\n\r\n}\r\n.username {\r\n  padding: 10px;\r\n\r\n  font-size: 2em;\r\n  font-weight: 500;\r\n\r\n  border-bottom: 3px solid var(--color-background-border);\r\n\r\n  transition: border-bottom .5s;\r\n\r\n  &::placeholder {\r\n    color: var(--color-text-secondary);\r\n  }\r\n}\r\n\r\n.usernameError {\r\n  border-bottom: 3px solid var(--color-text-red);\r\n}\r\n\r\n.buttons {\r\n  justify-content: space-around;\r\n  display: flex;\r\n}\r\n \r\n.button-wrapper {\r\n  flex-grow: 1;\r\n  border-radius: var(--radius);\r\n  color: var(--color-text-secondary);\r\n  padding: 6px;\r\n\r\n  transition: background .2s;\r\n  \r\n  &:hover {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 620px) {\r\n  .desktop {\r\n    display: none;\r\n  }\r\n\r\n  .username {\r\n    width: 100%;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 621px) {\r\n  .mobile {\r\n    display: none;\r\n  }\r\n\r\n  .button-wrapper {\r\n    margin: 0 6px;\r\n  }\r\n}\r\n// TRANSITIONS\r\n.errorfade-enter-active, .errorfade-leave-active {\r\n  transition: opacity 0.5s ease;\r\n}\r\n\r\n.errorfade-enter-from, .errorfade-leave-to {\r\n  opacity: 0;\r\n}\r\n\r\n.pulse {\r\n  animation: pulse 2s linear infinite;\r\n}\r\n\r\n.settings-enter-active, .settings-leave-active {\r\n  transition: all .2s ease-out;\r\n}\r\n\r\n.settings-enter-from, .settings-leave-to {\r\n  transform: translateY(-10px);\r\n  opacity: 0;\r\n}\r\n</style>\r\n","<template>\r\n    <div class=\"logo\" :style=\"{ fontSize: size }\">\r\n        <span class=\"blue\">ani</span>\r\n        <span>stats</span>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        size: String\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.logo {\r\n    user-select: none;\r\n}\r\n\r\n.blue {\r\n    color: #3391c0;\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        size: String\r\n    }\r\n})\r\n","import { render } from \"./Logo.vue?vue&type=template&id=1ee4ba7e&scoped=true\"\nimport script from \"./Logo.vue?vue&type=script&lang=ts\"\nexport * from \"./Logo.vue?vue&type=script&lang=ts\"\n\nimport \"./Logo.vue?vue&type=style&index=0&id=1ee4ba7e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1ee4ba7e\"\n\nexport default script","<template>\r\n    <button class=\"btn\">\r\n        <font-awesome-icon v-if=\"icon\" :icon=\"icon\" size=\"lg\" fixed-width />\r\n        <span><slot></slot></span>\r\n    </button>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        icon: String,\r\n        color: String\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.btn {\r\n    display: inline-flex;\r\n    width: 100%;\r\n    height: 100%;\r\n    align-items: center;\r\n    justify-content: center;\r\n    flex-direction: column;\r\n\r\n    appearance: none;\r\n    font: inherit;\r\n    color: inherit;\r\n    background: none;\r\n    outline: none;\r\n    border: none;\r\n\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    span {\r\n        padding-top: 5px;\r\n    }\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        icon: String,\r\n        color: String\r\n    }\r\n})\r\n","import { render } from \"./Button.vue?vue&type=template&id=edb20c84&scoped=true\"\nimport script from \"./Button.vue?vue&type=script&lang=ts\"\nexport * from \"./Button.vue?vue&type=script&lang=ts\"\n\nimport \"./Button.vue?vue&type=style&index=0&id=edb20c84&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-edb20c84\"\n\nexport default script","<template>\r\n    <div class=\"settings\">\r\n        <div class=\"section\">\r\n            <div class=\"setting\" v-for=\"(setting, i) in settings\" :key=\"i\">\r\n                <div class=\"setting-header\">\r\n                    <div class=\"setting-name\">{{ setting.name }}</div>\r\n                    <div class=\"setting-desc\">{{ setting.desc }}</div>\r\n                </div>\r\n                <div class=\"setting-switch\">\r\n                    <SettingsSwitcher :options=\"setting.options\" :default=\"setting.default\" @selection=\"handleSelect($event, i)\"></SettingsSwitcher>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <Switch name=\"save\" :model-value=\"save\" @update:model-value=\"toggleSave\">Save those settings for later</Switch>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport SettingsSwitcher from './SettingsSwitcher.vue';\r\nimport Switch from '@/components/Switch.vue';\r\n\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { SettingsSwitcher, Switch },\r\n    \r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            save: false,\r\n            settings: [\r\n                {\r\n                    name: \"Stats type\",\r\n                    desc: \"Choose which type of media you want to be displayed.\",\r\n                    options: [\"both\", \"anime\", \"manga\"]\r\n                },\r\n                {\r\n                    name: \"Beginning of a new day\",\r\n                    desc: \"You may choose to count late night as previous day.\",\r\n                    options: [\"12am\", \"1am\", \"2am\", \"3am\", \"4am\", \"6am\"]\r\n                }\r\n            ] as any[]\r\n        }\r\n    },\r\n\r\n    created(): void {\r\n        this.settings[0].default = this.state.mediaType;\r\n        this.settings[1].default = this.state.updateHour == 0 ? '12am' : this.state.updateHour+'am';\r\n\r\n        this.save = this.state.saveSettings;\r\n    },\r\n\r\n    methods: {\r\n        handleSelect(e: string, i: number): void {\r\n            let val = e.toLowerCase();\r\n            if(i == 0) {\r\n                store.setSettings({ mediaType: val })\r\n            } else if (i == 1) {\r\n                if (e == '12am') store.setSettings({ updateHour: 0 });\r\n                else store.setSettings({ updateHour: Number(e.slice(0, -2)) });\r\n            }\r\n        },\r\n\r\n        toggleSave(e: boolean): void {\r\n            this.save = e;\r\n            store.saveSettings(e);\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@media screen and (max-width: 600px) {\r\n    .setting {\r\n        flex-direction: column;\r\n    }\r\n\r\n    .setting-switch {\r\n        margin-top: 10px;\r\n    }\r\n}\r\n.setting {\r\n    display: flex;\r\n    justify-content: space-between;\r\n\r\n    margin: 10px;\r\n}\r\n\r\n.setting-name {\r\n    display: blocl;\r\n    font-weight: 500;\r\n}\r\n\r\n.setting-desc {\r\n    display: block;\r\n    font-size: 0.86em;\r\n    color: var(--color-text-secondary);\r\n}\r\n\r\n\r\n</style>","<template>\r\n    <div class=\"switches\">\r\n        <div class=\"switch\" v-for=\"(option, i) in options\" :key=\"i\" :class=\"{ selected: option == chosen }\" @click=\"select(option)\">{{ capitalize(option) }}</div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        options: Array,\r\n        default: String\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            cho: [],\r\n            chosen: \"\"\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        this.chosen = this.default as string;\r\n    },\r\n\r\n    methods: {\r\n        capitalize(option: string): string {\r\n            return option[0].toUpperCase() + option.slice(1);\r\n        },\r\n\r\n        select(option: string): void {\r\n            this.chosen = option;\r\n            this.$emit('selection', option);\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.switches {\r\n    display: flex;\r\n}\r\n\r\n.switch {\r\n    display: inline-block;\r\n    background: var(--color-background-border);\r\n    padding: 8px 12px;\r\n\r\n    transition: .2s;\r\n    user-select: none;\r\n\r\n    &:first-child {\r\n        border-top-left-radius: var(--radius);\r\n        border-bottom-left-radius: var(--radius);\r\n    }\r\n\r\n    &:last-child {\r\n        border-top-right-radius: var(--radius);\r\n        border-bottom-right-radius: var(--radius);\r\n    }\r\n\r\n    &:not(.selected):hover {\r\n        background: var(--color-selected-background);\r\n    }\r\n}\r\n\r\n.selected {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n}\r\n\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        options: Array,\r\n        default: String\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            cho: [],\r\n            chosen: \"\"\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        this.chosen = this.default as string;\r\n    },\r\n\r\n    methods: {\r\n        capitalize(option: string): string {\r\n            return option[0].toUpperCase() + option.slice(1);\r\n        },\r\n\r\n        select(option: string): void {\r\n            this.chosen = option;\r\n            this.$emit('selection', option);\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./SettingsSwitcher.vue?vue&type=template&id=49c0d509&scoped=true\"\nimport script from \"./SettingsSwitcher.vue?vue&type=script&lang=ts\"\nexport * from \"./SettingsSwitcher.vue?vue&type=script&lang=ts\"\n\nimport \"./SettingsSwitcher.vue?vue&type=style&index=0&id=49c0d509&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-49c0d509\"\n\nexport default script","<template>\r\n    <div>\r\n        <div>\r\n            <input type=\"checkbox\" :checked=\"modelValue\" @input=\"$emit('update:modelValue', $event.target.checked)\" :id=\"name\" class=\"switch-input\" />\r\n            <label :for=\"name\" class=\"switch-label\"><slot></slot></label>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        modelValue: Boolean,\r\n        name: String\r\n    },\r\n    emits: ['update:modelValue'],\r\n\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.switch-input {\r\n    display: none;\r\n}\r\n\r\n.switch-label {\r\n    position: relative;\r\n    display: inline-block;\r\n    cursor: pointer;\r\n    user-select: none;\r\n    font-weight: 500;\r\n    padding: 16px 0 16px 44px;\r\n}\r\n\r\n.switch-label:before, .switch-label:after {\r\n    content: \"\";\r\n    position: absolute;\r\n    margin: 0;\r\n    outline: 0;\r\n    top: 50%;\r\n    transform: translate(0, -50%);\r\n    transition: all 0.2s ease;\r\n}\r\n\r\n.switch-label:before {\r\n    left: 1px;\r\n    width: 34px;\r\n    height: 14px;\r\n    background-color: #363e50;\r\n    border-radius: 8px;\r\n}\r\n\r\n.switch-label:after {\r\n    left: 0;\r\n    width: 20px;\r\n    height: 20px;\r\n    background-color: var(--color-background-darker);\r\n    border-radius: 50%;\r\n    box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.14), 0 2px 2px 0 rgba(0, 0, 0, 0.098), 0 1px 5px 0 rgba(0, 0, 0, 0.084);\r\n}\r\n\r\n.switch-input:checked + .switch-label:after {\r\n    background-color: var(--color-selected-text);\r\n    transform: translate(80%, -50%);\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        modelValue: Boolean,\r\n        name: String\r\n    },\r\n    emits: ['update:modelValue'],\r\n\r\n})\r\n","import { render } from \"./Switch.vue?vue&type=template&id=358459af&scoped=true\"\nimport script from \"./Switch.vue?vue&type=script&lang=ts\"\nexport * from \"./Switch.vue?vue&type=script&lang=ts\"\n\nimport \"./Switch.vue?vue&type=style&index=0&id=358459af&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-358459af\"\n\nexport default script","\r\nimport SettingsSwitcher from './SettingsSwitcher.vue';\r\nimport Switch from '@/components/Switch.vue';\r\n\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { SettingsSwitcher, Switch },\r\n    \r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            save: false,\r\n            settings: [\r\n                {\r\n                    name: \"Stats type\",\r\n                    desc: \"Choose which type of media you want to be displayed.\",\r\n                    options: [\"both\", \"anime\", \"manga\"]\r\n                },\r\n                {\r\n                    name: \"Beginning of a new day\",\r\n                    desc: \"You may choose to count late night as previous day.\",\r\n                    options: [\"12am\", \"1am\", \"2am\", \"3am\", \"4am\", \"6am\"]\r\n                }\r\n            ] as any[]\r\n        }\r\n    },\r\n\r\n    created(): void {\r\n        this.settings[0].default = this.state.mediaType;\r\n        this.settings[1].default = this.state.updateHour == 0 ? '12am' : this.state.updateHour+'am';\r\n\r\n        this.save = this.state.saveSettings;\r\n    },\r\n\r\n    methods: {\r\n        handleSelect(e: string, i: number): void {\r\n            let val = e.toLowerCase();\r\n            if(i == 0) {\r\n                store.setSettings({ mediaType: val })\r\n            } else if (i == 1) {\r\n                if (e == '12am') store.setSettings({ updateHour: 0 });\r\n                else store.setSettings({ updateHour: Number(e.slice(0, -2)) });\r\n            }\r\n        },\r\n\r\n        toggleSave(e: boolean): void {\r\n            this.save = e;\r\n            store.saveSettings(e);\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Settings.vue?vue&type=template&id=a25cacc0&scoped=true\"\nimport script from \"./Settings.vue?vue&type=script&lang=ts\"\nexport * from \"./Settings.vue?vue&type=script&lang=ts\"\n\nimport \"./Settings.vue?vue&type=style&index=0&id=a25cacc0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-a25cacc0\"\n\nexport default script","<template>\r\n    <div class=\"footer-wrapper\">\r\n        <div class=\"timestamp\">Built on {{ buildTimestamp }}</div>\r\n        <div class=\"footer\">\r\n            <span class=\"footer-link\" @click=\"lightMode\">Toggle theme</span>\r\n            <router-link class=\"footer-link\" to=\"/s/about\">About</router-link>\r\n            <router-link class=\"footer-link\" to=\"/s/help\">Help</router-link>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { toggleTheme } from '@/store/helpers';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    computed: {\r\n        buildTimestamp(): string {\r\n            return document.documentElement.dataset.buildTimestamp as string;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        lightMode(): void {\r\n            toggleTheme();\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.footer-wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n}\r\n\r\n.timestamp {\r\n    color: var(--color-text-gray);\r\n    font-size: 0.86em;\r\n}\r\n.footer-link {\r\n    display: inline-block;\r\n    background: var(--color-background-darker);\r\n    color: var(--color-text-secondary);\r\n    font-size: 0.85em;\r\n    cursor: pointer;\r\n    padding: 12px;\r\n    margin: 12px 3px;\r\n    border-radius: var(--radius);\r\n    \r\n    &:hover {\r\n        text-decoration: underline var(--color-text-secondary);\r\n    }\r\n}\r\n</style>","\r\nimport { toggleTheme } from '@/store/helpers';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    computed: {\r\n        buildTimestamp(): string {\r\n            return document.documentElement.dataset.buildTimestamp as string;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        lightMode(): void {\r\n            toggleTheme();\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Panel.vue?vue&type=template&id=26b8ded0&scoped=true\"\nimport script from \"./Panel.vue?vue&type=script&lang=ts\"\nexport * from \"./Panel.vue?vue&type=script&lang=ts\"\n\nimport \"./Panel.vue?vue&type=style&index=0&id=26b8ded0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-26b8ded0\"\n\nexport default script","\r\nimport { defineComponent } from 'vue';\r\n\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport Button from '@/components/Button.vue';\r\nimport Settings from '@/components/Home/Settings.vue';\r\nimport Panel from '@/components/Home/Panel.vue';\r\n\r\nimport store from '@/store/store';\r\nimport { fetchUserData } from '@/store/api';\r\n\r\nexport default defineComponent({\r\n  components: { Logo, Button, Settings, Panel },\r\n\r\n  data() {\r\n    return {\r\n      show: true,\r\n      loading: false,\r\n      settings: false,\r\n\r\n      username: \"\",\r\n      error: \"\",\r\n      state: store.state\r\n    }\r\n  },\r\n\r\n  mounted(): void {\r\n    if(this.$route.query.error == \"1\") {\r\n      this.showError(\"Something went wrong. Please try again\");\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    // Resolve username/link and redirect to next component for processing.\r\n    send(): void {\r\n      if(this.username.length < 2) {\r\n        return this.showError(\"Hey, I said enter your username.\")\r\n      }\r\n\r\n      if(this.username.startsWith(\"https://anilist.co\")) { // The user entered a profile link.\r\n        try {\r\n          let url = new URL(this.username);\r\n          if(url.pathname.startsWith(\"/user/\")) {\r\n            // If the link was correct, it should return the username. If it wasn't, the next component should return an error.\r\n            let username = url.pathname.split(\"/\")[2];\r\n            this.process(username);\r\n          } else {\r\n            throw 'Invalid URL';\r\n          }\r\n        }\r\n        catch (e)\r\n        {\r\n          this.showError(e);\r\n        }\r\n      } else { // The user entered something different (preferably the username)\r\n        // Saving user settings to localStorage (if user chose to)\r\n        if(this.state.saveSettings) {\r\n          localStorage.setItem(\"updateHour\", String(this.state.updateHour));\r\n          localStorage.setItem(\"mediaType\", this.state.mediaType);\r\n        } else { // clear settings in case they were saved but user opted out of it\r\n          localStorage.removeItem(\"updateHour\");\r\n          localStorage.removeItem(\"mediaType\");\r\n        }\r\n\r\n        this.loading = true;\r\n        this.process(this.username);\r\n      }\r\n    },\r\n\r\n    process(username: string): void {\r\n      // Checking if the user data is already loaded. If it is, it means that the user is revisitng the page so there's no need to fetch anything again\r\n      if(this.state.userData.username == username && this.state.activities.length > 0) {\r\n        console.log(\"directly\")\r\n        this.$router.push('/'+username);\r\n      } else {\r\n        fetchUserData(username)\r\n        .then(resp => {\r\n          store.destroy();\r\n          store.setUserdata(resp);\r\n          this.$router.push('/'+username);\r\n        })\r\n        .catch(() => {\r\n          this.showError(\"Invalid username (or profile is private)\");\r\n        })\r\n      }\r\n    },\r\n\r\n    showError(e: string): void {\r\n      this.loading = false;\r\n      this.error = e;\r\n      setTimeout(() => {\r\n        this.error = \"\";\r\n      }, 5000);\r\n    },\r\n\r\n    toggleSettings(): void {\r\n      this.settings = !this.settings;\r\n    }\r\n  }\r\n\r\n})\r\n","import { render } from \"./Home.vue?vue&type=template&id=19a0ebfc&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=ts\"\nexport * from \"./Home.vue?vue&type=script&lang=ts\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=19a0ebfc&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-19a0ebfc\"\n\nexport default script","<template>\r\n    <div class=\"container\">\r\n        <router-link to=\"/\"><Logo size=\"3em\"></Logo></router-link>\r\n        <div class=\"content\">\r\n            <router-view></router-view>\r\n        </div>\r\n        \r\n        <footer>\r\n            <Panel></Panel>\r\n        </footer>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport Panel from '@/components/Home/Panel.vue';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { Logo, Panel }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\na {\r\n    color: inherit;\r\n}\r\n\r\n.content {\r\n    padding-bottom: 62px;\r\n}\r\n</style>","\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport Panel from '@/components/Home/Panel.vue';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { Logo, Panel }\r\n})\r\n","import { render } from \"./Special.vue?vue&type=template&id=6daf46cc&scoped=true\"\nimport script from \"./Special.vue?vue&type=script&lang=ts\"\nexport * from \"./Special.vue?vue&type=script&lang=ts\"\n\nimport \"./Special.vue?vue&type=style&index=0&id=6daf46cc&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6daf46cc\"\n\nexport default script","<template>\r\n    <Loading v-if=\"loading\"></Loading>\r\n    <div class=\"view\" v-else>\r\n        <div class=\"sidebar-wrapper\" :class=\"{ 'sidebar-hide-mobile': !showSidebar }\">\r\n            <Sidebar @toggle=\"toggleSidebar\"></Sidebar>\r\n\r\n        </div>\r\n        <div class=\"content\">\r\n            <div class=\"mobile-header\">\r\n                <div class=\"mobile-icon\" @click=\"toggleSidebar\">\r\n                    <font-awesome-icon icon=\"bars\" size=\"lg\" />  \r\n                </div>\r\n                <router-link class=\"a\" to=\"/\"><Logo size=\"1.8em\"></Logo></router-link>\r\n            </div>\r\n            <router-view @loadRequest=\"loadEarlierActivities\"></router-view>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { compareDates, fetchActivity, fetchUserData } from '@/store/api';\r\nimport store from '@/store/store';\r\n\r\nimport Loading from '@/components/User/Loading.vue';\r\nimport Sidebar from '@/components/User/Sidebar.vue';\r\nimport Logo from '@/components/Home/Logo.vue';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport { defineComponent } from '@vue/runtime-core';\r\n\r\nexport default defineComponent({\r\n    components: { Loading, Sidebar, Logo },\r\n\r\n    data() {\r\n        return {\r\n            loading: true,\r\n            lock: false,\r\n            lastPage: 0,\r\n            state: store.state,\r\n\r\n            showSidebar: false,\r\n            \r\n            preloadedActivities: [] as ActivityDay[],\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        // Checking if this page is visited directly (no userData in state)\r\n        // or from the main page (userData set.)\r\n        // If there is no userData, the component has to fetch and set it on its own.\r\n        if(!this.state.userData.id) {\r\n            fetchUserData(this.$route.params.user as string)\r\n            .then(resp => {\r\n                store.setUserdata(resp);\r\n                this.loadActivites();\r\n            })\r\n            .catch(() => {\r\n                this.$router.push({ path: '/', query: { error: 1 }});\r\n            })\r\n        } else if (this.state.activities.length == 0) {\r\n            this.loadActivites();\r\n        } else {\r\n            this.loading = false;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        // Load and parse user's activities (only used for the first time)\r\n        loadActivites(): void {\r\n            fetchActivity(this.state.userData.id, this.state.currentPage, this.state.mediaType)\r\n            .then(resp => {\r\n                this.lastPage = resp.data.Page.pageInfo.lastPage;\r\n                const activities = store.parseActivities(resp.data.Page.activities);\r\n\r\n                if(activities.length == 0) {\r\n                    return this.$router.push({ path: '/', query: { error: 1 }});\r\n                }\r\n                // Preload next page of user's activites.\r\n                // It's because next page may contain activity from the last day on the first page, and it's better to display it together. Also for better user experience.\r\n                this.preloadActivites(activities)\r\n                .then(preloaded => {\r\n                    store.setPreloadedActivities(preloaded);\r\n\r\n                    store.appendActivities(activities);\r\n                    this.loading = false;\r\n                })\r\n                \r\n            })\r\n        },\r\n\r\n        loadEarlierActivities(): void {\r\n            // Lock so the user can't smash the button and break it.\r\n            if(this.lock) return;\r\n            this.lock = true;\r\n            store.incrementCurrentPage();\r\n\r\n            const activities = store.appendActivities(this.state.preloadedActivities);\r\n            this.preloadActivites(activities)\r\n            .then(preloaded => {\r\n                store.setPreloadedActivities(preloaded);\r\n\r\n                this.lock = false;\r\n            })\r\n        },\r\n\r\n        // Load the next page of user's activities and save for later use.\r\n        async preloadActivites(activities: ActivityDay[]): Promise<ActivityDay[]> {\r\n            if(this.state.currentPage == this.lastPage) return []; // Reached the end, nothing to preload.\r\n\r\n            const nextPage = await fetchActivity(this.state.userData.id, this.state.currentPage + 1, this.state.mediaType);\r\n            const preloadedActivities = store.parseActivities(nextPage.data.Page.activities);\r\n\r\n            // Looking for duplicates\r\n            // We want to give user a complete summary of a particular day, but sometimes it's continued on the second page.\r\n            // That's why, to complete a particular day, we have to look if it's mentioned on the preloaded page and move (remove from preloaded, add to current) it to currently displayed activities (activities)\r\n            const duplicates = preloadedActivities.filter(x => compareDates(x.day, activities[activities.length - 1].day));\r\n            duplicates.forEach(dup => {\r\n                // Remove from preloaded\r\n                const indexToRemove = preloadedActivities.indexOf(dup);\r\n                preloadedActivities.splice(indexToRemove, 1);\r\n\r\n                // Add to current\r\n                // Find the last element (last day present on current page) and \"merge\" it with dup\r\n                const old = activities[activities.length - 1];\r\n                old.media = old.media.concat(dup.media);\r\n                old.episodes += dup.episodes;\r\n                old.chapters += dup.chapters;\r\n            });\r\n\r\n            return preloadedActivities;\r\n        },\r\n\r\n        toggleSidebar(): void {\r\n            this.showSidebar = !this.showSidebar\r\n        }\r\n    }\r\n})\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.a {\r\n    color: inherit;\r\n}\r\n\r\n.mobile-header {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 8px;\r\n}\r\n\r\n.mobile-icon {\r\n    padding: 10px;\r\n    margin-right: 8px;\r\n\r\n    border-radius: var(--radius);\r\n    transition: .2s;\r\n\r\n    &:hover {\r\n        background: var(--color-background-darker)\r\n    }\r\n}\r\n\r\n\r\n@media screen and (max-width: 1020px) {\r\n    .sidebar-wrapper {\r\n        position: fixed;\r\n        left: 0;\r\n        right: 0;\r\n        top: 0;\r\n        z-index: 4;\r\n\r\n        display: flex;\r\n\r\n        visibility: visible;\r\n        opacity: 1;\r\n        transition: opacity .2s ease-out, visibility .2s;\r\n    }\r\n\r\n    .sidebar-backdrop {\r\n        position: fixed;\r\n        left: 0;\r\n        right: 0;\r\n        top: 0;\r\n        bottom: 0;\r\n        background: rgba(0,0,0,.7);\r\n        flex-grow: 2;\r\n    }\r\n\r\n    .sidebar-hide-mobile {\r\n        visibility: hidden;\r\n        opacity: 0;\r\n    }\r\n}\r\n@media screen and (min-width: 1021px) {\r\n    .mobile-header {\r\n        display: none;\r\n    }\r\n\r\n    .view {\r\n        display: grid;\r\n        grid-template-columns: 20% 80%;\r\n\r\n        max-width: 1280px;\r\n        margin: auto;\r\n    }\r\n\r\n    .sidebar-backdrop {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@keyframes appear {\r\n    from {\r\n        opacity: 0;\r\n    }\r\n\r\n    to {\r\n        opacity: 1;\r\n    }\r\n}\r\n</style>","<template>\r\n    <div class=\"container\">\r\n        <Logo size=\"3em\"></Logo>\r\n        <div class=\"loading\">Loading...</div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { Logo }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.loading {\r\n    font-size: 3em;\r\n    font-weight: 500;\r\n    padding: 10px;\r\n    border-bottom: 3px solid;\r\n\r\n    animation: pulse 2s linear infinite;\r\n}\r\n</style>","\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { Logo }\r\n})\r\n","import { render } from \"./Loading.vue?vue&type=template&id=64c13412&scoped=true\"\nimport script from \"./Loading.vue?vue&type=script&lang=ts\"\nexport * from \"./Loading.vue?vue&type=script&lang=ts\"\n\nimport \"./Loading.vue?vue&type=style&index=0&id=64c13412&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-64c13412\"\n\nexport default script","<template>\r\n    <div class=\"sidebar\">\r\n        <div class=\"header\">\r\n            <div class=\"header-icon\" @click=\"emitToggle\">\r\n                <font-awesome-icon icon=\"bars\" size=\"lg\" />\r\n            </div>\r\n        </div>\r\n        <router-link class=\"a\" to=\"/\"><Logo size=\"2em\"></Logo></router-link>\r\n        <MenuItem @click=\"emitToggle\" icon=\"user-circle\" to=\"\">Overview</MenuItem>\r\n        <div class=\"category\" v-if=\"state.mediaType != 'manga'\">\r\n            <span class=\"category-header\">Anime</span>\r\n            <MenuItem @click=\"emitToggle\" icon=\"list\" to=\"/list/anime\">List</MenuItem>\r\n            <MenuItem @click=\"emitToggle\" icon=\"history\" to=\"/history/anime\">History</MenuItem>\r\n        </div>\r\n        <div class=\"category\" v-if=\"state.mediaType != 'anime'\">\r\n            <span class=\"category-header\">Manga</span>\r\n            <MenuItem @click=\"emitToggle\" icon=\"book-open\" to=\"/list/manga\">List</MenuItem>\r\n            <MenuItem @click=\"emitToggle\" icon=\"history\" to=\"/history/manga\">History</MenuItem>\r\n        </div>\r\n        <div class=\"category category-small\">\r\n            <span @click=\"toggleTheme\" class=\"item-small\">Toggle theme</span>\r\n            <router-link to=\"/s/help\" class=\"item-small\">Help</router-link>\r\n            <router-link to=\"/s/about\" class=\"item-small\">About</router-link>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\n\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport MenuItem from '@/components/User/Sidebar/MenuItem.vue';\r\nimport { toggleTheme } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    components: { Logo, MenuItem },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        emitToggle(): void {\r\n            this.$emit('toggle');\r\n        },\r\n\r\n        toggleTheme(): void {\r\n            toggleTheme();\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.sidebar {\r\n    position: sticky;\r\n    top: 0;\r\n    background: var(--color-background);\r\n}\r\n\r\n.header {\r\n    padding: 8px;\r\n}\r\n\r\n.header-icon {\r\n    padding: 10px;\r\n    margin-right: 8px;\r\n\r\n    border-radius: var(--radius);\r\n    transition: .2s;\r\n\r\n    &:hover {\r\n        background: var(--color-background-darker)\r\n    }\r\n}\r\n\r\n.a {\r\n    color: inherit;\r\n    display: block;\r\n    padding: 15px;\r\n}\r\n\r\n.category-header {\r\n    display: block;\r\n    padding: 5px;\r\n    margin: 0 5px;\r\n    font-weight: 500;\r\n}\r\n\r\n.category-small {\r\n    margin: 5px;\r\n    padding: 10px;\r\n}\r\n\r\n.item-small {\r\n    display: block;\r\n    \r\n    font-size: .86em;\r\n    margin-bottom: 5px;\r\n    color: var(--color-text-secondary);\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        text-decoration: underline;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 1020px) {\r\n    .sidebar {\r\n        width: 100%;\r\n        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2)\r\n    }\r\n\r\n    .menuitem {\r\n        padding: 12px 10px;\r\n        margin: 3px;\r\n    }\r\n\r\n    .a {\r\n        display: none;\r\n    }\r\n\r\n    .category-small {\r\n        display: flex;\r\n        justify-content: space-around;\r\n    }\r\n}\r\n\r\n@media screen and (min-width: 1021px) {\r\n    .header {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@keyframes appear {\r\n    from {\r\n        transform: translateX(-300px);\r\n\r\n    }\r\n\r\n    to {\r\n        transform: translateX(0px);\r\n    }\r\n}\r\n</style>","<template>  \r\n    <router-link :to=\"'/'+$route.params.user+to\" class=\"menuitem\">\r\n            <font-awesome-icon :icon=\"icon\" size=\"lg\" fixed-width />\r\n            <span class=\"label\">\r\n                <slot></slot>\r\n            </span>\r\n    </router-link>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        to: String,\r\n        icon: String\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.menuitem {\r\n    background: inherit; // no idea why it's needed\r\n    padding: 10px;\r\n    margin: 5px;\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    border-radius: 5px;\r\n    transition: background .1s;\r\n\r\n    &:not(.router-link-exact-active):hover {\r\n        background: var(--color-selected-background);\r\n        color: white;\r\n    }\r\n}\r\n\r\n.router-link-exact-active {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n}\r\n\r\n.label {\r\n    padding-left: 15px;\r\n    font-weight: 500;\r\n}\r\n\r\na {\r\n    color: inherit;\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        to: String,\r\n        icon: String\r\n    }\r\n})\r\n","import { render } from \"./MenuItem.vue?vue&type=template&id=1903ee1d&scoped=true\"\nimport script from \"./MenuItem.vue?vue&type=script&lang=ts\"\nexport * from \"./MenuItem.vue?vue&type=script&lang=ts\"\n\nimport \"./MenuItem.vue?vue&type=style&index=0&id=1903ee1d&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1903ee1d\"\n\nexport default script","\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\n\r\nimport Logo from '@/components/Home/Logo.vue';\r\nimport MenuItem from '@/components/User/Sidebar/MenuItem.vue';\r\nimport { toggleTheme } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    components: { Logo, MenuItem },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        emitToggle(): void {\r\n            this.$emit('toggle');\r\n        },\r\n\r\n        toggleTheme(): void {\r\n            toggleTheme();\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Sidebar.vue?vue&type=template&id=36f57121&scoped=true\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=ts\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=ts\"\n\nimport \"./Sidebar.vue?vue&type=style&index=0&id=36f57121&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-36f57121\"\n\nexport default script","\r\nimport { compareDates, fetchActivity, fetchUserData } from '@/store/api';\r\nimport store from '@/store/store';\r\n\r\nimport Loading from '@/components/User/Loading.vue';\r\nimport Sidebar from '@/components/User/Sidebar.vue';\r\nimport Logo from '@/components/Home/Logo.vue';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport { defineComponent } from '@vue/runtime-core';\r\n\r\nexport default defineComponent({\r\n    components: { Loading, Sidebar, Logo },\r\n\r\n    data() {\r\n        return {\r\n            loading: true,\r\n            lock: false,\r\n            lastPage: 0,\r\n            state: store.state,\r\n\r\n            showSidebar: false,\r\n            \r\n            preloadedActivities: [] as ActivityDay[],\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        // Checking if this page is visited directly (no userData in state)\r\n        // or from the main page (userData set.)\r\n        // If there is no userData, the component has to fetch and set it on its own.\r\n        if(!this.state.userData.id) {\r\n            fetchUserData(this.$route.params.user as string)\r\n            .then(resp => {\r\n                store.setUserdata(resp);\r\n                this.loadActivites();\r\n            })\r\n            .catch(() => {\r\n                this.$router.push({ path: '/', query: { error: 1 }});\r\n            })\r\n        } else if (this.state.activities.length == 0) {\r\n            this.loadActivites();\r\n        } else {\r\n            this.loading = false;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        // Load and parse user's activities (only used for the first time)\r\n        loadActivites(): void {\r\n            fetchActivity(this.state.userData.id, this.state.currentPage, this.state.mediaType)\r\n            .then(resp => {\r\n                this.lastPage = resp.data.Page.pageInfo.lastPage;\r\n                const activities = store.parseActivities(resp.data.Page.activities);\r\n\r\n                if(activities.length == 0) {\r\n                    return this.$router.push({ path: '/', query: { error: 1 }});\r\n                }\r\n                // Preload next page of user's activites.\r\n                // It's because next page may contain activity from the last day on the first page, and it's better to display it together. Also for better user experience.\r\n                this.preloadActivites(activities)\r\n                .then(preloaded => {\r\n                    store.setPreloadedActivities(preloaded);\r\n\r\n                    store.appendActivities(activities);\r\n                    this.loading = false;\r\n                })\r\n                \r\n            })\r\n        },\r\n\r\n        loadEarlierActivities(): void {\r\n            // Lock so the user can't smash the button and break it.\r\n            if(this.lock) return;\r\n            this.lock = true;\r\n            store.incrementCurrentPage();\r\n\r\n            const activities = store.appendActivities(this.state.preloadedActivities);\r\n            this.preloadActivites(activities)\r\n            .then(preloaded => {\r\n                store.setPreloadedActivities(preloaded);\r\n\r\n                this.lock = false;\r\n            })\r\n        },\r\n\r\n        // Load the next page of user's activities and save for later use.\r\n        async preloadActivites(activities: ActivityDay[]): Promise<ActivityDay[]> {\r\n            if(this.state.currentPage == this.lastPage) return []; // Reached the end, nothing to preload.\r\n\r\n            const nextPage = await fetchActivity(this.state.userData.id, this.state.currentPage + 1, this.state.mediaType);\r\n            const preloadedActivities = store.parseActivities(nextPage.data.Page.activities);\r\n\r\n            // Looking for duplicates\r\n            // We want to give user a complete summary of a particular day, but sometimes it's continued on the second page.\r\n            // That's why, to complete a particular day, we have to look if it's mentioned on the preloaded page and move (remove from preloaded, add to current) it to currently displayed activities (activities)\r\n            const duplicates = preloadedActivities.filter(x => compareDates(x.day, activities[activities.length - 1].day));\r\n            duplicates.forEach(dup => {\r\n                // Remove from preloaded\r\n                const indexToRemove = preloadedActivities.indexOf(dup);\r\n                preloadedActivities.splice(indexToRemove, 1);\r\n\r\n                // Add to current\r\n                // Find the last element (last day present on current page) and \"merge\" it with dup\r\n                const old = activities[activities.length - 1];\r\n                old.media = old.media.concat(dup.media);\r\n                old.episodes += dup.episodes;\r\n                old.chapters += dup.chapters;\r\n            });\r\n\r\n            return preloadedActivities;\r\n        },\r\n\r\n        toggleSidebar(): void {\r\n            this.showSidebar = !this.showSidebar\r\n        }\r\n    }\r\n})\r\n\r\n","import { render } from \"./User.vue?vue&type=template&id=bed9e344&scoped=true\"\nimport script from \"./User.vue?vue&type=script&lang=ts\"\nexport * from \"./User.vue?vue&type=script&lang=ts\"\n\nimport \"./User.vue?vue&type=style&index=0&id=bed9e344&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-bed9e344\"\n\nexport default script","<template>\r\n    <div class=\"help\">\r\n        <h3>How does it work?</h3>\r\n        AniList has a small feature called \"Activity\". Each time you watch an episode, add something to your planning list, an activity is created. anistats takes adventage of that to count how many episodes you've seen on a specific day.\r\n        <h3>Why it doesn't work?</h3>\r\n        <h4>Activity Merge Time</h4>\r\n        <img src=\"@/assets/merge.png\">\r\n        <br>\r\n        <b>It has to be set to 12 hours or less for anistats to work properly</b> (in most use cases). If you set it to 'Always', it produces <b>one activity per anime</b>, no matter how long it took you to watch it. For anistats, it's best if there is <b>at least one activity per anime per day.</b>\r\n        <br>\r\n        Note: changing it won't affect previous activities.\r\n        <br><br>\r\n        Also, you have to add episodes using this little '+' symbol next to the episode count instead of setting it directly from the 'Edit' menu.\r\n        <br>\r\n        Let's say you've started a new series yesterday and watched 3 episodes so far. \r\n        Today, after watching 3 next episodes, you set the episode count directly to '6'. AniList creates an activity saying that you've watched episode 6. anistats counts that as <b>one</b> episode.\r\n        <br>\r\n        If you click the '+' symbol three times instead, the activity says that you've watched episodes 4-6. anistats sees that correctly as 3 episodes.\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.help {\r\n    max-height: 60vh;\r\n    overflow-y: auto;\r\n}\r\nh3, h4, b {\r\n    font-weight: 500;\r\n}\r\n\r\nimg {\r\n    max-width: 100%;\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n","import { render } from \"./Help.vue?vue&type=template&id=59725bf0&scoped=true\"\nimport script from \"./Help.vue?vue&type=script&lang=ts\"\nexport * from \"./Help.vue?vue&type=script&lang=ts\"\n\nimport \"./Help.vue?vue&type=style&index=0&id=59725bf0&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-59725bf0\"\n\nexport default script","<template>\r\n    <div>\r\n        <h2>About</h2>\r\n        <p>anistats is an extension for AniList that lets you check how much time you spend/waste on watching anime and reading manga based on your activity.</p>\r\n        <p>Source code of this site is available <a href=\"https://github.com/pizza61/anistats2\">here</a>.</p>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n</script>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n","import { render } from \"./About.vue?vue&type=template&id=b85b726c\"\nimport script from \"./About.vue?vue&type=script&lang=ts\"\nexport * from \"./About.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n    <div class=\"main\">\r\n        <transition name=\"popup-backdrop\">\r\n            <div class=\"popup\" v-if=\"showTooltip\" @click=\"popupHide\"></div>\r\n        </transition>\r\n        \r\n        <div class=\"left\">\r\n            <DataRange @loadRequest=\"load\"></DataRange>\r\n            <Calendar @popup=\"showPopup\" @error=\"showError\" @dynamicPopup=\"fetchPopup\"></Calendar>\r\n            <div class=\"tooltipct\">\r\n                <transition name=\"easein\" mode=\"in-out\">\r\n                    <div v-if=\"showTooltip\" class=\"tooltip\">\r\n                        <Tooltip :day=\"tooltipActivities\" @close=\"popupHide\" :loading=\"popupLoading\"></Tooltip>\r\n                    </div>\r\n                </transition>\r\n            </div>\r\n            <Chart :height=\"150\" id=\"episodes\" row=\"episodes\" v-if=\"state.mediaType != 'manga'\">Episodes watched</Chart>\r\n            <Chart :height=\"150\" id=\"chapters\" row=\"chapters\" v-if=\"state.mediaType != 'anime'\">Chapters read</Chart>\r\n        </div>\r\n        <DetailsContainer @loadRequest=\"load\"></DetailsContainer>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport store from '@/store/store';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nimport DetailsContainer from '@/components/User/Details/DetailsContainer.vue';\r\nimport Calendar from './Calendar.vue';\r\nimport DataRange from './DataRange.vue'\r\nimport Tooltip from './Tooltip.vue';\r\nimport Chart from './Chart.vue';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport { fetchActivity } from '@/store/api';\r\n\r\nexport default defineComponent({\r\n    components: { DetailsContainer, Calendar, Tooltip, DataRange, Chart },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n\r\n            showTooltip: false,\r\n            tooltipActivities: {} as ActivityDay,\r\n            \r\n            popupLoading: false\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        load(): void {\r\n            this.$emit('loadRequest');\r\n        },\r\n\r\n        // Show popup using already loaded data\r\n        showPopup(e: { activities: ActivityDay, event: MouseEvent }): void {\r\n            this.showTooltip = false;\r\n            this.tooltipActivities = e.activities;\r\n        \r\n            this.showTooltip = true;\r\n        },\r\n\r\n        // Show popup having loaded data\r\n        fetchPopup(e: { event: MouseEvent, d: number, m: number, y: number}): void {\r\n            this.popupLoading = true;\r\n            this.showTooltip = true;\r\n            let date = new Date(e.y, e.m-1, e.d);\r\n\r\n            // Get timestamp of the beginning and the end of this day.\r\n            // Converting to AniList time and adding hours according to user's preferences.\r\n            const begin = (date.getTime()/1000)+this.state.updateHour*3600;\r\n            const end = begin+86400; // add 24 hours to the beginning timestamp\r\n            \r\n            fetchActivity(this.state.userData.id, 1, this.state.mediaType, begin, end)\r\n            .then(resp => {\r\n                const activities = store.parseActivities(resp.data.Page.activities);\r\n                this.tooltipActivities = activities[0];\r\n\r\n                if(activities.length == 0) this.showTooltip = false;\r\n                else this.popupLoading = false;\r\n            })\r\n        },\r\n\r\n        showError(e: any): void {\r\n            console.log(e);\r\n        },\r\n\r\n        popupHide(): void {\r\n            this.showTooltip = false;\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.left {\r\n    margin: 12.944px 10px;\r\n}\r\n\r\n@media screen and (min-width: 901px) {\r\n    .left {\r\n        margin-right: 15px;\r\n    }\r\n}\r\n\r\n.tooltip {\r\n    z-index: 2;\r\n    flex-grow: 1;\r\n    max-width: 100%;\r\n}\r\n\r\n.tooltipct {\r\n    z-index: 2;\r\n}\r\n\r\nbutton {\r\n    align-self: flex-start;\r\n}\r\n\r\n.popup {\r\n    position: fixed;\r\n    bottom: 0;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n}\r\n\r\n\r\n// POPUP\r\n\r\n.popup {\r\n    z-index: 2;\r\n    background: rgba(0,0,0,.7);\r\n}\r\n\r\n.popup-enter-from, .popup-leave-to {\r\n    opacity: 0;\r\n}\r\n\r\n.popup-enter-active, .popup-leave-active {\r\n    transition: .1s ease-in-out;\r\n}\r\n\r\n// transitions\r\n\r\n.easein-enter-from, .easein-leave-to {\r\n    opacity: 0;\r\n    transform: scale(0.9);\r\n}\r\n\r\n.easein-enter-active, .easein-leave-active {\r\n    transition: .2s ease;\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n    .tooltipct {\r\n        position: fixed;\r\n        bottom: 10px;\r\n        left: 10px;\r\n        right: 10px;\r\n    }\r\n}\r\n\r\n@media screen and (min-width: 901px) {\r\n    .main {\r\n        display: grid;\r\n        grid-template-columns: 55% 45%;\r\n    }\r\n\r\n    .tooltipct {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n    }\r\n}\r\n</style>","<template>\r\n    <div class=\"details\">\r\n        <div class=\"title\">\r\n            Timeline\r\n        </div>\r\n        <div class=\"group\" v-for=\"(day, i) in state.activities\" :key=\"i\">\r\n            <div class=\"group-header\">\r\n                <div class=\"date-group\">\r\n                    <span class=\"weekday\">{{ day.day.weekday }}</span>\r\n                    <span class=\"date\">{{ prettyDate(day.day) }}</span>\r\n                </div>\r\n                \r\n                <span style=\"flex: 1\"></span>\r\n                <div class=\"prop\" v-if=\"state.mediaType != 'anime'\">\r\n                    <div class=\"prop-value\">{{ day.chapters }}</div>\r\n                    <div class=\"prop-desc\">chapters</div>\r\n                </div>\r\n                <div class=\"prop\" v-if=\"state.mediaType != 'manga'\">\r\n                    <div class=\"prop-value\">{{ day.episodes }}</div>\r\n                    <div class=\"prop-desc\">episodes</div>\r\n                </div>\r\n            </div>\r\n            <SeriesItem v-for=\"(media, i) in day.media\" :key=\"i\" :stamp=\"day.day.d+'a'+day.day.m+i\" :media=\"media\"></SeriesItem>\r\n        </div>\r\n        <button class=\"button group\" @click=\"$emit('loadRequest')\">\r\n            More...\r\n        </button>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport store from '@/store/store';\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\nimport SeriesItem from './SeriesItem.vue';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { SeriesItem },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@media screen and (min-width: 901px) {\r\n    .details {\r\n        padding: 12.944px;\r\n        background: var(--color-selected-background);\r\n        border-left: 1px solid var(--color-background-border);\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n    .details {\r\n        margin: 12.944px 10px;\r\n    }\r\n}\r\n\r\n.title {\r\n    margin-bottom: 12.944px;\r\n    font-weight: 500;\r\n    font-size: 1.2em;\r\n}\r\n\r\n.group {\r\n    box-shadow: 0 4px 10px rgba(0,0,0,.25);\r\n    background: var(--color-background);\r\n    border-radius: var(--radius);\r\n    overflow: hidden;\r\n\r\n    margin-bottom: 12.944px;\r\n}\r\n\r\n.group-header {\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    padding: 8px 12.944px;\r\n}\r\n\r\n.weekday {\r\n    display: block;\r\n    font-size: 0.86em;\r\n    padding-right: 3px;\r\n    color: var(--color-text-secondary);\r\n}\r\n\r\n.date {\r\n    display: block;\r\n    font-weight: 500;\r\n}\r\n\r\n.button {\r\n    appearance: none;\r\n    font: inherit;\r\n    color: inherit;\r\n    outline: none;\r\n    border: none;\r\n    display: block;\r\n\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n    text-align: center;\r\n    padding: 12px;\r\n    width: 100%;\r\n    font-weight: 500;\r\n\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background: var(--color-selected-background);\r\n        color: var(--color-selected-text);\r\n    }\r\n}\r\n</style>","<template>\r\n    <div class=\"item-wrapper\">\r\n        <div class=\"item\" @click=\"toggleDisplay\">\r\n            <img class=\"image\" :alt=\"'Cover image of '+media.title\" :src=\"media.cover\">\r\n            <span class=\"title\" :title=\"media.title\">{{ media.title }}</span>\r\n            <span style=\"flex: 1;\"></span>\r\n            <div class=\"prop\">\r\n                <span class=\"prop-value\">{{ media.episodes }}</span>\r\n                <span class=\"prop-desc\">{{ media.type === 'ANIME' ? 'episodes' : 'chapters' }}</span>\r\n            </div>\r\n        </div>\r\n        <transition name=\"details\">\r\n            <SeriesDetails v-if=\"details && !hide\" :stamp=\"stamp\" :media=\"media\"></SeriesDetails>\r\n        </transition>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\nimport SeriesDetails from './SeriesDetails.vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: Object,\r\n        hide: Boolean,\r\n        stamp: String\r\n    },\r\n\r\n    components: { SeriesDetails },\r\n\r\n    data() {\r\n        return {\r\n            details: false\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        hide: function(val) {\r\n            this.details = !val;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        toggleDisplay(): void {\r\n            this.$emit('toggle');\r\n            this.details = !this.details;\r\n        }\r\n    }\r\n\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.item {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    padding: 10px 2px 10px 12px; \r\n\r\n    &:hover {\r\n        background: var(--color-selected-background);\r\n        color: var(--color-selected-text);\r\n    }\r\n}\r\n\r\n.image {\r\n    object-fit: cover;\r\n    border-radius: 3px;\r\n    min-width: 36px;\r\n    width: 36px;\r\n    height: 36px;\r\n\r\n    margin-right: 12px;\r\n}\r\n\r\n.title {\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.details-enter-from, .details-leave-to {\r\n    transform: scale(0.9);\r\n    opacity: 0;\r\n}\r\n.details-enter-active, .details-leave-active {\r\n    transition: .2s ease;\r\n}\r\n</style>","<template>\r\n    <div v-if=\"loading\">\r\n        <CheapLoading></CheapLoading>\r\n    </div>\r\n    <div class=\"entries\" v-else>\r\n        <div class=\"header\">\r\n            <div class=\"tip-name\">\r\n                Planned since\r\n            </div>\r\n            <div class=\"tip-value\">\r\n                {{ added }}\r\n            </div>\r\n        </div>\r\n        <ActivityChart :height=\"100\" :id=\"media.id+''+stamp\" :row=\"media.type == 'ANIME' ? 'episodes' : 'chapters'\" :activities=\"activities\"></ActivityChart>\r\n        <!--<div class=\"entry\" v-for=\"(day, i) in activities\" :key=\"i\">\r\n            <div class=\"entry-date\">\r\n                {{ prettyDate(day.day)}}\r\n            </div>\r\n            <div class=\"entry-prop\">\r\n                <span class=\"entry-value\">{{ media.type == 'ANIME' ? day.episodes : day.chapters }}</span>\r\n                <span class=\"entry-desc\">{{ media.type == 'ANIME' ? ' episodes' : ' chapters' }}</span>\r\n            </div>\r\n        </div>-->\r\n        \r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport CheapLoading from '@/components/CheapLoading.vue';\r\nimport ActivityChart from '@/components/User/ActivityChart.vue';\r\n\r\n\r\nimport { fetchMedia } from '@/store/api';\r\nimport { findAddedDate, prettyDate } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: {} as any,\r\n        stamp: String\r\n    },\r\n\r\n    components: { CheapLoading, ActivityChart },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate,\r\n\r\n            activities: [] as ActivityDay[],\r\n            added: \"Unknown\",\r\n\r\n            loading: true\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        fetchMedia(this.state.userData.id, this.media.id)\r\n        .then(resp => {\r\n            const rawActivities = resp.data.Page.activities;\r\n            this.activities = store.parseActivities(rawActivities).reverse();\r\n\r\n            if(typeof this.media.added == 'undefined') {\r\n                this.added = findAddedDate(rawActivities);   \r\n            } else {\r\n                this.added = (this.media.added.time == 0 ? 'Unknown' : prettyDate(this.media.added));\r\n            }\r\n\r\n            this.loading = false;\r\n        })\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.header {\r\n    display: flex;\r\n    padding: 8px;\r\n    border-bottom: 1px solid var(--color-selected-text);\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.tip-value {\r\n    font-size: .95em;\r\n    font-weight: 500;\r\n}\r\n\r\n.tip-name {\r\n    color: var(--color-text-secondary);\r\n    font-size: .86em;\r\n}\r\n</style>","<template>\r\n    <div class=\"loading\">\r\n        Loading...\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.loading {\r\n    font-weight: 500;\r\n    padding: 10px 16px;\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({})\r\n","import { render } from \"./CheapLoading.vue?vue&type=template&id=b816d2c6&scoped=true\"\nimport script from \"./CheapLoading.vue?vue&type=script&lang=ts\"\nexport * from \"./CheapLoading.vue?vue&type=script&lang=ts\"\n\nimport \"./CheapLoading.vue?vue&type=style&index=0&id=b816d2c6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-b816d2c6\"\n\nexport default script","<template>\r\n        <div class=\"chart\" ref=\"chart\" @mousedown=\"mouseDown\" @mouseup=\"mouseUp\" @mousemove=\"mouseMove\" @mouseleave=\"mouseLeave\">\r\n            <div :id=\"'area-'+id\" ref=\"area\"></div>\r\n            <div class=\"axis\">\r\n                <div class=\"label\" v-for=\"(day, i) in activities\" :key=\"i\">\r\n                    <span class=\"label-top\">{{ prettyDate(day.day) }}</span>\r\n                    <span class=\"label-bottom\">{{ day.day.weekday }}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    \r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, PropType } from 'vue'\r\nimport * as d3 from \"d3\";\r\n\r\nimport { ActivityDay } from '@/interfaces/activity'\r\nimport store from '@/store/store'\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        activities: {\r\n            type: Array as PropType<ActivityDay[]>,\r\n            required: true\r\n        },\r\n        row: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        id: String,\r\n        height: {\r\n            type: Number,\r\n            required: true\r\n        }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate,\r\n\r\n            margin: { top: 50, bottom: 10 },\r\n\r\n            dragging: false,\r\n            startX: 0,\r\n            scrollLeft: 0\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        activities: function() {\r\n            this.clean();\r\n            this.render();\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        this.render();\r\n    },\r\n    \r\n\r\n    methods: {\r\n        clean(): void {\r\n            const node = (this.$refs.area as HTMLDivElement)\r\n            while(node.lastChild) {\r\n                node.removeChild(node.lastChild);\r\n            }\r\n        },\r\n        render(): void {\r\n            console.dir(this.activities);\r\n\r\n            const columnWidth = 100;\r\n            const width = this.activities.length * columnWidth;\r\n\r\n            const svg = d3.select('#area-'+this.id)\r\n            .append(\"svg\")\r\n            .attr(\"width\", width)\r\n            .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\r\n            .append(\"g\")\r\n            .attr(\"transform\", `translate(0, ${this.margin.top})`);\r\n\r\n            // x axis (human-readable day names)\r\n            const x = d3.scaleBand()\r\n            .domain(this.activities.map(x => prettyDate(x.day)))\r\n            .range([0, width])\r\n\r\n            const countArray = this.activities.map((x: any) => x[this.row]);\r\n            // y axis (episode/chapter count)\r\n            const y = d3.scaleLinear()\r\n            .domain([d3.min(countArray), d3.max(countArray) as number])\r\n            .range([this.height, 0])\r\n\r\n            const line = d3.line<ActivityDay>()\r\n            .x((d: ActivityDay) => {\r\n                return x(prettyDate(d.day)) as number + columnWidth/2;\r\n            })\r\n            .y((d: any) => y(d[this.row]))\r\n            .curve(d3.curveMonotoneX)\r\n\r\n            // AREA\r\n            svg.append(\"path\")\r\n            .datum(this.activities)\r\n            .attr(\"fill\", \"none\")\r\n            .attr(\"stroke\", \"#188cc6\") // TODO move to CSS\r\n            .attr(\"stroke-width\", 4)\r\n            .attr(\"d\", line)\r\n\r\n            // EPISODE COUNT LABELS\r\n            svg.selectAll(\"labels\")\r\n            .data(this.activities)\r\n            .join(\"text\")\r\n            .text((d: any) => d[this.row])\r\n            .attr(\"class\", \"chart-label\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"font-weight\", \"500\")\r\n            .attr(\"x\", d => x(prettyDate(d.day)) as number + columnWidth/2)\r\n            .attr(\"y\", (d: any) => y(d[this.row]) - 15);\r\n\r\n            // POINTS\r\n            svg.selectAll(\"circles\")\r\n            .data(this.activities)\r\n            .join(\"circle\")\r\n            .attr(\"fill\", \"#34bbff\") // TODO move to CSS\r\n            .attr(\"stroke\", \"none\")\r\n            .attr(\"fill-opacity\", \"0.7\")\r\n            .attr(\"r\", 5)\r\n            .attr(\"cx\", d => x(prettyDate(d.day)) as number + columnWidth/2)\r\n            .attr(\"cy\", (d: any) => y(d[this.row]));\r\n        },\r\n\r\n        // Chart scrolling event handlers\r\n        mouseDown(e: MouseEvent) {\r\n            this.dragging = true;\r\n            this.startX = e.pageX - (this.$refs.chart as HTMLDivElement).offsetLeft;\r\n            this.scrollLeft = (this.$refs.chart as HTMLDivElement).scrollLeft;\r\n        },\r\n\r\n        mouseUp() {\r\n            this.dragging = false;\r\n        },\r\n\r\n        mouseMove(e: MouseEvent) {\r\n            if(!this.dragging) return;\r\n            const x = e.pageX - (this.$refs.chart as HTMLDivElement).offsetLeft;\r\n            const walk = (x - this.startX) * 1.5;\r\n            (this.$refs.chart as HTMLDivElement).scrollLeft = this.scrollLeft - walk;\r\n        },\r\n\r\n        mouseLeave() {\r\n            this.dragging = false;\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.chart {\r\n    overflow-x: scroll;\r\n    white-space: nowrap;\r\n    user-select: none;\r\n    scrollbar-width: none;\r\n\r\n    cursor: grab;\r\n\r\n    &:active {\r\n        cursor: grabbing;\r\n    }\r\n\r\n    *::-webkit-scrollbar {\r\n        display: none;\r\n    }\r\n}\r\n\r\n.axis {\r\n    padding-right: 10px;\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.label {\r\n    background: var(--color-background-darker);\r\n    padding: 10px 0; \r\n\r\n    display: inline-flex;\r\n    flex-direction: column;\r\n\r\n    width: 100px;\r\n    text-align: center;\r\n}\r\n\r\n.label-top {\r\n    font-weight: 500;\r\n    font-size: 0.95em;\r\n}\r\n\r\n.label-bottom {\r\n    font-size: 0.76em;\r\n    color: var(--color-text-secondary);\r\n}\r\n</style>\r\n<!-- SVG STYLING-->\r\n\r\n<style lang=\"scss\">\r\nsvg .chart-label {\r\n    fill: var(--color-text);\r\n}\r\n</style>","\r\nimport { defineComponent, PropType } from 'vue'\r\nimport * as d3 from \"d3\";\r\n\r\nimport { ActivityDay } from '@/interfaces/activity'\r\nimport store from '@/store/store'\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        activities: {\r\n            type: Array as PropType<ActivityDay[]>,\r\n            required: true\r\n        },\r\n        row: {\r\n            type: String,\r\n            required: true\r\n        },\r\n        id: String,\r\n        height: {\r\n            type: Number,\r\n            required: true\r\n        }\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate,\r\n\r\n            margin: { top: 50, bottom: 10 },\r\n\r\n            dragging: false,\r\n            startX: 0,\r\n            scrollLeft: 0\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        activities: function() {\r\n            this.clean();\r\n            this.render();\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        this.render();\r\n    },\r\n    \r\n\r\n    methods: {\r\n        clean(): void {\r\n            const node = (this.$refs.area as HTMLDivElement)\r\n            while(node.lastChild) {\r\n                node.removeChild(node.lastChild);\r\n            }\r\n        },\r\n        render(): void {\r\n            console.dir(this.activities);\r\n\r\n            const columnWidth = 100;\r\n            const width = this.activities.length * columnWidth;\r\n\r\n            const svg = d3.select('#area-'+this.id)\r\n            .append(\"svg\")\r\n            .attr(\"width\", width)\r\n            .attr(\"height\", this.height + this.margin.top + this.margin.bottom)\r\n            .append(\"g\")\r\n            .attr(\"transform\", `translate(0, ${this.margin.top})`);\r\n\r\n            // x axis (human-readable day names)\r\n            const x = d3.scaleBand()\r\n            .domain(this.activities.map(x => prettyDate(x.day)))\r\n            .range([0, width])\r\n\r\n            const countArray = this.activities.map((x: any) => x[this.row]);\r\n            // y axis (episode/chapter count)\r\n            const y = d3.scaleLinear()\r\n            .domain([d3.min(countArray), d3.max(countArray) as number])\r\n            .range([this.height, 0])\r\n\r\n            const line = d3.line<ActivityDay>()\r\n            .x((d: ActivityDay) => {\r\n                return x(prettyDate(d.day)) as number + columnWidth/2;\r\n            })\r\n            .y((d: any) => y(d[this.row]))\r\n            .curve(d3.curveMonotoneX)\r\n\r\n            // AREA\r\n            svg.append(\"path\")\r\n            .datum(this.activities)\r\n            .attr(\"fill\", \"none\")\r\n            .attr(\"stroke\", \"#188cc6\") // TODO move to CSS\r\n            .attr(\"stroke-width\", 4)\r\n            .attr(\"d\", line)\r\n\r\n            // EPISODE COUNT LABELS\r\n            svg.selectAll(\"labels\")\r\n            .data(this.activities)\r\n            .join(\"text\")\r\n            .text((d: any) => d[this.row])\r\n            .attr(\"class\", \"chart-label\")\r\n            .attr(\"text-anchor\", \"middle\")\r\n            .attr(\"font-weight\", \"500\")\r\n            .attr(\"x\", d => x(prettyDate(d.day)) as number + columnWidth/2)\r\n            .attr(\"y\", (d: any) => y(d[this.row]) - 15);\r\n\r\n            // POINTS\r\n            svg.selectAll(\"circles\")\r\n            .data(this.activities)\r\n            .join(\"circle\")\r\n            .attr(\"fill\", \"#34bbff\") // TODO move to CSS\r\n            .attr(\"stroke\", \"none\")\r\n            .attr(\"fill-opacity\", \"0.7\")\r\n            .attr(\"r\", 5)\r\n            .attr(\"cx\", d => x(prettyDate(d.day)) as number + columnWidth/2)\r\n            .attr(\"cy\", (d: any) => y(d[this.row]));\r\n        },\r\n\r\n        // Chart scrolling event handlers\r\n        mouseDown(e: MouseEvent) {\r\n            this.dragging = true;\r\n            this.startX = e.pageX - (this.$refs.chart as HTMLDivElement).offsetLeft;\r\n            this.scrollLeft = (this.$refs.chart as HTMLDivElement).scrollLeft;\r\n        },\r\n\r\n        mouseUp() {\r\n            this.dragging = false;\r\n        },\r\n\r\n        mouseMove(e: MouseEvent) {\r\n            if(!this.dragging) return;\r\n            const x = e.pageX - (this.$refs.chart as HTMLDivElement).offsetLeft;\r\n            const walk = (x - this.startX) * 1.5;\r\n            (this.$refs.chart as HTMLDivElement).scrollLeft = this.scrollLeft - walk;\r\n        },\r\n\r\n        mouseLeave() {\r\n            this.dragging = false;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./ActivityChart.vue?vue&type=template&id=535ab013&scoped=true\"\nimport script from \"./ActivityChart.vue?vue&type=script&lang=ts\"\nexport * from \"./ActivityChart.vue?vue&type=script&lang=ts\"\n\nimport \"./ActivityChart.vue?vue&type=style&index=0&id=535ab013&lang=scss&scoped=true\"\nimport \"./ActivityChart.vue?vue&type=style&index=1&id=535ab013&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-535ab013\"\n\nexport default script","\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport CheapLoading from '@/components/CheapLoading.vue';\r\nimport ActivityChart from '@/components/User/ActivityChart.vue';\r\n\r\n\r\nimport { fetchMedia } from '@/store/api';\r\nimport { findAddedDate, prettyDate } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: {} as any,\r\n        stamp: String\r\n    },\r\n\r\n    components: { CheapLoading, ActivityChart },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate,\r\n\r\n            activities: [] as ActivityDay[],\r\n            added: \"Unknown\",\r\n\r\n            loading: true\r\n        }\r\n    },\r\n\r\n    mounted(): void {\r\n        fetchMedia(this.state.userData.id, this.media.id)\r\n        .then(resp => {\r\n            const rawActivities = resp.data.Page.activities;\r\n            this.activities = store.parseActivities(rawActivities).reverse();\r\n\r\n            if(typeof this.media.added == 'undefined') {\r\n                this.added = findAddedDate(rawActivities);   \r\n            } else {\r\n                this.added = (this.media.added.time == 0 ? 'Unknown' : prettyDate(this.media.added));\r\n            }\r\n\r\n            this.loading = false;\r\n        })\r\n    }\r\n})\r\n","import { render } from \"./SeriesDetails.vue?vue&type=template&id=d5b22e72&scoped=true\"\nimport script from \"./SeriesDetails.vue?vue&type=script&lang=ts\"\nexport * from \"./SeriesDetails.vue?vue&type=script&lang=ts\"\n\nimport \"./SeriesDetails.vue?vue&type=style&index=0&id=d5b22e72&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-d5b22e72\"\n\nexport default script","\r\nimport { defineComponent } from 'vue';\r\nimport SeriesDetails from './SeriesDetails.vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: Object,\r\n        hide: Boolean,\r\n        stamp: String\r\n    },\r\n\r\n    components: { SeriesDetails },\r\n\r\n    data() {\r\n        return {\r\n            details: false\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        hide: function(val) {\r\n            this.details = !val;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        toggleDisplay(): void {\r\n            this.$emit('toggle');\r\n            this.details = !this.details;\r\n        }\r\n    }\r\n\r\n})\r\n","import { render } from \"./SeriesItem.vue?vue&type=template&id=1740b062&scoped=true\"\nimport script from \"./SeriesItem.vue?vue&type=script&lang=ts\"\nexport * from \"./SeriesItem.vue?vue&type=script&lang=ts\"\n\nimport \"./SeriesItem.vue?vue&type=style&index=0&id=1740b062&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-1740b062\"\n\nexport default script","\r\nimport store from '@/store/store';\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\nimport SeriesItem from './SeriesItem.vue';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    components: { SeriesItem },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./DetailsContainer.vue?vue&type=template&id=451e4c02&scoped=true\"\nimport script from \"./DetailsContainer.vue?vue&type=script&lang=ts\"\nexport * from \"./DetailsContainer.vue?vue&type=script&lang=ts\"\n\nimport \"./DetailsContainer.vue?vue&type=style&index=0&id=451e4c02&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-451e4c02\"\n\nexport default script","<template>\r\n    <div class=\"calendar\">\r\n        <div class=\"header\">\r\n            <div class=\"header-title\">Calendar</div>\r\n            <span style=\"flex: 1;\"></span>\r\n            <div class=\"header-month\">\r\n                <span class=\"header-monthName\">{{ displayMonth }}</span>\r\n                <span>{{ \" \" }}</span>\r\n                <span class=\"header-year\" @click=\"toggleYearPicker()\" title=\"Click to open year picker\">{{ y }}</span>\r\n            </div>\r\n            <div class=\"header-control\" @click=\"update(-1)\">\r\n                <font-awesome-icon icon=\"chevron-left\"></font-awesome-icon>\r\n            </div>\r\n            <div class=\"header-control\" @click=\"update(1)\">\r\n                <font-awesome-icon icon=\"chevron-right\"></font-awesome-icon>\r\n            </div>\r\n        </div>\r\n        <div class=\"picker\" v-if=\"showYearPicker\">\r\n            <div class=\"pick-item\" v-for=\"year in pickerYears\" :key=\"year\" :class=\"{ selected: year == y }\" @click=\"loadMonth(m-1, year)\">{{ year }}</div>\r\n        </div>\r\n        <div class=\"display\">\r\n            <div class=\"weekdays\">\r\n                <div class=\"weekday\">Sun</div>\r\n                <div class=\"weekday\">Mon</div>\r\n                <div class=\"weekday\">Tue</div>\r\n                <div class=\"weekday\">Wed</div>\r\n                <div class=\"weekday\">Thu</div>\r\n                <div class=\"weekday\">Fri</div>\r\n                <div class=\"weekday\">Sat</div>\r\n            </div>\r\n            <div class=\"days\">\r\n                <div class=\"day\" \r\n                    v-for=\"(day, i) in days\" :key=\"i\" \r\n                    :style=\"(day.n == 1 ? { gridColumn: firstWeekday+1 } : '')\" \r\n                    @click=\"handleClick($event, day)\"\r\n                    :title=\"`${displayMonth} ${day.n}, ${y}\\nClick to see activities on this day.${day.notLoaded || day.notYetHappened ? '\\nIf you want to have colored background here, click Load more button below until it appears.' : ''}`\">\r\n                    <div class=\"day-bg\" :style=\"{ opacity: getOpacity(day.episodes) }\"></div>\r\n                    <div class=\"day-label\" :style=\"{ opacity: (day.notLoaded || day.notYetHappened ? '0.5' : '' ) }\">{{ day.n }}</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\nimport { ActivityDay } from '@/interfaces/activity';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            days: [] as any,\r\n\r\n            y: 2021,\r\n            m: 0 as number,\r\n\r\n            displayMonth!: \"\",\r\n            firstWeekday!: 0,\r\n            max: 0,\r\n\r\n            showYearPicker: false,\r\n            pickerYears: [] as number[]\r\n        }\r\n    },\r\n\r\n    mounted: function(): void {\r\n        const now = new Date();\r\n\r\n        this.m = now.getMonth();\r\n        this.y = now.getFullYear();\r\n\r\n        this.preparePickers();\r\n        this.loadMonth(this.m, this.y);\r\n    },\r\n\r\n    computed: {\r\n        activities(): ActivityDay[] {\r\n            return this.state.activities\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        activities() {\r\n            this.loadMonth(this.m - 1, this.y)\r\n        }\r\n    },\r\n    \r\n    methods: {\r\n        loadMonth(m: number, y: number): void { // m is NOT human-readable (Jan = 0) as opposed to this.m\r\n            // Clear current display\r\n            this.days.length = 0;\r\n\r\n            // Load the first day of the month\r\n            let firstDay = new Date(y, m, 1);\r\n\r\n            // Get day of the week of the first day\r\n            this.firstWeekday = firstDay.getDay();\r\n\r\n            // Figure out how many days there are in this month\r\n            const count = this.daysInMonth(m, y);\r\n\r\n            // Figure out on which day the user has watched most episodes (used for colors)\r\n            this.max = Math.max.apply(Math, this.state.activities.map(x => x.episodes + x.chapters)); // TODO episode/chapter distinction\r\n\r\n            const latestActivity = this.state.activities[0];\r\n            let latestDay: number = 32;\r\n\r\n            const lastActivity = this.state.activities[this.state.activities.length - 1]; \r\n            let lastDay: number = 0; // last day number currently present in activities array\r\n            \r\n            if(lastActivity.day.m == m+1 && lastActivity.day.y == y) {\r\n                lastDay = lastActivity.day.d;\r\n            } else if (lastActivity.day.m > m+1 && lastActivity.day.y == y) {\r\n                lastDay = 32;\r\n            } else if (lastActivity.day.y > y) {\r\n                lastDay = 32;\r\n            }\r\n\r\n            if(latestActivity.day.m == m+1 && latestActivity.day.y == y) {\r\n                latestDay = latestActivity.day.d;\r\n            } else if (latestActivity.day.m < m+1 && latestActivity.day.y == y) {\r\n                latestDay = 0;\r\n            } else if (latestActivity.day.y < y) {\r\n                latestDay = 0;\r\n            }\r\n\r\n            for (let i = 1; i <= count; i++) {\r\n                const activities = this.state.activities.find(x => x.day.d == i && x.day.m == m+1 && x.day.y == y);\r\n                this.days.push({\r\n                    n: i,\r\n                    activities,\r\n                    notLoaded: !activities && i < lastDay,\r\n                    notYetHappened: i > latestDay,\r\n                    //empty: !activities && (i < lastDay || i > latestDay),\r\n                    episodes: (activities ? activities.episodes + activities.chapters : 0)\r\n                })\r\n            }\r\n\r\n            // Change displayed date\r\n            this.m = m+1;\r\n            this.y = y;\r\n            this.displayMonth = new Intl.DateTimeFormat('default', { month: 'long' }).format(firstDay);\r\n        },\r\n\r\n        // handleClick: show popup containing activities on a specific day\r\n        handleClick(event: MouseEvent, day: any) { // TODO get rid of any\r\n            if(day.activities) { // the day has activities loaded\r\n                this.$emit('popup', {\r\n                    event,\r\n                    activities: day.activities\r\n                })\r\n            } else if (!day.activities && !day.notLoaded) { // the day has no activities, but is within loaded range\r\n                this.$emit('error', \"There are no activities present on this day.\")\r\n            } else if (!day.notYetHappened) { // the day is not within loaded range\r\n                this.$emit('dynamicPopup', {\r\n                    event,\r\n                    d: day.n,\r\n                    m: this.m,\r\n                    y: this.y\r\n                })\r\n            }\r\n        },\r\n\r\n        update(change: number): void {\r\n            if(change > 0) {\r\n                if (this.m + 1 > 12) {\r\n                    this.y++;\r\n                    this.loadMonth(0, this.y)\r\n                } else {\r\n                    this.loadMonth(this.m, this.y);\r\n                }\r\n            } else {\r\n                if (this.m - 1 < 1) {\r\n                    this.y--;\r\n                    this.loadMonth(11, this.y);\r\n                } else {\r\n                    this.loadMonth(this.m-2, this.y);\r\n                }\r\n            }\r\n        },\r\n\r\n        toggleYearPicker() {\r\n            this.showYearPicker = !this.showYearPicker;\r\n        },\r\n\r\n        preparePickers() {\r\n            // Prepare year picker\r\n            this.pickerYears = [this.y-3, this.y-2, this.y-1, this.y]\r\n        },\r\n\r\n        daysInMonth(m: number, y: number): number {\r\n            switch (m) {\r\n                case 1 :\r\n                    return (y % 4 == 0 && y % 100) || y % 400 == 0 ? 29 : 28;\r\n                case 8 : case 3 : case 5 : case 10 :\r\n                    return 30;\r\n                default :\r\n                    return 31\r\n            }\r\n        },\r\n\r\n        getOpacity(count: number): number {\r\n            const ratio = count / this.max;\r\n\r\n            if (ratio == 0) return 0;\r\n            else if (ratio < 0.15) return 0.15;\r\n            else return ratio;\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.calendar {\r\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);\r\n\r\n    border-radius: var(--radius);\r\n    padding-bottom: 4px;\r\n\r\n    margin-bottom: 12.944px;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 10px 16px;\r\n\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.header-title {\r\n    font-weight: 500;\r\n    font-size: 1.2em;\r\n}\r\n\r\n.header-month {\r\n    padding: 3px 12px;\r\n    margin: 0 3px;\r\n    font-weight: 500;\r\n    text-align: center;\r\n    background: var(--color-background-darker);\r\n    border-radius: 3px;\r\n}\r\n\r\n.header-year {\r\n    cursor: pointer;\r\n    \r\n    &:hover {\r\n        color: var(--color-selected-text);\r\n        text-decoration: underline;\r\n    }\r\n}\r\n\r\n.header-control {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 50px;\r\n    height: 29px;\r\n\r\n    text-align: center;\r\n    border-radius: 3px;\r\n\r\n    user-select: none;\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background: var(--color-selected-background);\r\n        color: var(--color-selected-text);\r\n    }\r\n\r\n    &:active {\r\n        opacity: 0.7;\r\n    }\r\n}\r\n\r\n.picker {\r\n    display: flex;\r\n}\r\n\r\n.pick-item {\r\n    padding: 8px;\r\n    margin: 4px;\r\n    border-radius: var(--radius);\r\n    font-weight: 500;\r\n\r\n    flex-grow: 1;\r\n    text-align: center;\r\n\r\n    cursor: pointer;\r\n}\r\n\r\n.selected {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n}\r\n\r\n.days, .weekdays {\r\n    display: grid;\r\n    grid-template-columns: repeat(7, 1fr);\r\n\r\n    margin: 0 5px;\r\n    font-size: .89em;\r\n}\r\n\r\n.day {\r\n    padding: 12px 12px 8px 12px;\r\n    margin: 2px;\r\n    border: 1px solid transparent;\r\n\r\n    border-radius: 4px;\r\n    text-align: center;\r\n    font-weight: 500;\r\n    \r\n    display: flex;\r\n    justify-content: center;\r\n\r\n    cursor: pointer;\r\n    user-select: none;\r\n\r\n    position: relative;\r\n    transition: border .2s, opacity .2s;\r\n\r\n\r\n    &:hover {\r\n        border: 1px solid var(--color-background-day);\r\n    }\r\n\r\n    &:active {\r\n        opacity: 0.8;\r\n    }\r\n}\r\n\r\n.weekday {\r\n    text-align: center;\r\n    font-weight: 600;\r\n\r\n    border-bottom: 1px solid var(--color-background-border);\r\n    padding: 12px;\r\n}\r\n\r\n.day-bg {\r\n    background: var(--color-background-day);\r\n    position: absolute;\r\n    border-radius: 4px;\r\n\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n\r\n    z-index: 0;\r\n}\r\n\r\n.day-label {\r\n    z-index: 1;\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\nimport { ActivityDay } from '@/interfaces/activity';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            days: [] as any,\r\n\r\n            y: 2021,\r\n            m: 0 as number,\r\n\r\n            displayMonth!: \"\",\r\n            firstWeekday!: 0,\r\n            max: 0,\r\n\r\n            showYearPicker: false,\r\n            pickerYears: [] as number[]\r\n        }\r\n    },\r\n\r\n    mounted: function(): void {\r\n        const now = new Date();\r\n\r\n        this.m = now.getMonth();\r\n        this.y = now.getFullYear();\r\n\r\n        this.preparePickers();\r\n        this.loadMonth(this.m, this.y);\r\n    },\r\n\r\n    computed: {\r\n        activities(): ActivityDay[] {\r\n            return this.state.activities\r\n        }\r\n    },\r\n\r\n    watch: {\r\n        activities() {\r\n            this.loadMonth(this.m - 1, this.y)\r\n        }\r\n    },\r\n    \r\n    methods: {\r\n        loadMonth(m: number, y: number): void { // m is NOT human-readable (Jan = 0) as opposed to this.m\r\n            // Clear current display\r\n            this.days.length = 0;\r\n\r\n            // Load the first day of the month\r\n            let firstDay = new Date(y, m, 1);\r\n\r\n            // Get day of the week of the first day\r\n            this.firstWeekday = firstDay.getDay();\r\n\r\n            // Figure out how many days there are in this month\r\n            const count = this.daysInMonth(m, y);\r\n\r\n            // Figure out on which day the user has watched most episodes (used for colors)\r\n            this.max = Math.max.apply(Math, this.state.activities.map(x => x.episodes + x.chapters)); // TODO episode/chapter distinction\r\n\r\n            const latestActivity = this.state.activities[0];\r\n            let latestDay: number = 32;\r\n\r\n            const lastActivity = this.state.activities[this.state.activities.length - 1]; \r\n            let lastDay: number = 0; // last day number currently present in activities array\r\n            \r\n            if(lastActivity.day.m == m+1 && lastActivity.day.y == y) {\r\n                lastDay = lastActivity.day.d;\r\n            } else if (lastActivity.day.m > m+1 && lastActivity.day.y == y) {\r\n                lastDay = 32;\r\n            } else if (lastActivity.day.y > y) {\r\n                lastDay = 32;\r\n            }\r\n\r\n            if(latestActivity.day.m == m+1 && latestActivity.day.y == y) {\r\n                latestDay = latestActivity.day.d;\r\n            } else if (latestActivity.day.m < m+1 && latestActivity.day.y == y) {\r\n                latestDay = 0;\r\n            } else if (latestActivity.day.y < y) {\r\n                latestDay = 0;\r\n            }\r\n\r\n            for (let i = 1; i <= count; i++) {\r\n                const activities = this.state.activities.find(x => x.day.d == i && x.day.m == m+1 && x.day.y == y);\r\n                this.days.push({\r\n                    n: i,\r\n                    activities,\r\n                    notLoaded: !activities && i < lastDay,\r\n                    notYetHappened: i > latestDay,\r\n                    //empty: !activities && (i < lastDay || i > latestDay),\r\n                    episodes: (activities ? activities.episodes + activities.chapters : 0)\r\n                })\r\n            }\r\n\r\n            // Change displayed date\r\n            this.m = m+1;\r\n            this.y = y;\r\n            this.displayMonth = new Intl.DateTimeFormat('default', { month: 'long' }).format(firstDay);\r\n        },\r\n\r\n        // handleClick: show popup containing activities on a specific day\r\n        handleClick(event: MouseEvent, day: any) { // TODO get rid of any\r\n            if(day.activities) { // the day has activities loaded\r\n                this.$emit('popup', {\r\n                    event,\r\n                    activities: day.activities\r\n                })\r\n            } else if (!day.activities && !day.notLoaded) { // the day has no activities, but is within loaded range\r\n                this.$emit('error', \"There are no activities present on this day.\")\r\n            } else if (!day.notYetHappened) { // the day is not within loaded range\r\n                this.$emit('dynamicPopup', {\r\n                    event,\r\n                    d: day.n,\r\n                    m: this.m,\r\n                    y: this.y\r\n                })\r\n            }\r\n        },\r\n\r\n        update(change: number): void {\r\n            if(change > 0) {\r\n                if (this.m + 1 > 12) {\r\n                    this.y++;\r\n                    this.loadMonth(0, this.y)\r\n                } else {\r\n                    this.loadMonth(this.m, this.y);\r\n                }\r\n            } else {\r\n                if (this.m - 1 < 1) {\r\n                    this.y--;\r\n                    this.loadMonth(11, this.y);\r\n                } else {\r\n                    this.loadMonth(this.m-2, this.y);\r\n                }\r\n            }\r\n        },\r\n\r\n        toggleYearPicker() {\r\n            this.showYearPicker = !this.showYearPicker;\r\n        },\r\n\r\n        preparePickers() {\r\n            // Prepare year picker\r\n            this.pickerYears = [this.y-3, this.y-2, this.y-1, this.y]\r\n        },\r\n\r\n        daysInMonth(m: number, y: number): number {\r\n            switch (m) {\r\n                case 1 :\r\n                    return (y % 4 == 0 && y % 100) || y % 400 == 0 ? 29 : 28;\r\n                case 8 : case 3 : case 5 : case 10 :\r\n                    return 30;\r\n                default :\r\n                    return 31\r\n            }\r\n        },\r\n\r\n        getOpacity(count: number): number {\r\n            const ratio = count / this.max;\r\n\r\n            if (ratio == 0) return 0;\r\n            else if (ratio < 0.15) return 0.15;\r\n            else return ratio;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Calendar.vue?vue&type=template&id=4e6c0de4&scoped=true\"\nimport script from \"./Calendar.vue?vue&type=script&lang=ts\"\nexport * from \"./Calendar.vue?vue&type=script&lang=ts\"\n\nimport \"./Calendar.vue?vue&type=style&index=0&id=4e6c0de4&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4e6c0de4\"\n\nexport default script","<template>\r\n    <div class=\"datarange\">\r\n        <div class=\"header-title\">Data range</div>\r\n        <span style=\"flex: 1;\"></span>\r\n        <div class=\"header-button\" @click=\"$emit('loadRequest')\">\r\n            <font-awesome-icon icon=\"redo-alt\"></font-awesome-icon>\r\n            <span class=\"button-label\">Load more</span>\r\n        </div>\r\n        <span class=\"breaker\"></span>\r\n        <span class=\"header-range\">{{ lastLoadedDay }} - today</span>\r\n        <!--<span class=\"spacer\"></span>\r\n        <div class=\"header-button\">\r\n            <font-awesome-icon icon=\"question-circle\"></font-awesome-icon>\r\n        </div>-->\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        lastLoadedDay(): string {\r\n            return prettyDate(this.state.activities[this.state.activities.length-1].day);\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.datarange {\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    align-items: center;\r\n    padding: 0 8px;\r\n    margin-bottom: 12.944px;\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.header-title {\r\n    font-weight: 500;\r\n    font-size: 1.2em;\r\n    padding: 8px 0;\r\n}\r\n\r\n.header-range {\r\n    font-weight: 500;\r\n    margin: 0 6px;\r\n}\r\n\r\n.header-button {\r\n    padding: 8px;\r\n    \r\n    border-radius: var(--radius);\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n    font-weight: 500;\r\n\r\n    transition: background .2s ease;\r\n    cursor: pointer;\r\n    user-select: none;\r\n\r\n    &:hover {\r\n        background: var(--color-background-border);\r\n    }\r\n}\r\n\r\n.button-label {\r\n    margin-left: 6px;\r\n}\r\n\r\n@media screen and (max-width: 600px) {\r\n    .breaker {\r\n        display: block;\r\n        height: 0;\r\n        width: 100%;\r\n    }\r\n\r\n    .spacer {\r\n        flex: 1;\r\n    }\r\n\r\n    .header-title {\r\n        padding: 0;\r\n    }\r\n\r\n    .header-button {\r\n        background: inherit;\r\n    }\r\n\r\n    .header-range {\r\n        font-weight: normal;\r\n        margin: 0;\r\n    }\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\nimport store from '@/store/store';\r\nimport { prettyDate } from '@/store/helpers';\r\n\r\nexport default defineComponent({\r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        lastLoadedDay(): string {\r\n            return prettyDate(this.state.activities[this.state.activities.length-1].day);\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./DataRange.vue?vue&type=template&id=46337ac5&scoped=true\"\nimport script from \"./DataRange.vue?vue&type=script&lang=ts\"\nexport * from \"./DataRange.vue?vue&type=script&lang=ts\"\n\nimport \"./DataRange.vue?vue&type=style&index=0&id=46337ac5&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-46337ac5\"\n\nexport default script","<template>\r\n    <div class=\"tooltip\">\r\n        <div v-if=\"loading\">\r\n            <CheapLoading></CheapLoading>\r\n        </div>\r\n        <div v-else>\r\n            <div class=\"header\">\r\n                <div class=\"header-title\">{{ prettyDate(day.day) }}</div>\r\n                <span style=\"flex: 1\"></span>\r\n                <div class=\"prop\" v-if=\"day.chapters > 0\">\r\n                    <div class=\"prop-value\">{{ day.chapters }}</div>\r\n                    <div class=\"prop-desc\" title=\"chapters\">chapters</div>\r\n                </div>\r\n                <div class=\"prop\" v-if=\"day.episodes > 0\">\r\n                    <div class=\"prop-value\">{{ day.episodes }}</div>\r\n                    <div class=\"prop-desc\" title=\"episodes\">episodes</div>\r\n                </div>\r\n                <div class=\"header-control\" @click=\"close\">\r\n                    <font-awesome-icon icon=\"times\"></font-awesome-icon>\r\n                </div>\r\n            </div>\r\n            <div class=\"content\">\r\n                <SeriesItem v-for=\"(media, i) in day.media\" :key=\"i\" :media=\"media\" @toggle=\"handleClick(i)\" :hide=\"selected != i\"></SeriesItem>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { prettyDate } from '@/store/helpers';\r\nimport SeriesItem from '@/components/User/Details/SeriesItem.vue';\r\nimport CheapLoading from '@/components/CheapLoading.vue';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        day: {} as any,\r\n        loading: Boolean\r\n    },\r\n\r\n    components: { SeriesItem, CheapLoading },\r\n\r\n    data() {\r\n        return {\r\n            prettyDate,\r\n\r\n            selected: -1\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        close(): void {\r\n            this.$emit('close');\r\n        },\r\n\r\n        handleClick(i: number): void {\r\n            if(this.selected == i) this.selected = -1;\r\n            else this.selected = i;\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.tooltip {\r\n    background: var(--color-background);\r\n    border-radius: var(--radius);\r\n    overflow: hidden;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    padding: 10px 16px;\r\n\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.header-title {\r\n    font-weight: 500;\r\n    font-size: 1em;\r\n}\r\n\r\n.header-control {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    \r\n    width: 29px;\r\n    height: 29px;\r\n\r\n    text-align: center;\r\n    border-radius: 3px;\r\n\r\n    user-select: none;\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n        background: var(--color-background-secondary);\r\n    }\r\n\r\n    &:active {\r\n        opacity: 0.7;\r\n    }\r\n}\r\n\r\n@media screen and (min-width: 901px) {\r\n    .tooltip {\r\n        margin-bottom: 12.944px;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n    .content {\r\n        max-height: 60vh;\r\n        overflow-y: auto;\r\n    }\r\n}\r\n</style>","\r\nimport { prettyDate } from '@/store/helpers';\r\nimport SeriesItem from '@/components/User/Details/SeriesItem.vue';\r\nimport CheapLoading from '@/components/CheapLoading.vue';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        day: {} as any,\r\n        loading: Boolean\r\n    },\r\n\r\n    components: { SeriesItem, CheapLoading },\r\n\r\n    data() {\r\n        return {\r\n            prettyDate,\r\n\r\n            selected: -1\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        close(): void {\r\n            this.$emit('close');\r\n        },\r\n\r\n        handleClick(i: number): void {\r\n            if(this.selected == i) this.selected = -1;\r\n            else this.selected = i;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Tooltip.vue?vue&type=template&id=d36cfb8a&scoped=true\"\nimport script from \"./Tooltip.vue?vue&type=script&lang=ts\"\nexport * from \"./Tooltip.vue?vue&type=script&lang=ts\"\n\nimport \"./Tooltip.vue?vue&type=style&index=0&id=d36cfb8a&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-d36cfb8a\"\n\nexport default script","<template>\r\n    <div class=\"chart-container\">\r\n        <div class=\"header\">\r\n            <div class=\"header-title\"><slot></slot></div>\r\n        </div>\r\n        <ActivityChart :height=\"height\" :row=\"row\" :id=\"id\" :activities=\"state.activities\"></ActivityChart>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"@vue/runtime-core\";\r\nimport store from '@/store/store';\r\n\r\nimport ActivityChart from './ActivityChart.vue';\r\n\r\nexport default defineComponent({\r\n    components: { ActivityChart },\r\n    props: {\r\n        row: String,\r\n        id: String,\r\n        height: Number\r\n    },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n        }\r\n    }\r\n})      \r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.chart-container {\r\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);\r\n\r\n    border-radius: var(--radius);\r\n\r\n    margin-bottom: 12.944px;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 10px 16px;\r\n\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.header-title {\r\n    font-weight: 500;\r\n    font-size: 1.2em;\r\n}\r\n\r\n</style>","\r\nimport { defineComponent } from \"@vue/runtime-core\";\r\nimport store from '@/store/store';\r\n\r\nimport ActivityChart from './ActivityChart.vue';\r\n\r\nexport default defineComponent({\r\n    components: { ActivityChart },\r\n    props: {\r\n        row: String,\r\n        id: String,\r\n        height: Number\r\n    },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n        }\r\n    }\r\n})      \r\n","import { render } from \"./Chart.vue?vue&type=template&id=c136de9e&scoped=true\"\nimport script from \"./Chart.vue?vue&type=script&lang=ts\"\nexport * from \"./Chart.vue?vue&type=script&lang=ts\"\n\nimport \"./Chart.vue?vue&type=style&index=0&id=c136de9e&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-c136de9e\"\n\nexport default script","\r\nimport store from '@/store/store';\r\n\r\nimport { defineComponent } from 'vue';\r\n\r\nimport DetailsContainer from '@/components/User/Details/DetailsContainer.vue';\r\nimport Calendar from './Calendar.vue';\r\nimport DataRange from './DataRange.vue'\r\nimport Tooltip from './Tooltip.vue';\r\nimport Chart from './Chart.vue';\r\n\r\nimport { ActivityDay } from '@/interfaces/activity';\r\nimport { fetchActivity } from '@/store/api';\r\n\r\nexport default defineComponent({\r\n    components: { DetailsContainer, Calendar, Tooltip, DataRange, Chart },\r\n\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n\r\n            showTooltip: false,\r\n            tooltipActivities: {} as ActivityDay,\r\n            \r\n            popupLoading: false\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        load(): void {\r\n            this.$emit('loadRequest');\r\n        },\r\n\r\n        // Show popup using already loaded data\r\n        showPopup(e: { activities: ActivityDay, event: MouseEvent }): void {\r\n            this.showTooltip = false;\r\n            this.tooltipActivities = e.activities;\r\n        \r\n            this.showTooltip = true;\r\n        },\r\n\r\n        // Show popup having loaded data\r\n        fetchPopup(e: { event: MouseEvent, d: number, m: number, y: number}): void {\r\n            this.popupLoading = true;\r\n            this.showTooltip = true;\r\n            let date = new Date(e.y, e.m-1, e.d);\r\n\r\n            // Get timestamp of the beginning and the end of this day.\r\n            // Converting to AniList time and adding hours according to user's preferences.\r\n            const begin = (date.getTime()/1000)+this.state.updateHour*3600;\r\n            const end = begin+86400; // add 24 hours to the beginning timestamp\r\n            \r\n            fetchActivity(this.state.userData.id, 1, this.state.mediaType, begin, end)\r\n            .then(resp => {\r\n                const activities = store.parseActivities(resp.data.Page.activities);\r\n                this.tooltipActivities = activities[0];\r\n\r\n                if(activities.length == 0) this.showTooltip = false;\r\n                else this.popupLoading = false;\r\n            })\r\n        },\r\n\r\n        showError(e: any): void {\r\n            console.log(e);\r\n        },\r\n\r\n        popupHide(): void {\r\n            this.showTooltip = false;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Main.vue?vue&type=template&id=aabbaf26&scoped=true\"\nimport script from \"./Main.vue?vue&type=script&lang=ts\"\nexport * from \"./Main.vue?vue&type=script&lang=ts\"\n\nimport \"./Main.vue?vue&type=style&index=0&id=aabbaf26&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-aabbaf26\"\n\nexport default script","<template>\r\n    <div class=\"list\">\r\n        <transition name=\"popup-backdrop\">\r\n            <div class=\"popup-backdrop\" v-if=\"showPopup\" @click=\"popupHide\">\r\n                <transition appear name=\"popup\">\r\n                    <Popup :media=\"popupMedia\" @close=\"popupHide\"></Popup>\r\n                </transition>\r\n            </div>\r\n        </transition>\r\n        <div class=\"controls\">\r\n            <div class=\"controls-search\">\r\n                <input class=\"controls-input\" type=\"text\" v-model=\"query\" placeholder=\"Search...\" />\r\n            </div>\r\n            <div class=\"controls-filterGroup\" v-for=\"(filter, i) in filteredFilters\" :key=\"i\">\r\n                <span class=\"filter-name\">{{ filter.name }}: </span>\r\n                <button class=\"filter-button\" title=\"Click to toggle\" :class=\"{ selected: filter.checked.indexOf(value.key) > -1 }\" v-for=\"(value, j) in filter.values\" :key=\"j\" @click=\"toggleFilter(i, value.key)\">{{ typeof value.name === 'undefined' ? ($route.name == \"AnimeList\" ? value.animeName : value.mangaName) : value.name }}</button>\r\n            </div>\r\n        </div>\r\n        <Pagination v-if=\"listLength > 1\" @set=\"navigate\" :max=\"listLength\" :current=\"currentPage\"></Pagination>\r\n        <table cellspacing=\"0\">\r\n            <thead>\r\n                <tr>\r\n                    <th class=\"tableHeader tableHeader-title\">Title</th>\r\n                    <th class=\"tableHeader tableHeader-regular\">Type</th>\r\n                    <th class=\"tableHeader tableHeader-regular table-responsive\">Added</th>\r\n                    <th class=\"tableHeader tableHeader-regular table-responsive\">Completed</th>\r\n                    <th class=\"tableHeader tableHeader-regular table-responsive2\">Status</th>\r\n                    <th class=\"tableHeader\"></th>\r\n                </tr>\r\n            </thead>\r\n            <div class=\"loading\" v-if=\"loading\">\r\n                Loading...\r\n            </div>\r\n            <tbody v-else>\r\n                <tr v-for=\"media in paginatedList\" :key=\"media.id\" class=\"tableRow\" @click=\"popupShow(media)\">\r\n                    <td class=\"tableData tableData-title\">\r\n                        <img v-lazyload class=\"tableData-image\" :data-src=\"media.cover\" width=\"24\" height=\"24\" loading=\"lazy\" />\r\n                        <span>{{ media.title }}</span>\r\n                    </td>\r\n                    <td class=\"tableData tableData-regular\">{{ prettyFormat(media.format) }}</td>\r\n                    <td class=\"tableData tableData-regular table-responsive\">{{ prettyDate(media.added) }}</td>\r\n                    <td class=\"tableData tableData-regular table-responsive\">{{ prettyDate(media.completed) }}</td>\r\n                    <td class=\"tableData tableData-regular table-responsive2\">{{ prettyStatus(media.status) }}</td>\r\n                    <td class=\"tableData tableData-icon\">\r\n                        <div class=\"tableData-iconWrapper\" :style=\"{ color: resolveColor(media.status) }\">\r\n                            <font-awesome-icon :icon=\"resolveIcon(media.status)\" fixed-width />\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n                <div class=\"loading\" v-if=\"list.length == 0\">\r\n                    No results found. Maybe try changing the filters?\r\n                </div>\r\n            </tbody>\r\n        </table>\r\n        <Pagination v-if=\"listLength > 1\" @set=\"navigate\" :max=\"listLength\" :current=\"currentPage\"></Pagination>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from \"vue\";\r\n\r\nimport store from '@/store/store';\r\nimport { fetchMediaList } from \"@/store/lists\";\r\nimport { prettyDate } from \"@/store/helpers\";\r\n\r\nimport { ActivityMedia } from \"@/interfaces/activity\";\r\nimport { Filter } from '@/interfaces/filters';\r\n\r\nimport Popup from './Popup.vue';\r\nimport Pagination from './Pagination.vue';\r\n\r\nexport default defineComponent({\r\n    components: { Popup, Pagination },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate: prettyDate,\r\n\r\n            loading: true,\r\n            displayCover: -1,\r\n\r\n            showPopup: false,\r\n            popupMedia: {} as ActivityMedia,\r\n\r\n            pageSize: 100, // size of one page\r\n            currentPage: 0, // we're using computer-friendly numbers here\r\n            listLength: 0,\r\n\r\n            query: \"\",\r\n            filters: [\r\n                {\r\n                    name: \"Status\",\r\n                    key: \"status\",\r\n                    type: \"both\",\r\n                    values: [\r\n                        {\r\n                            animeName: \"Watching\",\r\n                            mangaName: \"Reading\",\r\n                            key: \"CURRENT\"\r\n                        },\r\n                        {\r\n                            animeName: \"Rewatching\",\r\n                            mangaName: \"Rereading\",\r\n                            key: \"REPEATING\"\r\n                        },\r\n                        {\r\n                            name: \"Completed\",\r\n                            key: \"COMPLETED\"\r\n                        },\r\n                        {\r\n                            name: \"Planning\",\r\n                            key: \"PLANNING\"\r\n                        },\r\n                        {\r\n                            name: \"Dropped\",\r\n                            key: \"DROPPED\"\r\n                        },\r\n                        {\r\n                            name: \"Paused\",\r\n                            key: \"PAUSED\"\r\n                        }\r\n                    ],\r\n                    checked: [\"COMPLETED\", \"CURRENT\", \"REPEATING\"]\r\n                },\r\n                {\r\n                    name: \"Type\",\r\n                    key: \"format\",\r\n                    type: \"anime\",\r\n                    values: [\r\n                        {\r\n                            name: \"TV\",\r\n                            key: \"TV\"\r\n                        },\r\n                        {\r\n                            name: \"TV Short\",\r\n                            key: \"TV_SHORT\"\r\n                        },\r\n                        {\r\n                            name: \"Movie\",\r\n                            key: \"MOVIE\"\r\n                        },\r\n                        {\r\n                            name: \"Special\",\r\n                            key: \"SPECIAL\"\r\n                        },\r\n                        {\r\n                            name: \"OVA\",\r\n                            key: \"OVA\"\r\n                        },\r\n                        {\r\n                            name: \"ONA\",\r\n                            key: \"ONA\"\r\n                        },\r\n                        {\r\n                            name: \"Music\",\r\n                            key: \"MUSIC\"\r\n                        }\r\n                    ],\r\n                    checked: [\"TV\", \"TV_SHORT\", \"MOVIE\", \"SPECIAL\", \"OVA\", \"ONA\", \"MUSIC\"]\r\n                },\r\n                {\r\n                    name: \"Type\",\r\n                    key: \"format\",\r\n                    type: \"manga\",\r\n                    values: [\r\n                        {\r\n                            name: \"Manga\",\r\n                            key: \"MANGA\"\r\n                        },\r\n                        {\r\n                            name: \"Light novel\",\r\n                            key: \"NOVEL\"\r\n                        },\r\n                        {\r\n                            name: \"One shot\",\r\n                            key: \"ONE_SHOT\"\r\n                        }\r\n                    ],\r\n                    checked: [\"MANGA\", \"NOVEL\", \"ONE_SHOT\"]\r\n                }\r\n            ]\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.fetchData();\r\n    },\r\n\r\n    watch: {\r\n        '$route': 'fetchData',\r\n        query() {\r\n            this.currentPage = 0;\r\n\r\n            // Calculate new length\r\n            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        list(): ActivityMedia[] {\r\n            const raw: ActivityMedia[] = (this.$route.name == \"AnimeList\" ? this.state.animeList : this.state.mangaList);\r\n            \r\n            // For starters, we filter the list by user's search query (if there's none, this function will just do nothing)\r\n            \r\n            let filtered: ActivityMedia[] = raw.filter(item => item.title.toLowerCase().indexOf(this.query.toLowerCase()) > -1);\r\n            \r\n            // Loop through each applicable filter and apply it\r\n            this.filteredFilters.forEach(filter => {\r\n                filtered = filtered.filter((x: any) => filter.checked.indexOf(x[filter.key]) > -1)\r\n            })\r\n            return filtered;\r\n        },\r\n        paginatedList(): ActivityMedia[] {\r\n            return this.list.slice(this.currentPage * this.pageSize, (this.currentPage + 1) * this.pageSize)\r\n        },\r\n        filteredFilters(): Filter[] {\r\n            return this.filters.filter(filter => {\r\n                if(this.$route.name == \"AnimeList\" && filter.type == \"manga\") return false;\r\n                else if(this.$route.name == \"MangaList\" && filter.type == \"anime\") return false;\r\n                else return true;\r\n            });\r\n        }\r\n    },\r\n\r\n    directives: {\r\n        lazyload: {\r\n            mounted(el): any {\r\n                el.src = el.dataset.src;\r\n            }\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        fetchData() {\r\n            // setTimeout is here, because without it, the DOM has a short lag (when the list is large, at least.). That way, the DOM has a lag as well,\r\n            // but it's once 'List' component is visible to the user, and \"Loading...\" label is displayed, which surely improves user experience.\r\n            this.loading = true;\r\n            this.currentPage = 0;\r\n            this.listLength = 0;\r\n            setTimeout(() => {\r\n                if(this.$route.name == \"AnimeList\") {\r\n                    if(this.state.animeList.length == 0) {\r\n                        fetchMediaList(\"ANIME\")\r\n                        .then(list => {\r\n                            store.setAnimeList(list);\r\n                            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                            this.loading = false;\r\n                        })\r\n                    } else {\r\n                        this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                        this.loading = false;\r\n                    }\r\n                } else if (this.$route.name == \"MangaList\") {\r\n                    if(this.state.mangaList.length == 0) {\r\n                        fetchMediaList(\"MANGA\")\r\n                        .then(list => {\r\n                            store.setMangaList(list);\r\n                            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                            this.loading = false;\r\n\r\n                        })\r\n                    } else {\r\n                        this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                        this.loading = false;\r\n                    }\r\n                }\r\n            }, 100)\r\n            \r\n        },\r\n        popupShow(media: ActivityMedia) {\r\n            this.showPopup = true;\r\n            this.popupMedia = media;\r\n        },\r\n        popupHide() {\r\n            this.showPopup = false;\r\n        },\r\n        toggleFilter(index: number, key: string) {\r\n            // Reset view to first page\r\n            this.currentPage = 0;\r\n\r\n            const indexof = this.filteredFilters[index].checked.indexOf(key);\r\n            if(indexof > -1) {\r\n                this.filteredFilters[index].checked.splice(indexof, 1);\r\n            } else {\r\n                this.filteredFilters[index].checked.push(key);\r\n            }\r\n\r\n            // Calculate new length\r\n            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n        },\r\n        navigate(set: number) {\r\n            if(set < 0) return;\r\n            if(set >= this.listLength) return;\r\n            this.currentPage = set;\r\n        },\r\n        prettyFormat(format: string) {\r\n            if(!format) return '';\r\n            else if(format == 'TV_SHORT') return 'TV Short';\r\n            else if([\"TV\", \"OVA\", \"ONA\"].indexOf(format) > -1) return format; \r\n            else return format[0] + format.slice(1).replace(\"_\", \" \").toLowerCase();\r\n        },\r\n        prettyStatus(status: string) {\r\n            return status[0] + status.slice(1).toLowerCase();\r\n        },\r\n        resolveIcon(status: string) {\r\n            switch(status) {\r\n                case 'CURRENT':\r\n                case 'REPEATING':\r\n                    return 'play'\r\n                case 'DROPPED':\r\n                    return 'stop'\r\n                case 'PAUSED':\r\n                    return 'pause'\r\n                case 'COMPLETED':\r\n                    return 'check'\r\n                default:\r\n                    return 'clock'\r\n                }\r\n        },\r\n        resolveColor(status: string) {\r\n            switch(status) {\r\n                case 'CURRENT':\r\n                    return '#2f754e'\r\n                case 'DROPPED':\r\n                    return '#a44646'\r\n                case 'PAUSED':\r\n                    return '#ad8015'\r\n                case 'COMPLETED':\r\n                    return '#14699b'\r\n                default:\r\n                    return '#595f6e'\r\n            }\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n// CONTROLS\r\n.controls-input {\r\n    width: 100%;\r\n    padding: 10px;\r\n\r\n    font-size: 2em;\r\n    border-bottom: 3px solid var(--color-background-border);\r\n}\r\n\r\n.filter-name {\r\n    padding: 4px;\r\n}\r\n\r\n.filter-button {\r\n    appearance: none;\r\n    font: inherit;\r\n    color: inherit;\r\n    background: var(--color-background-secondary);\r\n    outline: none;\r\n    border: none;\r\n\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    font-weight: 500;\r\n\r\n    padding: 4px 12px;\r\n    margin: 4px;\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.selected {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text);\r\n}\r\n// TABLE\r\n.tableHeader {\r\n    text-align: left;\r\n    font-weight: 500;\r\n}\r\n\r\n.tableRow {\r\n    cursor: pointer;\r\n    transition: .2s;\r\n\r\n    &:nth-child(even) {\r\n        background: var(--color-background-darker);\r\n    }\r\n\r\n    &:hover {\r\n        color: var(--color-text-blue);\r\n    }\r\n}\r\n\r\n.tableData, .tableHeader {\r\n    border-bottom: 2px solid var(--color-background-border);\r\n    //font-size: .9em;\r\n    padding: .5em 1em;\r\n}\r\n\r\n.tableData-title, .tableData-statusWrapper {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.tableData-image {\r\n    width: 24px;\r\n    height: 24px;\r\n    min-width: 24px;\r\n    \r\n    margin-right: 12px;\r\n    border-radius: 6px;\r\n    object-fit: cover;\r\n}\r\n\r\n.tableData-regular {\r\n    text-align: center;\r\n}\r\n\r\n.tableData-iconWrapper {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.tableHeader-title {\r\n    width: 100%;\r\n}\r\n\r\n.tableHeader-regular {\r\n    min-width: 96px;\r\n    text-align: center;\r\n}\r\n\r\n.loading {\r\n    padding: 12px;\r\n}\r\n\r\n// RESPONSIVITY\r\n\r\n\r\n@media screen and (max-width: 780px) {\r\n    .table-responsive {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 472px) {\r\n    .table-responsive2 {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 650px) {\r\n    .controls-filterGroup {\r\n        padding: 10px;\r\n        border-bottom: 3px solid var(--color-selected-background);\r\n    }\r\n\r\n    .filter-name {\r\n        display: block;\r\n        font-weight: 500;\r\n    }\r\n}\r\n</style>","import { ActivityDate, ActivityMedia } from '@/interfaces/activity';\r\nimport { fetchList } from './api';\r\nimport { newActivityDate } from './helpers';\r\nimport store, { weekdays } from './store';\r\n\r\nexport async function fetchMediaList(type: string): Promise<ActivityMedia[]> {\r\n    const r = await fetchList(store.state.userData.id, type)\r\n    const list = r.data.MediaListCollection.lists;\r\n\r\n    // Merge all lists into one, remove custom lists\r\n    const formatted = list.filter((x: any) => !x.isCustomList).map((x: any) => x.entries).flat(1);\r\n\r\n    const final: ActivityMedia[] = formatted.map((x: any): ActivityMedia[] => ({\r\n        ...x.media,\r\n        title: x.media.title.romaji,\r\n        type: x.media.type,\r\n        status: x.status,\r\n        cover: x.media.coverImage.medium,\r\n        banner: x.media.bannerImage,\r\n        progress: x.progress,\r\n        started: mapDates(x.startedAt),\r\n        completed: mapDates(x.completedAt),\r\n        added: newActivityDate(x.createdAt*1000)\r\n    })) \r\n    .sort((a: ActivityMedia, b: ActivityMedia) => a.title.localeCompare(b.title)); // Sort alphabetically\r\n\r\n    return final;\r\n}\r\n\r\n//performance goes brrr\r\nfunction mapDates(y: any): ActivityDate {\r\n    if(y.day == null) {\r\n        return {\r\n            d: 0,\r\n            m: 0,\r\n            y: 0,\r\n            time: 0\r\n        }\r\n    }\r\n\r\n    const date = new Date(y.year, y.month, y.day);\r\n\r\n    return {\r\n        d: y.day,\r\n        m: y.month,\r\n        y: y.year,\r\n        weekday: weekdays[date.getDay()],\r\n        time: date.getTime()\r\n    }\r\n}","<template>\r\n    <div class=\"popup\" @click=\"$event.stopPropagation()\">\r\n        <div class=\"header\" :style=\"{ backgroundImage: 'url('+media.banner+')' }\">\r\n            <img class=\"header-image\" :src=\"media.cover\">\r\n            <a :href=\"'https://anilist.co/'+media.type.toLowerCase()+'/'+media.id\" target=\"_blank\" rel=\"nofollow\"><div class=\"header-title\">{{ media.title }}</div></a>\r\n            <span style=\"flex: 1\"></span>\r\n            <div class=\"header-control\" @click=\"close\">\r\n                <font-awesome-icon icon=\"times\"></font-awesome-icon>\r\n            </div>\r\n        </div>\r\n        <div class=\"content\">\r\n            <SeriesDetails :media=\"media\"></SeriesDetails>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nimport SeriesDetails from '@/components/User/Details/SeriesDetails.vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: {}\r\n    },\r\n\r\n    components: { SeriesDetails },\r\n    \r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        close(): void {\r\n            this.$emit('close');\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.popup {\r\n    background: var(--color-background);\r\n    border-radius: var(--radius);\r\n\r\n    z-index: 2;\r\n}\r\n\r\n.header {\r\n    display: flex;\r\n    align-items: flex-start;\r\n    justify-content: center;\r\n    padding: 10px 16px;\r\n\r\n    background: var(--color-background-darker);\r\n    border-radius: var(--radius);\r\n\r\n    height: 100px;\r\n    background-size: cover;\r\n}\r\n\r\n.header-image {\r\n    width: auto;\r\n    height: 80px;\r\n    object-fit: cover;\r\n\r\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);\r\n    border-radius: var(--radius);\r\n    margin-right: 6px;\r\n}\r\n\r\na {\r\n    color: inherit;\r\n}\r\n\r\n.header-title {\r\n    font-weight: 500;\r\n    font-size: 1em;\r\n\r\n    color: white;\r\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);\r\n    padding: 8px;\r\n    border-radius: var(--radius);\r\n}\r\n\r\n.header-control {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    \r\n    width: 29px;\r\n    height: 29px;\r\n\r\n    text-align: center;\r\n    border-radius: 3px;\r\n\r\n    user-select: none;\r\n    transition: .2s;\r\n    cursor: pointer;\r\n\r\n    margin-left: 6px;\r\n\r\n    &:hover {\r\n        background: var(--color-background-secondary);\r\n    }\r\n\r\n    &:active {\r\n        opacity: 0.7;\r\n    }\r\n}\r\n\r\n.header-title, .header-control {\r\n    background: rgba(0, 0, 0, 0.4);\r\n}\r\n\r\n.content {\r\n    max-height: 70vh;\r\n    overflow-y: auto;\r\n}\r\n\r\n@media screen and (max-width: 900px) {\r\n    .popup {\r\n        margin: 10px;\r\n        width: 100%;\r\n    }\r\n}\r\n\r\n@media screen and (min-width: 901px) {\r\n    .popup {\r\n        min-width: 500px;\r\n    }\r\n}\r\n</style>","\r\nimport store from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nimport SeriesDetails from '@/components/User/Details/SeriesDetails.vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        media: {}\r\n    },\r\n\r\n    components: { SeriesDetails },\r\n    \r\n    data() {\r\n        return {\r\n            state: store.state\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        close(): void {\r\n            this.$emit('close');\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Popup.vue?vue&type=template&id=6eedf04c&scoped=true\"\nimport script from \"./Popup.vue?vue&type=script&lang=ts\"\nexport * from \"./Popup.vue?vue&type=script&lang=ts\"\n\nimport \"./Popup.vue?vue&type=style&index=0&id=6eedf04c&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-6eedf04c\"\n\nexport default script","<template>\r\n    <div class=\"pager\">\r\n        <button class=\"pager-button pager-arrow\" @click=\"$emit('set', current-1)\">\r\n            <font-awesome-icon icon=\"chevron-left\"></font-awesome-icon>\r\n        </button>\r\n        <button class=\"pager-button\" v-for=\"i in max\" :key=\"i\" @click=\"$emit('set', i-1)\" :class=\"{ selected: current == i-1 }\">\r\n            {{ i }}\r\n        </button>\r\n        <button class=\"pager-button pager-arrow\" @click=\"$emit('set', current+1)\">\r\n            <font-awesome-icon icon=\"chevron-right\"></font-awesome-icon>\r\n        </button>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        current: Number,\r\n        max: Number\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.pager {\r\n    display: flex;\r\n    justify-content: center;\r\n}\r\n\r\n.pager-button {\r\n    appearance: none;\r\n    outline: none;\r\n    border: none;\r\n    color: inherit;\r\n    background: inherit;\r\n    font: inherit;\r\n\r\n    padding: 8px;\r\n    margin: 4px 2px;\r\n\r\n    text-align: center;\r\n    border-radius: 3px;\r\n\r\n    font-weight: 500;\r\n\r\n    cursor: arrow;\r\n\r\n    transition: background .2s ease;\r\n\r\n    &:not(.selected):hover {\r\n        background: var(--color-selected-background);\r\n    }\r\n}\r\n\r\n.pager-arrow {\r\n    padding: 8px 24px;\r\n    margin: 4px;\r\n    background: var(--color-background-darker);\r\n}\r\n\r\n.selected {\r\n    background: var(--color-selected-background);\r\n    color: var(--color-selected-text)\r\n}\r\n</style>","\r\nimport { defineComponent } from 'vue';\r\n\r\nexport default defineComponent({\r\n    props: {\r\n        current: Number,\r\n        max: Number\r\n    }\r\n})\r\n","import { render } from \"./Pagination.vue?vue&type=template&id=5120db18&scoped=true\"\nimport script from \"./Pagination.vue?vue&type=script&lang=ts\"\nexport * from \"./Pagination.vue?vue&type=script&lang=ts\"\n\nimport \"./Pagination.vue?vue&type=style&index=0&id=5120db18&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-5120db18\"\n\nexport default script","\r\nimport { defineComponent } from \"vue\";\r\n\r\nimport store from '@/store/store';\r\nimport { fetchMediaList } from \"@/store/lists\";\r\nimport { prettyDate } from \"@/store/helpers\";\r\n\r\nimport { ActivityMedia } from \"@/interfaces/activity\";\r\nimport { Filter } from '@/interfaces/filters';\r\n\r\nimport Popup from './Popup.vue';\r\nimport Pagination from './Pagination.vue';\r\n\r\nexport default defineComponent({\r\n    components: { Popup, Pagination },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            prettyDate: prettyDate,\r\n\r\n            loading: true,\r\n            displayCover: -1,\r\n\r\n            showPopup: false,\r\n            popupMedia: {} as ActivityMedia,\r\n\r\n            pageSize: 100, // size of one page\r\n            currentPage: 0, // we're using computer-friendly numbers here\r\n            listLength: 0,\r\n\r\n            query: \"\",\r\n            filters: [\r\n                {\r\n                    name: \"Status\",\r\n                    key: \"status\",\r\n                    type: \"both\",\r\n                    values: [\r\n                        {\r\n                            animeName: \"Watching\",\r\n                            mangaName: \"Reading\",\r\n                            key: \"CURRENT\"\r\n                        },\r\n                        {\r\n                            animeName: \"Rewatching\",\r\n                            mangaName: \"Rereading\",\r\n                            key: \"REPEATING\"\r\n                        },\r\n                        {\r\n                            name: \"Completed\",\r\n                            key: \"COMPLETED\"\r\n                        },\r\n                        {\r\n                            name: \"Planning\",\r\n                            key: \"PLANNING\"\r\n                        },\r\n                        {\r\n                            name: \"Dropped\",\r\n                            key: \"DROPPED\"\r\n                        },\r\n                        {\r\n                            name: \"Paused\",\r\n                            key: \"PAUSED\"\r\n                        }\r\n                    ],\r\n                    checked: [\"COMPLETED\", \"CURRENT\", \"REPEATING\"]\r\n                },\r\n                {\r\n                    name: \"Type\",\r\n                    key: \"format\",\r\n                    type: \"anime\",\r\n                    values: [\r\n                        {\r\n                            name: \"TV\",\r\n                            key: \"TV\"\r\n                        },\r\n                        {\r\n                            name: \"TV Short\",\r\n                            key: \"TV_SHORT\"\r\n                        },\r\n                        {\r\n                            name: \"Movie\",\r\n                            key: \"MOVIE\"\r\n                        },\r\n                        {\r\n                            name: \"Special\",\r\n                            key: \"SPECIAL\"\r\n                        },\r\n                        {\r\n                            name: \"OVA\",\r\n                            key: \"OVA\"\r\n                        },\r\n                        {\r\n                            name: \"ONA\",\r\n                            key: \"ONA\"\r\n                        },\r\n                        {\r\n                            name: \"Music\",\r\n                            key: \"MUSIC\"\r\n                        }\r\n                    ],\r\n                    checked: [\"TV\", \"TV_SHORT\", \"MOVIE\", \"SPECIAL\", \"OVA\", \"ONA\", \"MUSIC\"]\r\n                },\r\n                {\r\n                    name: \"Type\",\r\n                    key: \"format\",\r\n                    type: \"manga\",\r\n                    values: [\r\n                        {\r\n                            name: \"Manga\",\r\n                            key: \"MANGA\"\r\n                        },\r\n                        {\r\n                            name: \"Light novel\",\r\n                            key: \"NOVEL\"\r\n                        },\r\n                        {\r\n                            name: \"One shot\",\r\n                            key: \"ONE_SHOT\"\r\n                        }\r\n                    ],\r\n                    checked: [\"MANGA\", \"NOVEL\", \"ONE_SHOT\"]\r\n                }\r\n            ]\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.fetchData();\r\n    },\r\n\r\n    watch: {\r\n        '$route': 'fetchData',\r\n        query() {\r\n            this.currentPage = 0;\r\n\r\n            // Calculate new length\r\n            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n        }\r\n    },\r\n\r\n    computed: {\r\n        list(): ActivityMedia[] {\r\n            const raw: ActivityMedia[] = (this.$route.name == \"AnimeList\" ? this.state.animeList : this.state.mangaList);\r\n            \r\n            // For starters, we filter the list by user's search query (if there's none, this function will just do nothing)\r\n            \r\n            let filtered: ActivityMedia[] = raw.filter(item => item.title.toLowerCase().indexOf(this.query.toLowerCase()) > -1);\r\n            \r\n            // Loop through each applicable filter and apply it\r\n            this.filteredFilters.forEach(filter => {\r\n                filtered = filtered.filter((x: any) => filter.checked.indexOf(x[filter.key]) > -1)\r\n            })\r\n            return filtered;\r\n        },\r\n        paginatedList(): ActivityMedia[] {\r\n            return this.list.slice(this.currentPage * this.pageSize, (this.currentPage + 1) * this.pageSize)\r\n        },\r\n        filteredFilters(): Filter[] {\r\n            return this.filters.filter(filter => {\r\n                if(this.$route.name == \"AnimeList\" && filter.type == \"manga\") return false;\r\n                else if(this.$route.name == \"MangaList\" && filter.type == \"anime\") return false;\r\n                else return true;\r\n            });\r\n        }\r\n    },\r\n\r\n    directives: {\r\n        lazyload: {\r\n            mounted(el): any {\r\n                el.src = el.dataset.src;\r\n            }\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        fetchData() {\r\n            // setTimeout is here, because without it, the DOM has a short lag (when the list is large, at least.). That way, the DOM has a lag as well,\r\n            // but it's once 'List' component is visible to the user, and \"Loading...\" label is displayed, which surely improves user experience.\r\n            this.loading = true;\r\n            this.currentPage = 0;\r\n            this.listLength = 0;\r\n            setTimeout(() => {\r\n                if(this.$route.name == \"AnimeList\") {\r\n                    if(this.state.animeList.length == 0) {\r\n                        fetchMediaList(\"ANIME\")\r\n                        .then(list => {\r\n                            store.setAnimeList(list);\r\n                            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                            this.loading = false;\r\n                        })\r\n                    } else {\r\n                        this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                        this.loading = false;\r\n                    }\r\n                } else if (this.$route.name == \"MangaList\") {\r\n                    if(this.state.mangaList.length == 0) {\r\n                        fetchMediaList(\"MANGA\")\r\n                        .then(list => {\r\n                            store.setMangaList(list);\r\n                            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                            this.loading = false;\r\n\r\n                        })\r\n                    } else {\r\n                        this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n                        this.loading = false;\r\n                    }\r\n                }\r\n            }, 100)\r\n            \r\n        },\r\n        popupShow(media: ActivityMedia) {\r\n            this.showPopup = true;\r\n            this.popupMedia = media;\r\n        },\r\n        popupHide() {\r\n            this.showPopup = false;\r\n        },\r\n        toggleFilter(index: number, key: string) {\r\n            // Reset view to first page\r\n            this.currentPage = 0;\r\n\r\n            const indexof = this.filteredFilters[index].checked.indexOf(key);\r\n            if(indexof > -1) {\r\n                this.filteredFilters[index].checked.splice(indexof, 1);\r\n            } else {\r\n                this.filteredFilters[index].checked.push(key);\r\n            }\r\n\r\n            // Calculate new length\r\n            this.listLength = Math.ceil(this.list.length / this.pageSize);\r\n        },\r\n        navigate(set: number) {\r\n            if(set < 0) return;\r\n            if(set >= this.listLength) return;\r\n            this.currentPage = set;\r\n        },\r\n        prettyFormat(format: string) {\r\n            if(!format) return '';\r\n            else if(format == 'TV_SHORT') return 'TV Short';\r\n            else if([\"TV\", \"OVA\", \"ONA\"].indexOf(format) > -1) return format; \r\n            else return format[0] + format.slice(1).replace(\"_\", \" \").toLowerCase();\r\n        },\r\n        prettyStatus(status: string) {\r\n            return status[0] + status.slice(1).toLowerCase();\r\n        },\r\n        resolveIcon(status: string) {\r\n            switch(status) {\r\n                case 'CURRENT':\r\n                case 'REPEATING':\r\n                    return 'play'\r\n                case 'DROPPED':\r\n                    return 'stop'\r\n                case 'PAUSED':\r\n                    return 'pause'\r\n                case 'COMPLETED':\r\n                    return 'check'\r\n                default:\r\n                    return 'clock'\r\n                }\r\n        },\r\n        resolveColor(status: string) {\r\n            switch(status) {\r\n                case 'CURRENT':\r\n                    return '#2f754e'\r\n                case 'DROPPED':\r\n                    return '#a44646'\r\n                case 'PAUSED':\r\n                    return '#ad8015'\r\n                case 'COMPLETED':\r\n                    return '#14699b'\r\n                default:\r\n                    return '#595f6e'\r\n            }\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./List.vue?vue&type=template&id=ada47df6&scoped=true\"\nimport script from \"./List.vue?vue&type=script&lang=ts\"\nexport * from \"./List.vue?vue&type=script&lang=ts\"\n\nimport \"./List.vue?vue&type=style&index=0&id=ada47df6&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-ada47df6\"\n\nexport default script","<template>\r\n    <div class=\"history\">\r\n        <transition name=\"popup-backdrop\">\r\n            <div class=\"popup-backdrop\" v-if=\"showPopup\" @click=\"popupHide\">\r\n                <transition appear name=\"popup\">\r\n                    <Popup :media=\"popupMedia\" @close=\"popupHide\"></Popup>\r\n                </transition>\r\n            </div>\r\n        </transition>\r\n        <div class=\"loading\" v-if=\"loading\">\r\n            Loading...\r\n        </div>\r\n        <div v-else>\r\n            <div class=\"header header-desktop\">\r\n                <div class=\"month\"></div>\r\n                <div class=\"month\">Jan</div>\r\n                <div class=\"month\">Feb</div>\r\n                <div class=\"month\">Mar</div>\r\n                <div class=\"month\">Apr</div>\r\n                <div class=\"month\">May</div>\r\n                <div class=\"month\">Jun</div>\r\n                <div class=\"month\">Jul</div>\r\n                <div class=\"month\">Aug</div>\r\n                <div class=\"month\">Sep</div>\r\n                <div class=\"month\">Oct</div>\r\n                <div class=\"month\">Nov</div>\r\n                <div class=\"month\">Dec</div>\r\n            </div>\r\n            <div class=\"header header-mobile\">\r\n                <div class=\"month\"></div>\r\n                <div class=\"month\" v-for=\"i in 12\" :key=\"i\">{{ i }}</div>\r\n            </div>\r\n            <div class=\"row\" v-for=\"year in years\" :key=\"year\">\r\n                <div class=\"col-year\">{{ year.year }}</div>\r\n                <div class=\"col\" v-for=\"(month, i) in 12\" :key=\"i\" @click=\"load(month, year.year)\">\r\n                    <div class=\"col-bg\" :style=\"{ opacity: year.months[i] ? getOpacity(year.months[i].count) : 0 }\"></div>\r\n                    <div class=\"col-label\">{{ year.months[i] ? year.months[i].count : 0 }}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"missing\" v-if=\"unknownCount\">There are {{ unknownCount }} titles with unknown completed date.</div>\r\n            <div class=\"details\">\r\n                <div class=\"details-content\" v-if=\"selectedMonth && selectedYear\">\r\n                    <div class=\"details-title\">{{ $route.name == \"AnimeHistory\" ? \"Anime\" : \"Manga\" }} completed in {{ monthNames[selectedMonth-1] }} of {{ selectedYear }} ({{ selected.length }})</div>\r\n                    <div class=\"details-list\">\r\n                        <div class=\"details-entry\" v-for=\"entry in selected\" :key=\"entry.id\" @click=\"popupShow(entry)\">\r\n                            <img class=\"entry-image\" :src=\"entry.cover\">\r\n                            <div class=\"entry-title\">\r\n                                {{ entry.title }}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div v-else>\r\n                    Choose a month above to see details on it.\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { ActivityMedia } from '@/interfaces/activity';\r\nimport { fetchMediaList } from '@/store/lists';\r\nimport store, { monthNames } from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nimport Popup from '@/components/List/Popup.vue';\r\n\r\ninterface Year {\r\n    year: number;\r\n    months: {\r\n        count: number;\r\n    }[];\r\n}\r\n\r\nexport default defineComponent({\r\n    components: { Popup },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            loading: false,\r\n            monthNames,\r\n\r\n            years: [] as Year[],\r\n            unknownCount: 0,\r\n            max: 0,\r\n\r\n            showPopup: false,\r\n            popupMedia: {} as ActivityMedia,\r\n\r\n            selected: [] as ActivityMedia[],\r\n            selectedMonth: 0,\r\n            selectedYear: 0,\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.fetchData();\r\n    },\r\n\r\n    watch: {\r\n        '$route': 'fetchData'\r\n    },\r\n\r\n    computed: {\r\n        list(): ActivityMedia[] {\r\n            const filtered: ActivityMedia[] = (this.$route.name == \"AnimeHistory\" ? this.state.animeList : this.state.mangaList);\r\n\r\n            return filtered;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        fetchData() {\r\n            this.clear();\r\n            this.loading = true;\r\n            if(this.$route.name == \"AnimeHistory\") {\r\n                if(this.state.animeList.length == 0) {\r\n                    fetchMediaList(\"ANIME\")\r\n                    .then(list => {\r\n                        store.setAnimeList(list);\r\n                        this.parseData();\r\n                    })\r\n                } else {\r\n                    this.parseData();\r\n                }\r\n            } else if (this.$route.name == \"MangaHistory\") {\r\n                if(this.state.mangaList.length == 0) {\r\n                    fetchMediaList(\"MANGA\")\r\n                    .then(list => {\r\n                        store.setMangaList(list);\r\n                        this.parseData();\r\n                    })\r\n                } else {\r\n                    this.parseData();\r\n                }\r\n            }\r\n        },\r\n\r\n        parseData() {\r\n            let currentYear = new Date().getFullYear();\r\n\r\n            let progress = true;\r\n\r\n            while(progress) {\r\n                const zeros = this.checkYear(currentYear);\r\n                if(zeros < 12) {\r\n                    currentYear--;\r\n                } else {\r\n                    const lesser = this.list.filter(x => x.completed && x.completed?.y < currentYear && x.completed?.y != 0);\r\n                    if(lesser.length == 0) {\r\n                        progress = false;\r\n                        this.years.pop(); // the last, empty year is appended to array of years, so we have to remove it manually here.\r\n                    } else {\r\n                        currentYear--;\r\n                    }\r\n                }\r\n\r\n                if(currentYear < 2000) {\r\n                    progress = false;\r\n                }\r\n            }\r\n            \r\n            this.unknownCount = this.list.filter(x => x.status == \"COMPLETED\" && x.completed?.y == 0).length;\r\n\r\n            this.loading = false;\r\n        },\r\n    \r\n        checkYear(year: number): number {\r\n            let zeroCount = 0;\r\n            for (let i = 1; i < 13; i++) {\r\n                const targetYear = this.years.find(m => m.year == year);\r\n                const filtered = this.list.filter(x => x.completed?.m == i && x.completed?.y == year);\r\n\r\n                if(filtered.length == 0) zeroCount++;\r\n                if(filtered.length > this.max) this.max = filtered.length;\r\n                if(targetYear) {\r\n                    targetYear.months[i-1] = {\r\n                        count: filtered.length\r\n                    }\r\n                } else {\r\n                    const obj: Year = {\r\n                        year: year,\r\n                        months: []\r\n                    }\r\n\r\n                    obj.months[i-1] = {\r\n                        count: filtered.length\r\n                    }\r\n\r\n                    this.years.push(obj);\r\n                }\r\n            }\r\n\r\n            return zeroCount;\r\n        },\r\n\r\n        popupShow(media: ActivityMedia) {\r\n            this.showPopup = true;\r\n            this.popupMedia = media;\r\n        },\r\n\r\n        popupHide() {\r\n            this.showPopup = false;\r\n        },\r\n\r\n        load(month: number, year: number) {\r\n            const matches = this.list.filter(entry => entry.completed?.m == month && entry.completed?.y == year);\r\n            this.selectedMonth = month;\r\n            this.selectedYear = year;\r\n            this.selected = matches;\r\n        },\r\n\r\n        clear() {\r\n            this.years = [];\r\n            this.max = 0;\r\n            this.unknownCount = 0;\r\n\r\n            this.selected = [];\r\n            this.selectedMonth = 0;\r\n            this.selectedYear = 0;\r\n        },\r\n\r\n        getOpacity(count: number): number {\r\n            const ratio = count / this.max;\r\n\r\n            return ratio;\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.row, .header {\r\n    display: grid;\r\n    grid-template-columns: repeat(13, 1fr);\r\n}\r\n\r\n.col, .col-year {\r\n    margin: 3px;\r\n    \r\n    border-radius: 4px;\r\n    text-align: center;\r\n    font-weight: 500;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n\r\n    cursor: pointer;\r\n    position: relative;\r\n\r\n    transition: .2s;\r\n\r\n    border: 1px solid transparent;\r\n}\r\n\r\n.col:hover {\r\n    border: 1px solid var(--color-selected-text);\r\n}\r\n\r\n.col-bg {\r\n    background: var(--color-background-day);\r\n    position: absolute;\r\n    border-radius: 4px;\r\n\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n\r\n    z-index: 0;\r\n}\r\n\r\n.col-label {\r\n    z-index: 1;\r\n}\r\n\r\n.missing {\r\n    margin: 10px;\r\n    font-weight: 500;\r\n    text-align: center;\r\n}\r\n\r\n.details {\r\n    margin: 10px;\r\n}\r\n\r\n.details-entry {\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    margin: 10px;\r\n\r\n    transition: .2s;\r\n\r\n    &:hover {\r\n        color: var(--color-text-blue);\r\n    }\r\n}\r\n\r\n.entry-image {\r\n    width: 32px;\r\n    height: 32px;\r\n    min-width: 32px;\r\n\r\n    border-radius: var(--radius);\r\n    object-fit: cover;\r\n\r\n    margin: 0 12px;\r\n}\r\n\r\n.entry-title {\r\n    cursor: pointer;\r\n}\r\n\r\n.month {\r\n    text-align: center;\r\n    font-weight: 600;\r\n    border-bottom: 1px solid var(--color-background-border);\r\n}\r\n@media screen and (min-width: 651px) {\r\n    .col, .col-year {\r\n        padding: 12px 12px 8px 12px;\r\n    }\r\n\r\n    .month {\r\n        padding: 12px;\r\n    }\r\n\r\n    .header-mobile {\r\n        display: none;\r\n    }\r\n}\r\n\r\n@media screen and (max-width: 650px) {\r\n    .col-label {\r\n        visibility: hidden;\r\n    }\r\n\r\n    .header-desktop {\r\n        display: none;\r\n    }\r\n\r\n    .month {\r\n        font-size: .86em;\r\n    }\r\n\r\n    .month:first-child {\r\n        width: 40px;\r\n        margin: 3px;\r\n    }\r\n}\r\n</style>","\r\nimport { ActivityMedia } from '@/interfaces/activity';\r\nimport { fetchMediaList } from '@/store/lists';\r\nimport store, { monthNames } from '@/store/store';\r\nimport { defineComponent } from 'vue';\r\n\r\nimport Popup from '@/components/List/Popup.vue';\r\n\r\ninterface Year {\r\n    year: number;\r\n    months: {\r\n        count: number;\r\n    }[];\r\n}\r\n\r\nexport default defineComponent({\r\n    components: { Popup },\r\n    data() {\r\n        return {\r\n            state: store.state,\r\n            loading: false,\r\n            monthNames,\r\n\r\n            years: [] as Year[],\r\n            unknownCount: 0,\r\n            max: 0,\r\n\r\n            showPopup: false,\r\n            popupMedia: {} as ActivityMedia,\r\n\r\n            selected: [] as ActivityMedia[],\r\n            selectedMonth: 0,\r\n            selectedYear: 0,\r\n        }\r\n    },\r\n\r\n    created() {\r\n        this.fetchData();\r\n    },\r\n\r\n    watch: {\r\n        '$route': 'fetchData'\r\n    },\r\n\r\n    computed: {\r\n        list(): ActivityMedia[] {\r\n            const filtered: ActivityMedia[] = (this.$route.name == \"AnimeHistory\" ? this.state.animeList : this.state.mangaList);\r\n\r\n            return filtered;\r\n        }\r\n    },\r\n\r\n    methods: {\r\n        fetchData() {\r\n            this.clear();\r\n            this.loading = true;\r\n            if(this.$route.name == \"AnimeHistory\") {\r\n                if(this.state.animeList.length == 0) {\r\n                    fetchMediaList(\"ANIME\")\r\n                    .then(list => {\r\n                        store.setAnimeList(list);\r\n                        this.parseData();\r\n                    })\r\n                } else {\r\n                    this.parseData();\r\n                }\r\n            } else if (this.$route.name == \"MangaHistory\") {\r\n                if(this.state.mangaList.length == 0) {\r\n                    fetchMediaList(\"MANGA\")\r\n                    .then(list => {\r\n                        store.setMangaList(list);\r\n                        this.parseData();\r\n                    })\r\n                } else {\r\n                    this.parseData();\r\n                }\r\n            }\r\n        },\r\n\r\n        parseData() {\r\n            let currentYear = new Date().getFullYear();\r\n\r\n            let progress = true;\r\n\r\n            while(progress) {\r\n                const zeros = this.checkYear(currentYear);\r\n                if(zeros < 12) {\r\n                    currentYear--;\r\n                } else {\r\n                    const lesser = this.list.filter(x => x.completed && x.completed?.y < currentYear && x.completed?.y != 0);\r\n                    if(lesser.length == 0) {\r\n                        progress = false;\r\n                        this.years.pop(); // the last, empty year is appended to array of years, so we have to remove it manually here.\r\n                    } else {\r\n                        currentYear--;\r\n                    }\r\n                }\r\n\r\n                if(currentYear < 2000) {\r\n                    progress = false;\r\n                }\r\n            }\r\n            \r\n            this.unknownCount = this.list.filter(x => x.status == \"COMPLETED\" && x.completed?.y == 0).length;\r\n\r\n            this.loading = false;\r\n        },\r\n    \r\n        checkYear(year: number): number {\r\n            let zeroCount = 0;\r\n            for (let i = 1; i < 13; i++) {\r\n                const targetYear = this.years.find(m => m.year == year);\r\n                const filtered = this.list.filter(x => x.completed?.m == i && x.completed?.y == year);\r\n\r\n                if(filtered.length == 0) zeroCount++;\r\n                if(filtered.length > this.max) this.max = filtered.length;\r\n                if(targetYear) {\r\n                    targetYear.months[i-1] = {\r\n                        count: filtered.length\r\n                    }\r\n                } else {\r\n                    const obj: Year = {\r\n                        year: year,\r\n                        months: []\r\n                    }\r\n\r\n                    obj.months[i-1] = {\r\n                        count: filtered.length\r\n                    }\r\n\r\n                    this.years.push(obj);\r\n                }\r\n            }\r\n\r\n            return zeroCount;\r\n        },\r\n\r\n        popupShow(media: ActivityMedia) {\r\n            this.showPopup = true;\r\n            this.popupMedia = media;\r\n        },\r\n\r\n        popupHide() {\r\n            this.showPopup = false;\r\n        },\r\n\r\n        load(month: number, year: number) {\r\n            const matches = this.list.filter(entry => entry.completed?.m == month && entry.completed?.y == year);\r\n            this.selectedMonth = month;\r\n            this.selectedYear = year;\r\n            this.selected = matches;\r\n        },\r\n\r\n        clear() {\r\n            this.years = [];\r\n            this.max = 0;\r\n            this.unknownCount = 0;\r\n\r\n            this.selected = [];\r\n            this.selectedMonth = 0;\r\n            this.selectedYear = 0;\r\n        },\r\n\r\n        getOpacity(count: number): number {\r\n            const ratio = count / this.max;\r\n\r\n            return ratio;\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./History.vue?vue&type=template&id=3294c33b&scoped=true\"\nimport script from \"./History.vue?vue&type=script&lang=ts\"\nexport * from \"./History.vue?vue&type=script&lang=ts\"\n\nimport \"./History.vue?vue&type=style&index=0&id=3294c33b&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-3294c33b\"\n\nexport default script","import { createRouter, createWebHistory, RouteRecordRaw } from 'vue-router'\r\nimport Home from '../views/Home.vue'\r\nimport Special from '../views/Special.vue';\r\nimport User from '../views/User.vue';\r\n\r\nimport Help from '../components/Special/Help.vue';\r\nimport About from '../components/Special/About.vue';\r\nimport Main from '../components/User/Main.vue';\r\nimport List from '../components/List/List.vue';\r\nimport History from '../components/History/History.vue';\r\n\r\nconst routes: Array<RouteRecordRaw> = [\r\n  {\r\n    path: '/',\r\n    name: 'Home',\r\n    component: Home\r\n  },\r\n  {\r\n    path: '/s',\r\n    name: 'Special',\r\n    component: Special,\r\n    children: [\r\n      {\r\n        path: 'help',\r\n        component: Help\r\n      },\r\n      {\r\n        path: 'about',\r\n        component: About\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    path: '/:user',\r\n    name: 'User',\r\n    component: User,\r\n    children: [\r\n      {\r\n        path: '',\r\n        component: Main\r\n      },\r\n      {\r\n        path: 'list/anime',\r\n        component: List,\r\n        name: \"AnimeList\",\r\n        props: {\r\n          type: 'anime'\r\n        }\r\n      },\r\n      {\r\n        path: 'list/manga',\r\n        component: List,\r\n        name: \"MangaList\",\r\n        props: {\r\n          type: 'manga'\r\n        }\r\n      },\r\n      {\r\n        path: 'history/anime',\r\n        component: History,\r\n        name: \"AnimeHistory\"\r\n      },\r\n      {\r\n        path: 'history/manga',\r\n        component: History,\r\n        name: \"MangaHistory\"\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\nconst router = createRouter({\r\n  history: createWebHistory(process.env.BASE_URL),\r\n  routes\r\n})\r\n\r\nexport default router\r\n","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nimport { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { faBookOpen, faChevronRight, faCog, faInfo, faLightbulb, faMoon, faQuestionCircle, faRandom, faList, faUserCircle, faChevronLeft, faTimes, faHistory, faPlay, faStop, faPause, faCheck, faClock, faBars, faRedoAlt } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\r\n\r\nlibrary.add(faCog, faChevronLeft, faChevronRight, faQuestionCircle, faMoon, faLightbulb, faInfo, faUserCircle, faBookOpen, faList, faRandom, faTimes, faHistory, faPlay, faStop, faPause, faCheck, faClock, faBars, faRedoAlt)\r\n\r\ncreateApp(App).use(router).component('font-awesome-icon', FontAwesomeIcon).mount('#app')\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Loading.vue?vue&type=style&index=0&id=64c13412&lang=scss&scoped=true\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./MenuItem.vue?vue&type=style&index=0&id=1903ee1d&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Popup.vue?vue&type=style&index=0&id=6eedf04c&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./List.vue?vue&type=style&index=0&id=ada47df6&lang=scss&scoped=true\""],"sourceRoot":""}